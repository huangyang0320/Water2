





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-pWLt6abkYhNeAHaDrPVG0yXCtIGRuCkwSUqQpsyN6smAIpIt+Iuq2IZKmoH9l3Cy/9ZnjvVrFZnvFFjGiqE3EA==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-a3b8a10d4a9e37a78f033ef4a4f525f5.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-2PFlrbxeLLXRfrOPSS0oTXJGnnaCdDq7Ry3S+NcBPI8AprqUwCdnQK/7r4GAGf29cXbjURnUutP58V9O0/xE7w==" rel="stylesheet" href="https://github.githubassets.com/assets/github-507d3a1815bf6d6fbda5797e4a2be57a.css" />
  
  
  <link crossorigin="anonymous" media="all" integrity="sha512-L+Xfjk72/sIPS5T8Z8Wy/+/78ngrN7jAjVpE5Zoo2KfZYqr9s8p6selV7sLydYrh0Y3Pu02CuEa7uuq70RjSxg==" rel="stylesheet" href="https://github.githubassets.com/assets/site-278e4176d194ae782983c71f1f767503.css" />
  
  

  <meta name="viewport" content="width=device-width">
  
  <title>chplayer/hls.min.js at master · niandeng-ckplayer/chplayer · GitHub</title>
    <meta name="description" content="网页视频播放器，支持mp4,flv,f4v以及m3u8格式，支持rtmp。支持点播和直播. Contribute to niandeng-ckplayer/chplayer development by creating an account on GitHub.">
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta property="og:image" content="https://avatars1.githubusercontent.com/u/24708992?s=400&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="niandeng-ckplayer/chplayer" /><meta property="og:url" content="https://github.com/niandeng-ckplayer/chplayer" /><meta property="og:description" content="网页视频播放器，支持mp4,flv,f4v以及m3u8格式，支持rtmp。支持点播和直播. Contribute to niandeng-ckplayer/chplayer development by creating an account on GitHub." />

  <link rel="assets" href="https://github.githubassets.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="E422:3DD3:D42AF:132F72:5C623FFE" data-pjax-transient>


  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

      <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
    <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">

  <meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-request_id" content="E422:3DD3:D42AF:132F72:5C623FFE" /><meta name="octolytics-dimension-region_edge" content="ap-southeast-1" /><meta name="octolytics-dimension-region_render" content="iad" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" />



    <meta name="google-analytics" content="UA-3769691-2">


<meta class="js-ga-set" name="dimension1" content="Logged Out">



  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="YzkyZDdjMTE2YTFjYzdkZDJjYmUyYmYzYmNjMzBhODY5MmMzMjI3YTE4NjU0MGUzYTMzMDRhYTI2NmJmYTAwZnx7InJlbW90ZV9hZGRyZXNzIjoiMTA2LjE0LjEzOC4yNiIsInJlcXVlc3RfaWQiOiJFNDIyOjNERDM6RDQyQUY6MTMyRjcyOjVDNjIzRkZFIiwidGltZXN0YW1wIjoxNTQ5OTQyNzg0LCJob3N0IjoiZ2l0aHViLmNvbSJ9">

    <meta name="enabled-features" content="UNIVERSE_BANNER,MARKETPLACE_PLAN_RESTRICTION_EDITOR,MARKETPLACE_BROWSING_V2">

  <meta name="html-safe-nonce" content="a892d6eac8b37fa8db494bdabb8c5ce7c81caa05">

  <meta http-equiv="x-pjax-version" content="1e236a1364eaf2ce03ef0005da7c0501">
  

      <link href="https://github.com/niandeng-ckplayer/chplayer/commits/master.atom" rel="alternate" title="Recent Commits to chplayer:master" type="application/atom+xml">

  <meta name="go-import" content="github.com/niandeng-ckplayer/chplayer git https://github.com/niandeng-ckplayer/chplayer.git">

  <meta name="octolytics-dimension-user_id" content="24708992" /><meta name="octolytics-dimension-user_login" content="niandeng-ckplayer" /><meta name="octolytics-dimension-repository_id" content="89308068" /><meta name="octolytics-dimension-repository_nwo" content="niandeng-ckplayer/chplayer" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="89308068" /><meta name="octolytics-dimension-repository_network_root_nwo" content="niandeng-ckplayer/chplayer" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />


    <link rel="canonical" href="https://github.com/niandeng-ckplayer/chplayer/blob/master/chplayer/hls/hls.min.js" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://github.githubassets.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-out env-production page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="px-2 py-4 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    


        
<header class="Header header-logged-out  position-relative f4 py-3" role="banner">
  <div class="container-lg d-flex px-3">
    <div class="d-flex flex-justify-between flex-items-center">
        <a class="mr-4" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
          <svg height="32" class="octicon octicon-mark-github text-white" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
        </a>
    </div>

    <div class="HeaderMenu HeaderMenu--logged-out d-flex flex-justify-between flex-items-center flex-auto">
      <div class="d-none">
        <button class="btn-link js-details-target" type="button" aria-label="Toggle navigation" aria-expanded="false">
          <svg height="24" class="octicon octicon-x text-gray" viewBox="0 0 12 16" version="1.1" width="18" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
        </button>
      </div>

        <nav class="mt-0" aria-label="Global">
          <ul class="d-flex list-style-none">
              <li class=" mr-3 mr-lg-3 edge-item-fix position-relative flex-wrap flex-justify-between d-flex flex-items-center ">
                <details class="HeaderMenu-details details-overlay details-reset width-full">
                  <summary class="HeaderMenu-summary HeaderMenu-link px-0 py-3 border-0 no-wrap  d-inline-block">
                    Why GitHub?
                    <svg x="0px" y="0px" viewBox="0 0 14 8" xml:space="preserve" fill="none" class="icon-chevon-down-mktg position-relative">
                      <path d="M1,1l6.2,6L13,1"></path>
                    </svg>
                  </summary>
                  <div class="dropdown-menu flex-auto rounded-1 bg-white px-0 mt-0  p-4 left-n4 position-absolute">
                    <a href="/features" class="py-2 lh-condensed-ultra d-block link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Features">Features <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a>
                    <ul class="list-style-none f5 pb-3">
                      <li class="edge-item-fix"><a href="/features/code-review/" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Code review">Code review</a></li>
                      <li class="edge-item-fix"><a href="/features/project-management/" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Project management">Project management</a></li>
                      <li class="edge-item-fix"><a href="/features/integrations" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Integrations">Integrations</a></li>
                      <li class="edge-item-fix"><a href="/features/actions" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Actions">Actions</a>
                      <li class="edge-item-fix"><a href="/features#team-management" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Team management">Team management</a></li>
                      <li class="edge-item-fix"><a href="/features#social-coding" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Social coding">Social coding</a></li>
                      <li class="edge-item-fix"><a href="/features#documentation" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Documentation">Documentation</a></li>
                      <li class="edge-item-fix"><a href="/features#code-hosting" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Code hosting">Code hosting</a></li>
                    </ul>

                    <ul class="list-style-none mb-0 border-lg-top pt-lg-3">
                      <li class="edge-item-fix"><a href="/case-studies" class="py-2 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Case studies">Case Studies <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                      <li class="edge-item-fix"><a href="/security" class="py-2 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Security">Security <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                    </ul>
                  </div>
                </details>
              </li>
              <li class=" mr-3 mr-lg-3">
                <a href="/enterprise" class="HeaderMenu-link no-underline py-3 d-block d-lg-inline-block" data-ga-click="(Logged out) Header, click, go to Enterprise">Enterprise</a>
              </li>

              <li class=" mr-3 mr-lg-3 edge-item-fix position-relative flex-wrap flex-justify-between d-flex flex-items-center ">
                <details class="HeaderMenu-details details-overlay details-reset width-full">
                  <summary class="HeaderMenu-summary HeaderMenu-link px-0 py-3 border-0 no-wrap  d-inline-block">
                    Explore
                    <svg x="0px" y="0px" viewBox="0 0 14 8" xml:space="preserve" fill="none" class="icon-chevon-down-mktg position-relative">
                      <path d="M1,1l6.2,6L13,1"></path>
                    </svg>
                  </summary>

                  <div class="dropdown-menu flex-auto rounded-1 bg-white px-0 pt-2 pb-0 mt-0  p-4 left-n4 position-absolute">
                    <ul class="list-style-none mb-3">
                      <li class="edge-item-fix"><a href="/explore" class="py-2 lh-condensed-ultra d-block link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Features">Explore GitHub <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                    </ul>

                    <h4 class="text-gray-light text-normal text-mono f5 mb-2  border-top pt-3">Learn &amp; contribute</h4>
                    <ul class="list-style-none mb-3">
                      <li class="edge-item-fix"><a href="/topics" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Topics">Topics</a></li>
                      <li class="edge-item-fix"><a href="/collections" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Collections">Collections</a></li>
                      <li class="edge-item-fix"><a href="/trending" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Trending">Trending</a></li>
                      <li class="edge-item-fix"><a href="https://lab.github.com/" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Learning lab">Learning Lab</a></li>
                      <li class="edge-item-fix"><a href="https://opensource.guide" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Open source guides">Open source guides</a></li>
                    </ul>

                    <h4 class="text-gray-light text-normal text-mono f5 mb-2  border-top pt-3">Connect with others</h4>
                    <ul class="list-style-none mb-0">
                      <li class="edge-item-fix"><a href="/events" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Events">Events</a></li>
                      <li class="edge-item-fix"><a href="https://github.community" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Community forum">Community forum</a></li>
                      <li class="edge-item-fix"><a href="https://education.github.com" class="py-2 pb-0 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to GitHub Education">GitHub Education</a></li>
                    </ul>
                  </div>
                </details>
              </li>

              <li class=" mr-3 mr-lg-3">
                <a href="/marketplace" class="HeaderMenu-link no-underline py-3 d-block d-lg-inline-block" data-ga-click="(Logged out) Header, go to Marketplace">Marketplace</a>
              </li>

              <li class=" mr-3 mr-lg-3 edge-item-fix position-relative flex-wrap flex-justify-between d-flex flex-items-center ">
                <details class="HeaderMenu-details details-overlay details-reset width-full">
                  <summary class="HeaderMenu-summary HeaderMenu-link px-0 py-3 border-0 no-wrap  d-inline-block">
                    Pricing
                    <svg x="0px" y="0px" viewBox="0 0 14 8" xml:space="preserve" fill="none" class="icon-chevon-down-mktg position-relative">
                       <path d="M1,1l6.2,6L13,1"></path>
                    </svg>
                  </summary>

                  <div class="dropdown-menu flex-auto rounded-1 bg-white px-0 pt-2 pb-4 mt-0  p-4 left-n4 position-absolute">
                    <a href="/pricing" class="pb-2 lh-condensed-ultra d-block link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Pricing">Plans <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a>

                    <ul class="list-style-none mb-3">
                      <li class="edge-item-fix"><a href="/pricing#feature-comparison" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Compare features">Compare plans</a></li>
                      <li class="edge-item-fix"><a href="https://enterprise.github.com/contact" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Compare features">Contact Sales</a></li>
                    </ul>

                    <ul class="list-style-none mb-0  border-top pt-3">
                      <li class="edge-item-fix"><a href="/nonprofit" class="py-2 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Nonprofits">Nonprofit <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                      <li class="edge-item-fix"><a href="https://education.github.com" class="py-2 pb-0 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover"  data-ga-click="(Logged out) Header, go to Education">Education <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                    </ul>
                  </div>
                </details>
              </li>
          </ul>
        </nav>

      <div class="d-flex flex-items-center px-0 text-center text-left">
          <div class="d-lg-flex mr-3">
            <div class="header-search scoped-search site-scoped-search js-site-search position-relative js-jump-to"
  role="combobox"
  aria-owns="jump-to-results"
  aria-label="Search or jump to"
  aria-haspopup="listbox"
  aria-expanded="false"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" data-scope-type="Repository" data-scope-id="89308068" data-scoped-search-url="/niandeng-ckplayer/chplayer/search" data-unscoped-search-url="/search" action="/niandeng-ckplayer/chplayer/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
      <label class="form-control header-search-wrapper header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text"
          class="form-control header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
          data-hotkey="s,/"
          name="q"
          value=""
          placeholder="Search"
          data-unscoped-placeholder="Search GitHub"
          data-scoped-placeholder="Search"
          autocapitalize="off"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          aria-label="Search"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations#csrf-token=PiMqVBzxmhB47YWD78tW2HBDjLNtpEXcqpaubhUFCVDCzm+CRq3jWX9l9FbjhVnKCONh+8ML2t6dlO+Gk2QrPg=="
          spellcheck="false"
          autocomplete="off"
          >
          <input type="hidden" class="js-site-search-type-field" name="type" >
            <img src="https://github.githubassets.com/images/search-key-slash.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="text-gray">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>


</ul>

            </div>
      </label>
</form>  </div>
</div>

          </div>

        <a class="HeaderMenu-link no-underline mr-3" href="/login?return_to=%2Fniandeng-ckplayer%2Fchplayer%2Fblob%2Fmaster%2Fchplayer%2Fhls%2Fhls.min.js" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign&nbsp;in</a>
          <a class="HeaderMenu-link d-inline-block no-underline border border-gray-dark rounded-1 px-2 py-1" href="/join" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign&nbsp;up</a>
      </div>
    </div>
  </div>
</header>

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">

</div>



  <div role="main" class="application-main " data-commit-hovercards-enabled>
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container >
      


  





  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">

  <li>
      <a href="/login?return_to=%2Fniandeng-ckplayer%2Fchplayer"
    class="btn btn-sm btn-with-count tooltipped tooltipped-s"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
    Watch
  </a>
  <a class="social-count" href="/niandeng-ckplayer/chplayer/watchers"
     aria-label="9 users are watching this repository">
    9
  </a>

  </li>

  <li>
        <a href="/login?return_to=%2Fniandeng-ckplayer%2Fchplayer"
      class="btn btn-sm btn-with-count tooltipped tooltipped-s"
      aria-label="You must be signed in to star a repository" rel="nofollow">
      <svg class="octicon octicon-star v-align-text-bottom" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"/></svg>
      Star
    </a>

    <a class="social-count js-social-count" href="/niandeng-ckplayer/chplayer/stargazers"
      aria-label="142 users starred this repository">
      142
    </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fniandeng-ckplayer%2Fchplayer"
        class="btn btn-sm btn-with-count tooltipped tooltipped-s"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <svg class="octicon octicon-repo-forked v-align-text-bottom" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
        Fork
      </a>

    <a href="/niandeng-ckplayer/chplayer/network/members" class="social-count"
       aria-label="54 users forked this repository">
      54
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" data-hovercard-type="user" data-hovercard-url="/hovercards?user_id=24708992" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/niandeng-ckplayer">niandeng-ckplayer</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="/niandeng-ckplayer/chplayer">chplayer</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
    aria-label="Repository"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /niandeng-ckplayer/chplayer" href="/niandeng-ckplayer/chplayer">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /niandeng-ckplayer/chplayer/issues" href="/niandeng-ckplayer/chplayer/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">16</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /niandeng-ckplayer/chplayer/pulls" href="/niandeng-ckplayer/chplayer/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>


    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /niandeng-ckplayer/chplayer/projects" href="/niandeng-ckplayer/chplayer/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >0</span>
</a>


    <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse alerts security people /niandeng-ckplayer/chplayer/pulse" href="/niandeng-ckplayer/chplayer/pulse">
      <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
      Insights
</a>

</nav>


  </div>
<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
    



  
    <a class="d-none js-permalink-shortcut" data-hotkey="y" href="/niandeng-ckplayer/chplayer/blob/10314236607da7247d44904635d7f916098c4e12/chplayer/hls/hls.min.js">Permalink</a>

    <!-- blob contrib key: blob_contributors:v21:67eedaad89a3d948cea9d7cb3b3706a1 -->

        <div class="signup-prompt-bg rounded-1">
      <div class="signup-prompt p-4 text-center mb-4 rounded-1">
        <div class="position-relative">
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form action="/site/dismiss_signup_prompt" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="ZBJcy5oe3riB2ac2pCJLTxMJcGjwLwZEaj6QRODs0KBNR1uVrkDeNWpFVQSy69AubyBx+RNoUgrpv3LztcVKzQ==" />
            <button type="submit" class="position-absolute top-0 right-0 btn-link link-gray" data-ga-click="(Logged out) Sign up prompt, clicked Dismiss, text:dismiss">
              Dismiss
            </button>
</form>          <h3 class="pt-2">Join GitHub today</h3>
          <p class="col-6 mx-auto">GitHub is home to over 31 million developers working together to host and review code, manage projects, and build software together.</p>
          <a class="btn btn-primary" href="/join?source=prompt-blob-show" data-ga-click="(Logged out) Sign up prompt, clicked Sign up, text:sign-up">Sign up</a>
        </div>
      </div>
    </div>


    <div class="file-navigation">
      
<details class="details-reset details-overlay select-menu branch-select-menu float-left">
  <summary class="btn btn-sm select-menu-button css-truncate"
           data-hotkey="w"
           
           title="Switch branches or tags">
    <i>Branch:</i>
    <span class="css-truncate-target">master</span>
  </summary>

  <details-menu class="select-menu-modal position-absolute" style="z-index: 99;" src="/niandeng-ckplayer/chplayer/ref-list/master/chplayer/hls/hls.min.js?source_action=show&amp;source_controller=blob" preload>
    <include-fragment class="select-menu-loading-overlay anim-pulse">
      <svg height="32" class="octicon octicon-octoface" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"/></svg>
    </include-fragment>
  </details-menu>
</details>

      <div class="BtnGroup float-right">
        <a href="/niandeng-ckplayer/chplayer/find/master"
              class="js-pjax-capture-input btn btn-sm BtnGroup-item"
              data-pjax
              data-hotkey="t">
          Find file
        </a>
        <clipboard-copy for="blob-path" class="btn btn-sm BtnGroup-item">
          Copy path
        </clipboard-copy>
      </div>
      <div id="blob-path" class="breadcrumb">
        <span class="repo-root js-repo-root"><span class="js-path-segment"><a data-pjax="true" href="/niandeng-ckplayer/chplayer"><span>chplayer</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a data-pjax="true" href="/niandeng-ckplayer/chplayer/tree/master/chplayer"><span>chplayer</span></a></span><span class="separator">/</span><span class="js-path-segment"><a data-pjax="true" href="/niandeng-ckplayer/chplayer/tree/master/chplayer/hls"><span>hls</span></a></span><span class="separator">/</span><strong class="final-path">hls.min.js</strong>
      </div>
    </div>


    <include-fragment src="/niandeng-ckplayer/chplayer/contributors/master/chplayer/hls/hls.min.js" class="commit-tease commit-loader">
      <div>
        Fetching contributors&hellip;
      </div>

      <div class="commit-tease-contributors">
          <img alt="" class="loader-loading float-left" src="https://github.githubassets.com/images/spinners/octocat-spinner-32-EAF2F5.gif" width="16" height="16" />
        <span class="loader-error">Cannot retrieve contributors at this time</span>
      </div>
</include-fragment>



    <div class="file ">
      
<div class="file-header">

  <div class="file-actions">


    <div class="BtnGroup">
      <a id="raw-url" class="btn btn-sm BtnGroup-item" href="/niandeng-ckplayer/chplayer/raw/master/chplayer/hls/hls.min.js">Raw</a>
        <a class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b" href="/niandeng-ckplayer/chplayer/blame/master/chplayer/hls/hls.min.js">Blame</a>
      <a rel="nofollow" class="btn btn-sm BtnGroup-item" href="/niandeng-ckplayer/chplayer/commits/master/chplayer/hls/hls.min.js">History</a>
    </div>



        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw"
          aria-label="You must be signed in to make or propose changes">
          <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
        </button>
        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw"
          aria-label="You must be signed in to make or propose changes">
          <svg class="octicon octicon-trashcan" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"/></svg>
        </button>
  </div>

  <div class="file-info">
      8 lines (7 sloc)
      <span class="file-info-divider"></span>
    215 KB
  </div>
</div>

      

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="LC1" class="blob-code blob-code-inner js-file-line">!function(e){if(&quot;object&quot;==typeof exports&amp;&amp;&quot;undefined&quot;!=typeof module)module.exports=e();else if(&quot;function&quot;==typeof define&amp;&amp;define.amd)define([],e);else{var t;t=&quot;undefined&quot;!=typeof window?window:&quot;undefined&quot;!=typeof global?global:&quot;undefined&quot;!=typeof self?self:this,t.Hls=e()}}(function(){var e;return function e(t,r,i){function a(s,o){if(!r[s]){if(!t[s]){var l=&quot;function&quot;==typeof require&amp;&amp;require;if(!o&amp;&amp;l)return l(s,!0);if(n)return n(s,!0);var u=new Error(&quot;Cannot find module &#39;&quot;+s+&quot;&#39;&quot;);throw u.code=&quot;MODULE_NOT_FOUND&quot;,u}var d=r[s]={exports:{}};t[s][0].call(d.exports,function(e){var r=t[s][1][e];return a(r?r:e)},d,d.exports,e,t,r,i)}return r[s].exports}for(var n=&quot;function&quot;==typeof require&amp;&amp;require,s=0;s&lt;i.length;s++)a(i[s]);return a}({1:[function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return&quot;function&quot;==typeof e}function n(e){return&quot;number&quot;==typeof e}function s(e){return&quot;object&quot;==typeof e&amp;&amp;null!==e}function o(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!n(e)||e&lt;0||isNaN(e))throw TypeError(&quot;n must be a positive number&quot;);return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,n,l,u;if(this._events||(this._events={}),&quot;error&quot;===e&amp;&amp;(!this._events.error||s(this._events.error)&amp;&amp;!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error(&#39;Uncaught, unspecified &quot;error&quot; event. (&#39;+t+&quot;)&quot;);throw d.context=t,d}if(r=this._events[e],o(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),r.apply(this,n)}else if(s(r))for(n=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,l=0;l&lt;i;l++)u[l].apply(this,n);return!0},i.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError(&quot;listener must be a function&quot;);return this._events||(this._events={}),this._events.newListener&amp;&amp;this.emit(&quot;newListener&quot;,e,a(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&amp;&amp;!this._events[e].warned&amp;&amp;(r=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&amp;&amp;r&gt;0&amp;&amp;this._events[e].length&gt;r&amp;&amp;(this._events[e].warned=!0,console.trace),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!a(t))throw TypeError(&quot;listener must be a function&quot;);var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,n,o;if(!a(t))throw TypeError(&quot;listener must be a function&quot;);if(!this._events||!this._events[e])return this;if(r=this._events[e],n=r.length,i=-1,r===t||a(r.listener)&amp;&amp;r.listener===t)delete this._events[e],this._events.removeListener&amp;&amp;this.emit(&quot;removeListener&quot;,e,t);else if(s(r)){for(o=n;o-- &gt;0;)if(r[o]===t||r[o].listener&amp;&amp;r[o].listener===t){i=o;break}if(i&lt;0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&amp;&amp;this.emit(&quot;removeListener&quot;,e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&amp;&amp;delete this._events[e],this;if(0===arguments.length){for(t in this._events)&quot;removeListener&quot;!==t&amp;&amp;this.removeAllListeners(t);return this.removeAllListeners(&quot;removeListener&quot;),this._events={},this}if(r=this._events[e],a(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&amp;&amp;this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(t,r,i){!function(t){var a=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=this.parseURL(e);if(!o)throw new Error(&quot;Error trying to parse base URL.&quot;);return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=this.parseURL(t);if(!a)throw new Error(&quot;Error trying to parse relative URL.&quot;);if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=this.parseURL(e);if(!o)throw new Error(&quot;Error trying to parse base URL.&quot;);if(!o.netLoc&amp;&amp;o.path&amp;&amp;&quot;/&quot;!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=&quot;/&quot;);var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&amp;&amp;(u.netLoc=o.netLoc,&quot;/&quot;!==a.path[0]))if(a.path){var d=o.path,f=d.substring(0,d.lastIndexOf(&quot;/&quot;)+1)+a.path;u.path=s.normalizePath(f)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&amp;&amp;(u.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=a.exec(e);return t?{scheme:t[1]||&quot;&quot;,netLoc:t[2]||&quot;&quot;,path:t[3]||&quot;&quot;,params:t[4]||&quot;&quot;,query:t[5]||&quot;&quot;,fragment:t[6]||&quot;&quot;}:null},normalizePath:function(e){for(e=e.split(&quot;&quot;).reverse().join(&quot;&quot;).replace(/(?:\/|^)\.(?=\/)/g,&quot;&quot;);e.length!==(e=e.replace(/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,&quot;&quot;)).length;);return e.split(&quot;&quot;).reverse().join(&quot;&quot;)},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};&quot;object&quot;==typeof i&amp;&amp;&quot;object&quot;==typeof r?r.exports=s:&quot;function&quot;==typeof e&amp;&amp;e.amd?e([],function(){return s}):&quot;object&quot;==typeof i?i.URLToolkit=s:t.URLToolkit=s}(this)},{}],3:[function(e,t,r){var i=arguments[3],a=arguments[4],n=arguments[5],s=JSON.stringify;t.exports=function(e,t){function r(e){p[e]=!0;for(var t in a[e][1]){var i=a[e][1][t];p[i]||r(i)}}for(var o,l=Object.keys(n),u=0,d=l.length;u&lt;d;u++){var f=l[u],c=n[f].exports;if(c===e||c&amp;&amp;c.default===e){o=f;break}}if(!o){o=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,d=l.length;u&lt;d;u++){var f=l[u];h[f]=f}a[o]=[Function([&quot;require&quot;,&quot;module&quot;,&quot;exports&quot;],&quot;(&quot;+e+&quot;)(self)&quot;),h]}var g=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[o]=o,a[g]=[Function([&quot;require&quot;],&quot;var f = require(&quot;+s(o)+&quot;);(f.default ? f.default : f)(self);&quot;),v];var p={};r(g);var y=&quot;(&quot;+i+&quot;)({&quot;+Object.keys(p).map(function(e){return s(e)+&quot;:[&quot;+a[e][0]+&quot;,&quot;+s(a[e][1])+&quot;]&quot;}).join(&quot;,&quot;)+&quot;},{},[&quot;+s(g)+&quot;])&quot;,m=window.URL||window.webkitURL||window.mozURL||window.msURL,E=new Blob([y],{type:&quot;text/javascript&quot;});if(t&amp;&amp;t.bare)return E;var b=m.createObjectURL(E),T=new Worker(b);return T.objectURL=b,T}},{}],4:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0}),r.hlsDefaultConfig=void 0;var a=e(5),n=i(a),s=e(8),o=i(s),l=e(9),u=i(l),d=e(10),f=i(d),c=e(55),h=i(c),g=e(7),v=i(g),p=e(6),y=i(p),m=e(47),E=i(m),b=e(15),T=i(b),_=e(14),k=i(_),R=e(13),A=i(R);r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:h.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:n.default,bufferController:o.default,capLevelController:u.default,fpsController:f.default,audioStreamController:y.default,audioTrackController:v.default,subtitleStreamController:A.default,subtitleTrackController:k.default,timelineController:T.default,cueHandler:E.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:&quot;English&quot;,captionsTextTrack1LanguageCode:&quot;en&quot;,captionsTextTrack2Label:&quot;Spanish&quot;,captionsTextTrack2LanguageCode:&quot;es&quot;,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,13:13,14:14,15:15,47:47,5:5,55:55,6:6,7:7,8:8,9:9}],5:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(34),h=i(c),g=e(30),v=e(50),p=e(48),y=i(p),m=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.onCheck=r._abandonRulesCheck.bind(r),r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){this.clearTimer(),f.default.prototype.destroy.call(this)}},{key:&quot;onFragLoading&quot;,value:function(e){var t=e.frag;if(&quot;main&quot;===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,i=e.frag.level,a=r.levels[i].details.live,n=r.config,s=void 0,o=void 0;a?(s=n.abrEwmaFastLive,o=n.abrEwmaSlowLive):(s=n.abrEwmaFastVoD,o=n.abrEwmaSlowVoD),this._bwEstimator=new y.default(r,o,s,n.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:&quot;_abandonRulesCheck&quot;,value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,i=r.loader,a=e.minAutoLevel;if(!i||i.stats&amp;&amp;i.stats.aborted)return v.logger.warn(&quot;frag loader destroy or aborted, disarm abandonRules&quot;),void this.clearTimer();var n=i.stats;if(t&amp;&amp;(!t.paused&amp;&amp;0!==t.playbackRate||!t.readyState)&amp;&amp;r.autoLevel&amp;&amp;r.level){var s=performance.now()-n.trequest,o=Math.abs(t.playbackRate);if(s&gt;500*r.duration/o){var l=e.levels,d=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/s),f=l[r.level],c=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,g=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*c/8)),p=t.currentTime,y=(g-n.loaded)/d,m=(h.default.bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(m&lt;2*r.duration/o&amp;&amp;y&gt;m){var E=void 0,b=void 0;for(b=r.level-1;b&gt;a;b--){var T=l[b].realBitrate?Math.max(l[b].realBitrate,l[b].bitrate):l[b].bitrate;if((E=r.duration*T/(6.4*d))&lt;m)break}E&lt;y&amp;&amp;(v.logger.warn(&quot;loading too slow, abort fragment loading and switch to level &quot;+b+&quot;:fragLoadedDelay[&quot;+b+&quot;]&lt;fragLoadedDelay[&quot;+(r.level-1)+&quot;];bufferStarvationDelay:&quot;+E.toFixed(1)+&quot;&lt;&quot;+y.toFixed(1)+&quot;:&quot;+m.toFixed(1)),e.nextLoadLevel=b,this._bwEstimator.sample(s,n.loaded),i.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},{key:&quot;onFragLoaded&quot;,value:function(e){var t=e.frag;if(&quot;main&quot;===t.type&amp;&amp;!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],i=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,a=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:i,duration:a},r.realBitrate=Math.round(8*i/a)}if(e.frag.bitrateTest){var n=e.stats;n.tparsed=n.tbuffered=n.tload,this.onFragBuffered(e)}}}},{key:&quot;onFragBuffered&quot;,value:function(e){var t=e.stats,r=e.frag;if(!(t.aborted===!0||1!==r.loadCounter||&quot;main&quot;!==r.type||isNaN(r.sn)||r.bitrateTest&amp;&amp;t.tload!==t.tbuffered)){var i=t.tparsed-t.trequest;v.logger.log(&quot;latency/loading/parsing/append/kbps:&quot;+Math.round(t.tfirst-t.trequest)+&quot;/&quot;+Math.round(t.tload-t.tfirst)+&quot;/&quot;+Math.round(t.tparsed-t.tload)+&quot;/&quot;+Math.round(t.tbuffered-t.tparsed)+&quot;/&quot;+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}}},{key:&quot;onError&quot;,value:function(e){switch(e.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:&quot;clearTimer&quot;,value:function(){this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null)}},{key:&quot;_findBestLevel&quot;,value:function(e,t,r,i,a,n,s,o,l){for(var u=a;u&gt;=i;u--){var d=l[u],f=d.details,c=f?f.totalduration/f.fragments.length:t,h=!!f&amp;&amp;f.live,g=void 0;g=u&lt;=e?s*r:o*r;var p=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,y=p*c/g;if(v.logger.trace(&quot;level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: &quot;+u+&quot;/&quot;+Math.round(g)+&quot;/&quot;+p+&quot;/&quot;+c+&quot;/&quot;+n+&quot;/&quot;+y),g&gt;p&amp;&amp;(!y||h||y&lt;n))return u}return-1}},{key:&quot;nextAutoLevel&quot;,get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(e===-1||t&amp;&amp;t.canEstimate()))return e;var r=this._nextABRAutoLevel;return e!==-1&amp;&amp;(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:&quot;_nextABRAutoLevel&quot;,get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,i=e.config,a=e.minAutoLevel,n=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,u=n&amp;&amp;0!==n.playbackRate?Math.abs(n.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,f=(h.default.bufferInfo(n,l,i.maxBufferHole).end-l)/u,c=this._findBestLevel(s,o,d,a,t,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(c&gt;=0)return c;v.logger.trace(&quot;rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering&quot;);var g=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,y=i.abrBandWidthUpFactor;if(0===f){var m=this.bitrateTestDelay;if(m){g=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-m,v.logger.trace(&quot;bitrate test took &quot;+Math.round(1e3*m)+&quot;ms, set first fragment max fetchDuration to &quot;+Math.round(1e3*g)+&quot; ms&quot;),p=y=1}}return c=this._findBestLevel(s,o,d,a,t,f+g,p,y,r),Math.max(c,0)}}]),t}(f.default);r.default=m},{30:30,31:31,32:32,34:34,48:48,50:50}],6:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(45),u=i(l),d=e(34),f=i(d),c=e(24),h=i(c),g=e(32),v=i(g),p=e(31),y=i(p),m=e(35),E=i(m),b=e(51),T=i(b),_=e(30),k=e(50),R={STOPPED:&quot;STOPPED&quot;,STARTING:&quot;STARTING&quot;,IDLE:&quot;IDLE&quot;,PAUSED:&quot;PAUSED&quot;,KEY_LOADING:&quot;KEY_LOADING&quot;,FRAG_LOADING:&quot;FRAG_LOADING&quot;,FRAG_LOADING_WAITING_RETRY:&quot;FRAG_LOADING_WAITING_RETRY&quot;,WAITING_TRACK:&quot;WAITING_TRACK&quot;,PARSING:&quot;PARSING&quot;,PARSED:&quot;PARSED&quot;,BUFFER_FLUSHING:&quot;BUFFER_FLUSHING&quot;,ENDED:&quot;ENDED&quot;,ERROR:&quot;ERROR&quot;,WAITING_INIT_PTS:&quot;WAITING_INIT_PTS&quot;},A=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.AUDIO_TRACKS_UPDATED,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED,v.default.INIT_PTS_FOUND));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=R.STOPPED,r.ontick=r.tick.bind(r),r.initPTS=[],r.waitingFragment=null,r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){this.stopLoad(),this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null),y.default.prototype.destroy.call(this),this.state=R.STOPPED}},{key:&quot;onInitPtsFound&quot;,value:function(e){var t=e.id,r=e.frag.cc,i=e.initPTS;&quot;main&quot;===t&amp;&amp;(this.initPTS[r]=i,k.logger.log(&quot;InitPTS for cc:&quot;+r+&quot; found from video track:&quot;+i),this.state===R.WAITING_INIT_PTS&amp;&amp;(k.logger.log(&quot;sending pending audio frag to demuxer&quot;),this.state=R.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:&quot;startLoad&quot;,value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t&gt;0&amp;&amp;e===-1?(k.logger.log(&quot;audio:override startPosition with lastCurrentTime @&quot;+t.toFixed(3)),this.state=R.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=R.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=R.STOPPED}},{key:&quot;stopLoad&quot;,value:function(){var e=this.fragCurrent;e&amp;&amp;(e.loader&amp;&amp;e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&amp;&amp;(this.demuxer.destroy(),this.demuxer=null),this.state=R.STOPPED}},{key:&quot;tick&quot;,value:function(){1===++this.ticks&amp;&amp;(this.doTick(),this.ticks&gt;1&amp;&amp;setTimeout(this.tick,1),this.ticks=0)}},{key:&quot;doTick&quot;,value:function(){var e,t,r,i=this.hls,a=i.config;switch(this.state){case R.ERROR:case R.PAUSED:case R.BUFFER_FLUSHING:break;case R.STARTING:this.state=R.WAITING_TRACK,this.loadedmetadata=!1;break;case R.IDLE:var n=this.tracks;if(!n)break;if(!this.media&amp;&amp;(this.startFragRequested||!a.startFragPrefetch))break;e=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=f.default.bufferInfo(s,e,a.maxBufferHole),l=o.len,d=o.end,c=this.fragPrevious,h=a.maxMaxBufferLength,g=this.audioSwitch,p=this.trackId;if((l&lt;h||g)&amp;&amp;p&lt;n.length){if(void 0===(r=n[p].details)){this.state=R.WAITING_TRACK;break}if(!g&amp;&amp;!r.live&amp;&amp;c&amp;&amp;c.sn===r.endSN&amp;&amp;(!this.media.seeking||this.media.duration-d&lt;c.duration/2)){this.hls.trigger(v.default.BUFFER_EOS,{type:&quot;audio&quot;}),this.state=R.ENDED;break}var y=r.fragments,m=y.length,E=y[0].start,b=y[m-1].start+y[m-1].duration,T=void 0;if(g)if(r.live&amp;&amp;!r.PTSKnown)k.logger.log(&quot;switching audiotrack, live stream, unknown PTS,load first fragment&quot;),d=0;else if(d=e,r.PTSKnown&amp;&amp;e&lt;E){if(!(o.end&gt;E||o.nextStart))return;k.logger.log(&quot;alt audio track ahead of main track, seek to start of alt audio track&quot;),this.media.currentTime=E+.05}if(r.initSegment&amp;&amp;!r.initSegment.data)T=r.initSegment;else if(d&lt;=E){if(T=y[0],r.live&amp;&amp;T.loadIdx&amp;&amp;T.loadIdx===this.fragLoadIdx){var A=o.nextStart?o.nextStart:E;return k.logger.log(&quot;no alt audio available @currentTime:&quot;+this.media.currentTime+&quot;, seeking @&quot;+(A+.05)),void(this.media.currentTime=A+.05)}}else{var S=void 0,L=a.maxFragLookUpTolerance,w=c?y[c.sn-y[0].sn+1]:void 0,D=function(e){var t=Math.min(L,e.duration);return e.start+e.duration-t&lt;=d?1:e.start-t&gt;d&amp;&amp;e.start?-1:0};d&lt;b?(d&gt;b-L&amp;&amp;(L=0),S=w&amp;&amp;!D(w)?w:u.default.search(y,D)):S=y[m-1],S&amp;&amp;(T=S,E=S.start,c&amp;&amp;T.level===c.level&amp;&amp;T.sn===c.sn&amp;&amp;(T.sn&lt;r.endSN?(T=y[T.sn+1-r.startSN],k.logger.log(&quot;SN just loaded, load next one: &quot;+T.sn)):T=null))}if(T)if(T.decryptdata&amp;&amp;null!=T.decryptdata.uri&amp;&amp;null==T.decryptdata.key)k.logger.log(&quot;Loading key for &quot;+T.sn+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],track &quot;+p),this.state=R.KEY_LOADING,i.trigger(v.default.KEY_LOADING,{frag:T});else{if(k.logger.log(&quot;Loading &quot;+T.sn+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],track &quot;+p+&quot;, currentTime:&quot;+e+&quot;,bufferEnd:&quot;+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,T.loadCounter){T.loadCounter++;var O=a.fragLoadingLoopThreshold;if(T.loadCounter&gt;O&amp;&amp;Math.abs(this.fragLoadIdx-T.loadIdx)&lt;O)return void i.trigger(v.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:T})}else T.loadCounter=1;T.loadIdx=this.fragLoadIdx,this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),i.trigger(v.default.FRAG_LOADING,{frag:T}),this.state=R.FRAG_LOADING}}break;case R.WAITING_TRACK:t=this.tracks[this.trackId],t&amp;&amp;t.details&amp;&amp;(this.state=R.IDLE);break;case R.FRAG_LOADING_WAITING_RETRY:var I=performance.now(),P=this.retryDate;s=this.media;var C=s&amp;&amp;s.seeking;(!P||I&gt;=P||C)&amp;&amp;(k.logger.log(&quot;audioStreamController: retryDate reached, switch back to IDLE state&quot;),this.state=R.IDLE);break;case R.WAITING_INIT_PTS:case R.STOPPED:case R.FRAG_LOADING:case R.PARSING:case R.PARSED:case R.ENDED:}}},{key:&quot;onMediaAttached&quot;,value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener(&quot;seeking&quot;,this.onvseeking),t.addEventListener(&quot;ended&quot;,this.onvended);var r=this.config;this.tracks&amp;&amp;r.autoStartLoad&amp;&amp;this.startLoad(r.startPosition)}},{key:&quot;onMediaDetaching&quot;,value:function(){var e=this.media;e&amp;&amp;e.ended&amp;&amp;(k.logger.log(&quot;MSE detaching and video ended, reset startPosition&quot;),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&amp;&amp;t.forEach(function(e){e.details&amp;&amp;e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&amp;&amp;(e.removeEventListener(&quot;seeking&quot;,this.onvseeking),e.removeEventListener(&quot;ended&quot;,this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:&quot;onMediaSeeking&quot;,value:function(){this.state===R.ENDED&amp;&amp;(this.state=R.IDLE),this.media&amp;&amp;(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&amp;&amp;(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:&quot;onMediaEnded&quot;,value:function(){this.startPosition=this.lastCurrentTime=0}},{key:&quot;onAudioTracksUpdated&quot;,value:function(e){k.logger.log(&quot;audio tracks updated&quot;),this.tracks=e.audioTracks}},{key:&quot;onAudioTrackSwitching&quot;,value:function(e){var t=!!e.url;this.trackId=e.id,this.state=R.IDLE,this.fragCurrent=null,this.state=R.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&amp;&amp;(this.demuxer.destroy(),this.demuxer=null),t&amp;&amp;(this.audioSwitch=!0,this.state=R.IDLE,void 0!==this.fragLoadIdx&amp;&amp;(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:&quot;onAudioTrackLoaded&quot;,value:function(e){var t=e.details,r=e.id,i=this.tracks[r],a=t.totalduration,n=0;if(k.logger.log(&quot;track &quot;+r+&quot; loaded [&quot;+t.startSN+&quot;,&quot;+t.endSN+&quot;],duration:&quot;+a),t.live){var s=i.details;s&amp;&amp;t.fragments.length&gt;0?(E.default.mergeDetails(s,t),n=t.fragments[0].start,t.PTSKnown?k.logger.log(&quot;live audio playlist sliding:&quot;+n.toFixed(3)):k.logger.log(&quot;live audio playlist - outdated PTS, unknown sliding&quot;)):(t.PTSKnown=!1,k.logger.log(&quot;live audio playlist - first load, unknown sliding&quot;))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(this.startPosition===-1){var o=t.startTimeOffset;isNaN(o)?this.startPosition=0:(k.logger.log(&quot;start time offset found in playlist, adjust startPosition to &quot;+o),this.startPosition=o)}this.nextLoadPosition=this.startPosition}this.state===R.WAITING_TRACK&amp;&amp;(this.state=R.IDLE),this.tick()}},{key:&quot;onKeyLoaded&quot;,value:function(){this.state===R.KEY_LOADING&amp;&amp;(this.state=R.IDLE,this.tick())}},{key:&quot;onFragLoaded&quot;,value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===R.FRAG_LOADING&amp;&amp;t&amp;&amp;&quot;audio&quot;===r.type&amp;&amp;r.level===t.level&amp;&amp;r.sn===t.sn){var i=this.tracks[this.trackId],a=i.details,n=a.totalduration,s=t.level,o=t.sn,l=t.cc,u=this.config.defaultAudioCodec||i.audioCodec||&quot;mp4a.40.2&quot;,d=this.stats=e.stats;if(&quot;initSegment&quot;===o)this.state=R.IDLE,d.tparsed=d.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(v.default.FRAG_BUFFERED,{stats:d,frag:t,id:&quot;audio&quot;}),this.tick();else{this.state=R.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new h.default(this.hls,&quot;audio&quot;));var f=this.initPTS[l],c=a.initSegment?a.initSegment.data:[];if(c||void 0!==f){this.pendingBuffering=!0,k.logger.log(&quot;Demuxing &quot;+o+&quot; of [&quot;+a.startSN+&quot; ,&quot;+a.endSN+&quot;],track &quot;+s);this.demuxer.push(e.payload,c,u,null,t,n,!1,f)}else k.logger.log(&quot;unknown video PTS for continuity counter &quot;+l+&quot;, waiting for video PTS before demuxing audio frag &quot;+o+&quot; of [&quot;+a.startSN+&quot; ,&quot;+a.endSN+&quot;],track &quot;+s),this.waitingFragment=e,this.state=R.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:&quot;onFragParsingInitSegment&quot;,value:function(e){var t=this.fragCurrent,r=e.frag;if(t&amp;&amp;&quot;audio&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===R.PARSING){var i=e.tracks,a=void 0;if(i.video&amp;&amp;delete i.video,a=i.audio){a.levelCodec=&quot;mp4a.40.2&quot;,a.id=e.id,this.hls.trigger(v.default.BUFFER_CODECS,i),k.logger.log(&quot;audio track:audio,container:&quot;+a.container+&quot;,codecs[level/parsed]=[&quot;+a.levelCodec+&quot;/&quot;+a.codec+&quot;]&quot;);var n=a.initSegment;if(n){var s={type:&quot;audio&quot;,data:n,parent:&quot;audio&quot;,content:&quot;initSegment&quot;};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,s))}this.tick()}}}},{key:&quot;onFragParsingData&quot;,value:function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&amp;&amp;&quot;audio&quot;===e.id&amp;&amp;&quot;audio&quot;===e.type&amp;&amp;i.sn===r.sn&amp;&amp;i.level===r.level&amp;&amp;this.state===R.PARSING){var a=this.trackId,n=this.tracks[a],s=this.hls;isNaN(e.endPTS)&amp;&amp;(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),k.logger.log(&quot;parsed &quot;+e.type+&quot;,PTS:[&quot;+e.startPTS.toFixed(3)+&quot;,&quot;+e.endPTS.toFixed(3)+&quot;],DTS:[&quot;+e.startDTS.toFixed(3)+&quot;/&quot;+e.endDTS.toFixed(3)+&quot;],nb:&quot;+e.nb),E.default.updateFragPTSDTS(n.details,r.sn,e.startPTS,e.endPTS);var o=this.audioSwitch,l=this.media,u=!1;if(o&amp;&amp;l)if(l.readyState){var d=l.currentTime;k.logger.log(&quot;switching audio track : currentTime:&quot;+d),d&gt;=e.startPTS&amp;&amp;(k.logger.log(&quot;switching audio track : flushing all audio&quot;),this.state=R.BUFFER_FLUSHING,s.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:&quot;audio&quot;}),u=!0,this.audioSwitch=!1,s.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,s.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:a});var f=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&amp;&amp;t.length&amp;&amp;f.push({type:e.type,data:t,parent:&quot;audio&quot;,content:&quot;data&quot;})}),!u&amp;&amp;f.length&amp;&amp;(f.forEach(function(e){t.state===R.PARSING&amp;&amp;(t.pendingBuffering=!0,t.hls.trigger(v.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}}},{key:&quot;onFragParsed&quot;,value:function(e){var t=this.fragCurrent,r=e.frag;t&amp;&amp;&quot;audio&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===R.PARSING&amp;&amp;(this.stats.tparsed=performance.now(),this.state=R.PARSED,this._checkAppendedParsed())}},{key:&quot;onBufferCreated&quot;,value:function(e){var t=e.tracks.audio;t&amp;&amp;(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:&quot;onBufferAppended&quot;,value:function(e){if(&quot;audio&quot;===e.parent){var t=this.state;t!==R.PARSING&amp;&amp;t!==R.PARSED||(this.pendingBuffering=e.pending&gt;0,this._checkAppendedParsed())}}},{key:&quot;_checkAppendedParsed&quot;,value:function(){if(!(this.state!==R.PARSED||this.appended&amp;&amp;this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),r.trigger(v.default.FRAG_BUFFERED,{stats:t,frag:e,id:&quot;audio&quot;});var i=this.mediaBuffer?this.mediaBuffer:this.media;k.logger.log(&quot;audio buffered : &quot;+T.default.toString(i.buffered)),this.audioSwitch&amp;&amp;this.appended&amp;&amp;(this.audioSwitch=!1,r.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=R.IDLE}this.tick()}}},{key:&quot;onError&quot;,value:function(e){var t=e.frag;if(!t||&quot;audio&quot;===t.type)switch(e.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r&lt;=i.fragLoadingMaxRetry){this.fragLoadError=r,t.loadCounter=0;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);k.logger.warn(&quot;audioStreamController: frag loading failed, retry in &quot;+a+&quot; ms&quot;),this.retryDate=performance.now()+a,this.state=R.FRAG_LOADING_WAITING_RETRY}else k.logger.error(&quot;audioStreamController: &quot;+e.details+&quot; reaches max retry, redispatch as fatal ...&quot;),e.fatal=!0,this.state=R.ERROR}break;case _.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case _.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case _.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==R.ERROR&amp;&amp;(this.state=e.fatal?R.ERROR:R.IDLE,k.logger.warn(&quot;audioStreamController: &quot;+e.details+&quot; while loading frag,switch to &quot;+this.state+&quot; state ...&quot;));break;case _.ErrorDetails.BUFFER_FULL_ERROR:if(&quot;audio&quot;===e.parent&amp;&amp;(this.state===R.PARSING||this.state===R.PARSED)){var n=this.mediaBuffer,s=this.media.currentTime;if(n&amp;&amp;f.default.isBuffered(n,s)&amp;&amp;f.default.isBuffered(n,s+.5)){var o=this.config;o.maxMaxBufferLength&gt;=o.maxBufferLength&amp;&amp;(o.maxMaxBufferLength/=2,k.logger.warn(&quot;audio:reduce max buffer length to &quot;+o.maxMaxBufferLength+&quot;s&quot;),this.fragLoadIdx+=2*o.fragLoadingLoopThreshold),this.state=R.IDLE}else k.logger.warn(&quot;buffer full error also media.currentTime is not buffered, flush audio buffer&quot;),this.fragCurrent=null,this.state=R.BUFFER_FLUSHING,this.hls.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:&quot;audio&quot;})}}}},{key:&quot;onBufferFlushed&quot;,value:function(){var e=this,t=this.pendingData;t&amp;&amp;t.length?(k.logger.log(&quot;appending pending audio data on Buffer Flushed&quot;),t.forEach(function(t){e.hls.trigger(v.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=R.PARSED):(this.state=R.IDLE,this.fragPrevious=null,this.tick())}},{key:&quot;state&quot;,set:function(e){if(this.state!==e){var t=this.state;this._state=e,k.logger.log(&quot;audio stream:&quot;+t+&quot;-&gt;&quot;+e)}},get:function(){return this._state}}]),t}(y.default);r.default=A},{24:24,30:30,31:31,32:32,34:34,35:35,45:45,50:50,51:51}],7:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(50),h=function(e){function t(e){</td>
      </tr>
      <tr>
        <td id="L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="LC2" class="blob-code blob-code-inner js-file-line">a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.AUDIO_TRACK_LOADED));return r.ticks=0,r.ontick=r.tick.bind(r),r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){f.default.prototype.destroy.call(this)}},{key:&quot;tick&quot;,value:function(){1===++this.ticks&amp;&amp;(this.doTick(),this.ticks&gt;1&amp;&amp;setTimeout(this.tick,1),this.ticks=0)}},{key:&quot;doTick&quot;,value:function(){this.updateTrack(this.trackId)}},{key:&quot;onManifestLoading&quot;,value:function(){this.tracks=[],this.trackId=-1}},{key:&quot;onManifestLoaded&quot;,value:function(e){var t=this,r=e.audioTracks||[],i=!1;this.tracks=r,this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:r});var a=0;r.forEach(function(e){if(e.default)return t.audioTrack=a,void(i=!0);a++}),i===!1&amp;&amp;r.length&amp;&amp;(c.logger.log(&quot;no default audio track defined, use first audio track as default&quot;),this.audioTrack=0)}},{key:&quot;onAudioTrackLoaded&quot;,value:function(e){e.id&lt;this.tracks.length&amp;&amp;(c.logger.log(&quot;audioTrack &quot;+e.id+&quot; loaded&quot;),this.tracks[e.id].details=e.details,e.details.live&amp;&amp;!this.timer&amp;&amp;(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&amp;&amp;this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null))}},{key:&quot;setAudioTrackInternal&quot;,value:function(e){if(e&gt;=0&amp;&amp;e&lt;this.tracks.length){this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null),this.trackId=e,c.logger.log(&quot;switching to audioTrack &quot;+e);var t=this.tracks[e],r=this.hls,i=t.type,a=t.url,n={id:e,type:i,url:a};r.trigger(u.default.AUDIO_TRACK_SWITCH,n),r.trigger(u.default.AUDIO_TRACK_SWITCHING,n);var s=t.details;!a||void 0!==s&amp;&amp;s.live!==!0||(c.logger.log(&quot;(re)loading playlist for audioTrack &quot;+e),r.trigger(u.default.AUDIO_TRACK_LOADING,{url:a,id:e}))}}},{key:&quot;updateTrack&quot;,value:function(e){if(e&gt;=0&amp;&amp;e&lt;this.tracks.length){this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null),this.trackId=e,c.logger.log(&quot;updating audioTrack &quot;+e);var t=this.tracks[e],r=t.url,i=t.details;!r||void 0!==i&amp;&amp;i.live!==!0||(c.logger.log(&quot;(re)loading playlist for audioTrack &quot;+e),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:&quot;audioTracks&quot;,get:function(){return this.tracks}},{key:&quot;audioTrack&quot;,get:function(){return this.trackId},set:function(e){this.trackId===e&amp;&amp;void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(f.default);r.default=h},{31:31,32:32,50:50}],8:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(50),h=e(30),g=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){f.default.prototype.destroy.call(this)}},{key:&quot;onLevelPtsUpdated&quot;,value:function(e){var t=e.type,r=this.tracks.audio;if(&quot;audio&quot;===t&amp;&amp;r&amp;&amp;&quot;audio/mpeg&quot;===r.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-e.start)&gt;.1){var a=i.updating;try{i.abort()}catch(e){a=!0,c.logger.warn(&quot;can not abort audio buffer: &quot;+e)}a?this.audioTimestampOffset=e.start:(c.logger.warn(&quot;change mpeg audio timestamp offset from &quot;+i.timestampOffset+&quot; to &quot;+e.start),i.timestampOffset=e.start)}}}},{key:&quot;onManifestParsed&quot;,value:function(e){var t=e.audio,r=e.video,i=0;e.altAudio&amp;&amp;(t||r)&amp;&amp;(i=(t?1:0)+(r?1:0),c.logger.log(i+&quot; sourceBuffer(s) expected&quot;)),this.sourceBufferNb=i}},{key:&quot;onMediaAttaching&quot;,value:function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener(&quot;sourceopen&quot;,this.onmso),r.addEventListener(&quot;sourceended&quot;,this.onmse),r.addEventListener(&quot;sourceclose&quot;,this.onmsc),t.src=URL.createObjectURL(r)}}},{key:&quot;onMediaDetaching&quot;,value:function(){c.logger.log(&quot;media source detaching&quot;);var e=this.mediaSource;if(e){if(&quot;open&quot;===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn(&quot;onMediaDetaching:&quot;+e.message+&quot; while calling endOfStream&quot;)}e.removeEventListener(&quot;sourceopen&quot;,this.onmso),e.removeEventListener(&quot;sourceended&quot;,this.onmse),e.removeEventListener(&quot;sourceclose&quot;,this.onmsc),this.media&amp;&amp;(URL.revokeObjectURL(this.media.src),this.media.removeAttribute(&quot;src&quot;),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(u.default.MEDIA_DETACHED)}},{key:&quot;onMediaSourceOpen&quot;,value:function(){c.logger.log(&quot;media source opened&quot;),this.hls.trigger(u.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&amp;&amp;e.removeEventListener(&quot;sourceopen&quot;,this.onmso),this.checkPendingTracks()}},{key:&quot;checkPendingTracks&quot;,value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&amp;&amp;(this.sourceBufferNb&lt;=t||0===this.sourceBufferNb)&amp;&amp;(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:&quot;onMediaSourceClose&quot;,value:function(){c.logger.log(&quot;media source closed&quot;)}},{key:&quot;onMediaSourceEnded&quot;,value:function(){c.logger.log(&quot;media source ended&quot;)}},{key:&quot;onSBUpdateEnd&quot;,value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;c.logger.warn(&quot;change mpeg audio timestamp offset from &quot;+e.timestampOffset+&quot; to &quot;+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&amp;&amp;this.doFlush(),this._needsEos&amp;&amp;this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0);this.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:&quot;onSBUpdateError&quot;,value:function(e){c.logger.error(&quot;sourceBuffer error:&quot;,e),this.hls.trigger(u.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:&quot;onBufferReset&quot;,value:function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener(&quot;updateend&quot;,this.onsbue),r.removeEventListener(&quot;error&quot;,this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:&quot;onBufferCodecs&quot;,value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&amp;&amp;&quot;open&quot;===r.readyState&amp;&amp;this.checkPendingTracks()}}},{key:&quot;createSourceBuffers&quot;,value:function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var i in e)if(!t[i]){var a=e[i],n=a.levelCodec||a.codec,s=a.container+&quot;;codecs=&quot;+n;c.logger.log(&quot;creating sourceBuffer(&quot;+s+&quot;)&quot;);try{var o=t[i]=r.addSourceBuffer(s);o.addEventListener(&quot;updateend&quot;,this.onsbue),o.addEventListener(&quot;error&quot;,this.onsbe),this.tracks[i]={codec:n,container:a.container},a.buffer=o}catch(e){c.logger.error(&quot;error while trying to add sourceBuffer:&quot;+e.message),this.hls.trigger(u.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:s})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:e})}},{key:&quot;onBufferAppending&quot;,value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:&quot;onBufferAppendFail&quot;,value:function(e){c.logger.error(&quot;sourceBuffer error:&quot;,e.event),this.hls.trigger(u.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:&quot;onBufferEos&quot;,value:function(e){var t=this.sourceBuffer,r=e.type;for(var i in t)r&amp;&amp;i!==r||t[i].ended||(t[i].ended=!0,c.logger.log(i+&quot; sourceBuffer now EOS&quot;));this.checkEos()}},{key:&quot;checkEos&quot;,value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||&quot;open&quot;!==t.readyState)return void(this._needsEos=!1);for(var r in e){var i=e[r];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}c.logger.log(&quot;all media data available, signal endOfStream() to MediaSource and stop loading fragment&quot;);try{t.endOfStream()}catch(e){c.logger.warn(&quot;exception while calling mediaSource.endOfStream()&quot;)}this._needsEos=!1}},{key:&quot;onBufferFlushing&quot;,value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:&quot;onLevelUpdated&quot;,value:function(e){var t=e.details;0!==t.fragments.length&amp;&amp;(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:&quot;updateMediaElementDuration&quot;,value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,i=this._levelDuration;if(null!==i&amp;&amp;e&amp;&amp;t&amp;&amp;r&amp;&amp;0!==e.readyState&amp;&amp;&quot;open&quot;===t.readyState){for(var a in r)if(r[a].updating)return;null===this._msDuration&amp;&amp;(this._msDuration=t.duration);var n=e.duration;(i&gt;this._msDuration&amp;&amp;i&gt;n||n===1/0||isNaN(n))&amp;&amp;(c.logger.log(&quot;Updating mediasource duration to &quot;+i.toFixed(3)),this._msDuration=t.duration=i)}}},{key:&quot;doFlush&quot;,value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var i in r)t+=r[i].buffered.length}catch(e){c.logger.error(&quot;error while accessing sourceBuffer.buffered&quot;)}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}}},{key:&quot;doAppending&quot;,value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void c.logger.error(&quot;trying to append although a media error occured, flush segment and abort&quot;);if(this.appending)return;if(r&amp;&amp;r.length){var i=r.shift();try{var a=i.type,n=t[a];n?n.updating?r.unshift(i):(n.ended=!1,this.parent=i.parent,n.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){c.logger.error(&quot;error while trying to append buffer:&quot;+t.message),r.unshift(i);var s={type:h.ErrorTypes.MEDIA_ERROR,parent:i.parent};if(22===t.code)return this.segments=[],s.details=h.ErrorDetails.BUFFER_FULL_ERROR,s.fatal=!1,void e.trigger(u.default.ERROR,s);if(this.appendError?this.appendError++:this.appendError=1,s.details=h.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError&gt;e.config.appendErrorMaxRetry)return c.logger.log(&quot;fail &quot;+e.config.appendErrorMaxRetry+&quot; times to append segment in sourceBuffer&quot;),r=[],s.fatal=!0,void e.trigger(u.default.ERROR,s);s.fatal=!1,e.trigger(u.default.ERROR,s)}}}}},{key:&quot;flushBuffer&quot;,value:function(e,t,r){var i,a,n,s,o,l,u=this.sourceBuffer;if(Object.keys(u).length){if(c.logger.log(&quot;flushBuffer,pos/start/end: &quot;+this.media.currentTime.toFixed(3)+&quot;/&quot;+e+&quot;/&quot;+t),this.flushBufferCounter&lt;this.appended){for(var d in u)if(!r||d===r){if(i=u[d],i.ended=!1,i.updating)return c.logger.warn(&quot;cannot flush, sb updating in progress&quot;),!1;try{for(a=0;a&lt;i.buffered.length;a++)if(n=i.buffered.start(a),s=i.buffered.end(a),navigator.userAgent.toLowerCase().indexOf(&quot;firefox&quot;)!==-1&amp;&amp;t===Number.POSITIVE_INFINITY?(o=e,l=t):(o=Math.max(n,e),l=Math.min(s,t)),Math.min(l,s)-o&gt;.5)return this.flushBufferCounter++,c.logger.log(&quot;flush &quot;+d+&quot; [&quot;+o+&quot;,&quot;+l+&quot;], of [&quot;+n+&quot;,&quot;+s+&quot;], pos:&quot;+this.media.currentTime),i.remove(o,l),!1}catch(e){c.logger.warn(&quot;exception while accessing sourcebuffer, it might have been removed from MediaSource&quot;)}}}else c.logger.warn(&quot;abort flushing too many retries&quot;);c.logger.log(&quot;buffer flushed&quot;)}return!0}}]),t}(f.default);r.default=g},{30:30,31:31,32:32,50:50}],9:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED))}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){this.hls.config.capLevelToPlayerSize&amp;&amp;(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&amp;&amp;(this.timer=clearInterval(this.timer)))}},{key:&quot;onFpsDropLevelCapping&quot;,value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:&quot;onMediaAttaching&quot;,value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:&quot;onManifestParsed&quot;,value:function(e){var t=this.hls;t.config.capLevelToPlayerSize&amp;&amp;(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:&quot;detectPlayerSize&quot;,value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping&gt;this.autoLevelCapping&amp;&amp;t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:&quot;getMaxLevel&quot;,value:function(e){var t=0,r=void 0,i=void 0,a=this.mediaWidth,n=this.mediaHeight,s=0,o=0;for(r=0;r&lt;=e&amp;&amp;(i=this.levels[r],!this.isLevelRestricted(r))&amp;&amp;(t=r,s=i.width,o=i.height,!(a&lt;=s||n&lt;=o));r++);return t}},{key:&quot;isLevelRestricted&quot;,value:function(e){return!(!this.restrictedLevels||this.restrictedLevels.indexOf(e)===-1)}},{key:&quot;contentScaleFactor&quot;,get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}},{key:&quot;mediaWidth&quot;,get:function(){var e=void 0,t=this.media;return t&amp;&amp;(e=t.width||t.clientWidth||t.offsetWidth,e*=this.contentScaleFactor),e}},{key:&quot;mediaHeight&quot;,get:function(){var e=void 0,t=this.media;return t&amp;&amp;(e=t.height||t.clientHeight||t.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(f.default);r.default=c},{31:31,32:32}],10:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(50),h=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MEDIA_ATTACHING))}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){this.timer&amp;&amp;clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:&quot;onMediaAttaching&quot;,value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){&quot;function&quot;==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&amp;&amp;(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:&quot;checkFPS&quot;,value:function(e,t,r){var i=performance.now();if(t){if(this.lastTime){var a=i-this.lastTime,n=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*n/a,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:n,currentDecoded:s,totalDroppedFrames:r}),o&gt;0&amp;&amp;n&gt;l.config.fpsDroppedMonitoringThreshold*s){var d=l.currentLevel;c.logger.warn(&quot;drop FPS ratio greater than max allowed value for currentLevel: &quot;+d),d&gt;0&amp;&amp;(l.autoLevelCapping===-1||l.autoLevelCapping&gt;=d)&amp;&amp;(d-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}},{key:&quot;checkFPSInterval&quot;,value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(f.default);r.default=h},{31:31,32:32,50:50}],11:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(50),h=e(30),g=e(34),v=i(g),p=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.FRAG_LOADED,u.default.ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=-1,r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){this.timer&amp;&amp;(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:&quot;startLoad&quot;,value:function(){this.canload=!0;var e=this._levels;e&amp;&amp;e.forEach(function(e){e.loadError=0;var t=e.details;t&amp;&amp;t.live&amp;&amp;(e.details=void 0)}),this.timer&amp;&amp;this.tick()}},{key:&quot;stopLoad&quot;,value:function(){this.canload=!1}},{key:&quot;onManifestLoaded&quot;,value:function(e){var t,r=[],i=[],a={},n=!1,s=!1,o=this.hls,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=function(e,t){return MediaSource.isTypeSupported(e+&quot;/mp4;codecs=&quot;+t)};if(e.levels.forEach(function(e){e.videoCodec&amp;&amp;(n=!0),l&amp;&amp;e.audioCodec&amp;&amp;e.audioCodec.indexOf(&quot;mp4a.40.34&quot;)!==-1&amp;&amp;(e.audioCodec=void 0),(e.audioCodec||e.attrs&amp;&amp;e.attrs.AUDIO)&amp;&amp;(s=!0);var t=a[e.bitrate];void 0===t?(a[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)}),n&amp;&amp;s?r.forEach(function(e){e.videoCodec&amp;&amp;i.push(e)}):i=r,i=i.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||d(&quot;audio&quot;,t))&amp;&amp;(!r||d(&quot;video&quot;,r))}),i.length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var f=0;f&lt;i.length;f++)if(i[f].bitrate===t){this._firstLevel=f,c.logger.log(&quot;manifest loaded,&quot;+i.length+&quot; level(s) found, first bitrate:&quot;+t);break}o.trigger(u.default.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:n,altAudio:e.audioTracks.length&gt;0})}else o.trigger(u.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:o.url,reason:&quot;no level with compatible codecs found in manifest&quot;})}},{key:&quot;setLevelInternal&quot;,value:function(e){var t=this._levels,r=this.hls;if(e&gt;=0&amp;&amp;e&lt;t.length){if(this.timer&amp;&amp;(clearTimeout(this.timer),this.timer=null),this._level!==e){c.logger.log(&quot;switching to level &quot;+e),this._level=e;var i=t[e];i.level=e,r.trigger(u.default.LEVEL_SWITCH,i),r.trigger(u.default.LEVEL_SWITCHING,i)}var a=t[e],n=a.details;if(!n||n.live===!0){var s=a.urlId;r.trigger(u.default.LEVEL_LOADING,{url:a.url[s],level:e,id:s})}}else r.trigger(u.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:&quot;invalid level idx&quot;})}},{key:&quot;onError&quot;,value:function(e){if(!e.fatal){var t=e.details,r=this.hls,i=void 0,a=void 0,n=!1;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:i=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=e.context.level,n=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:i=e.level}if(void 0!==i){a=this._levels[i],a.loadError?a.loadError++:a.loadError=1;var s=a.url.length;if(s&gt;1&amp;&amp;a.loadError&lt;s)a.urlId=(a.urlId+1)%s,a.details=void 0,c.logger.warn(&quot;level controller,&quot;+t+&quot; for level &quot;+i+&quot;: switching to redundant stream id &quot;+a.urlId);else{if(this._manualLevel===-1&amp;&amp;i)c.logger.warn(&quot;level controller,&quot;+t+&quot;: switch-down for next fragment&quot;),r.nextAutoLevel=Math.max(0,i-1);else if(a&amp;&amp;a.details&amp;&amp;a.details.live)c.logger.warn(&quot;level controller,&quot;+t+&quot; on live stream, discard&quot;),n&amp;&amp;(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var o=r.media,l=o&amp;&amp;v.default.isBuffered(o,o.currentTime)&amp;&amp;v.default.isBuffered(o,o.currentTime+.5);if(l){var u=r.config.levelLoadingRetryDelay;c.logger.warn(&quot;level controller,&quot;+t+&quot;, but media buffered, retry in &quot;+u+&quot;ms&quot;),this.timer=setTimeout(this.ontick,u)}else c.logger.error(&quot;cannot recover &quot;+t+&quot; error&quot;),this._level=void 0,this.timer&amp;&amp;(clearTimeout(this.timer),this.timer=null),e.fatal=!0}}}}}},{key:&quot;onFragLoaded&quot;,value:function(e){var t=e.frag;if(t&amp;&amp;&quot;main&quot;===t.type){var r=this._levels[t.level];r&amp;&amp;(r.loadError=0)}}},{key:&quot;onLevelLoaded&quot;,value:function(e){var t=e.level;if(t===this._level){var r=this._levels[t];r.loadError=0;var i=e.details;if(i.live){var a=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),n=r.details;n&amp;&amp;i.endSN===n.endSN&amp;&amp;(a/=2,c.logger.log(&quot;same live playlist, reload twice faster&quot;)),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),c.logger.log(&quot;live playlist, reload in &quot;+a+&quot; ms&quot;),this.timer=setTimeout(this.ontick,a)}else this.timer=null}}},{key:&quot;tick&quot;,value:function(){var e=this._level;if(void 0!==e&amp;&amp;this.canload){var t=this._levels[e];if(t&amp;&amp;t.url){var r=t.urlId;this.hls.trigger(u.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r})}}}},{key:&quot;levels&quot;,get:function(){return this._levels}},{key:&quot;level&quot;,get:function(){return this._level},set:function(e){var t=this._levels;t&amp;&amp;t.length&gt;e&amp;&amp;(this._level===e&amp;&amp;void 0!==t[e].details||this.setLevelInternal(e))}},{key:&quot;manualLevel&quot;,get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&amp;&amp;(this._startLevel=e),e!==-1&amp;&amp;(this.level=e)}},{key:&quot;firstLevel&quot;,get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:&quot;startLevel&quot;,get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:&quot;nextLoadLevel&quot;,get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,this._manualLevel===-1&amp;&amp;(this.hls.nextAutoLevel=e)}}]),t}(f.default);r.default=p},{30:30,31:31,32:32,34:34,50:50}],12:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(45),u=i(l),d=e(34),f=i(d),c=e(24),h=i(c),g=e(32),v=i(g),p=e(31),y=i(p),m=e(35),E=i(m),b=e(51),T=i(b),_=e(30),k=e(50),R={STOPPED:&quot;STOPPED&quot;,IDLE:&quot;IDLE&quot;,KEY_LOADING:&quot;KEY_LOADING&quot;,FRAG_LOADING:&quot;FRAG_LOADING&quot;,FRAG_LOADING_WAITING_RETRY:&quot;FRAG_LOADING_WAITING_RETRY&quot;,WAITING_LEVEL:&quot;WAITING_LEVEL&quot;,PARSING:&quot;PARSING&quot;,PARSED:&quot;PARSED&quot;,BUFFER_FLUSHING:&quot;BUFFER_FLUSHING&quot;,ENDED:&quot;ENDED&quot;,ERROR:&quot;ERROR&quot;},A=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.MANIFEST_LOADING,v.default.MANIFEST_PARSED,v.default.LEVEL_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_LOAD_EMERGENCY_ABORTED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_SWITCHED,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=R.STOPPED,r.ontick=r.tick.bind(r),r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){this.stopLoad(),this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null),y.default.prototype.destroy.call(this),this.state=R.STOPPED}},{key:&quot;startLoad&quot;,value:function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;i===-1&amp;&amp;(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}t&gt;0&amp;&amp;e===-1&amp;&amp;(k.logger.log(&quot;override startPosition with lastCurrentTime @&quot;+t.toFixed(3)),e=t),this.state=R.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=R.STOPPED}},{key:&quot;stopLoad&quot;,value:function(){var e=this.fragCurrent;e&amp;&amp;(e.loader&amp;&amp;e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&amp;&amp;(this.demuxer.destroy(),this.demuxer=null),this.state=R.STOPPED,this.forceStartLoad=!1}},{key:&quot;tick&quot;,value:function(){1===++this.ticks&amp;&amp;(this.doTick(),this.ticks&gt;1&amp;&amp;setTimeout(this.tick,1),this.ticks=0)}},{key:&quot;doTick&quot;,value:function(){switch(this.state){case R.ERROR:break;case R.BUFFER_FLUSHING:this.fragLoadError=0;break;case R.IDLE:if(!this._doTickIdle())return;break;case R.WAITING_LEVEL:var e=this.levels[this.level];e&amp;&amp;e.details&amp;&amp;(this.state=R.IDLE);break;case R.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),r=this.retryDate;(!r||t&gt;=r||this.media&amp;&amp;this.media.seeking)&amp;&amp;(k.logger.log(&quot;mediaController: retryDate reached, switch back to IDLE state&quot;),this.state=R.IDLE);break;case R.ERROR:case R.STOPPED:case R.FRAG_LOADING:case R.PARSING:case R.PARSED:case R.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:&quot;_doTickIdle&quot;,value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&amp;&amp;!r&amp;&amp;(this.startFragRequested||!t.startFragPrefetch))return!0;var i=void 0;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=e.nextLoadLevel,n=this.levels[a],s=n.bitrate,o=void 0;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=f.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,t.maxBufferHole),u=l.len;if(u&gt;=o)return!0;k.logger.trace(&quot;buffer length of &quot;+u.toFixed(3)+&quot; is below max of &quot;+o.toFixed(3)+&quot;. checking for more payload ...&quot;),this.level=e.nextLoadLevel=a;var d=n.details;if(void 0===d||d.live&amp;&amp;this.levelLastLoaded!==a)return this.state=R.WAITING_LEVEL,!0;var c=this.fragPrevious;if(!d.live&amp;&amp;c&amp;&amp;c.sn===d.endSN){if(Math.min(r.duration,c.start+c.duration)-Math.max(l.end,c.start)&lt;=Math.max(.2,c.duration/2)){var h={};return this.altAudio&amp;&amp;(h.type=&quot;video&quot;),this.hls.trigger(v.default.BUFFER_EOS,h),this.state=R.ENDED,!0}}return this._fetchPayloadOrEos(i,l,d)}},{key:&quot;_fetchPayloadOrEos&quot;,value:function(e,t,r){var i=this.fragPrevious,a=this.level,n=r.fragments,s=n.length;if(0===s)return!1;var o=n[0].start,l=n[s-1].start+n[s-1].duration,u=t.end,d=void 0;if(r.initSegment&amp;&amp;!r.initSegment.data)d=r.initSegment;else if(r.live){var f=this.config.initialLiveManifestSize;if(s&lt;f)return k.logger.warn(&quot;Can not start playback of a level, reason: not enough fragments &quot;+s+&quot; &lt; &quot;+f),!1;if(null===(d=this._ensureFragmentAtLivePoint(r,u,o,l,i,n,s)))return!1}else u&lt;o&amp;&amp;(d=n[0]);return d||(d=this._findFragment(o,i,s,n,u,l,r)),!d||this._loadFragmentOrKey(d,a,r,e,u)}},{key:&quot;_ensureFragmentAtLivePoint&quot;,value:function(e,t,r,i,a,n,s){var o=this.hls.config,l=this.media,u=void 0,d=void 0!==o.liveMaxLatencyDuration?o.liveMaxLatencyDuration:o.liveMaxLatencyDurationCount*e.targetduration;if(t&lt;Math.max(r-o.maxFragLookUpTolerance,i-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);k.logger.log(&quot;buffer end: &quot;+t.toFixed(3)+&quot; is located too far from the end of live sliding playlist, reset currentTime to : &quot;+f.toFixed(3)),t=f,l&amp;&amp;l.readyState&amp;&amp;l.duration&gt;f&amp;&amp;(l.currentTime=f)}if(e.PTSKnown&amp;&amp;t&gt;i&amp;&amp;l&amp;&amp;l.readyState)return null;if(this.startFragRequested&amp;&amp;!e.PTSKnown){if(a){var c=a.sn+1;c&gt;=e.startSN&amp;&amp;c&lt;=e.endSN&amp;&amp;(u=n[c-e.startSN],k.logger.log(&quot;live playlist, switching playlist, load frag with next SN: &quot;+u.sn))}u||(u=n[Math.min(s-1,Math.round(s/2))],k.logger.log(&quot;live playlist, switching playlist, unknown, load middle frag : &quot;+u.sn))}return u}},{key:&quot;_findFragment&quot;,value:function(e,t,r,i,a,n,s){var o=this.hls.config,l=void 0,d=void 0,f=o.maxFragLookUpTolerance,c=t?i[t.sn-i[0].sn+1]:void 0,h=function(e){var t=Math.min(f,e.duration);return e.start+e.duration-t&lt;=a?1:e.start-t&gt;a&amp;&amp;e.start?-1:0};if(a&lt;n?(a&gt;n-f&amp;&amp;(f=0),d=c&amp;&amp;!h(c)?c:u.default.search(i,h)):d=i[r-1],d){l=d;var g=l.sn-s.startSN,v=t&amp;&amp;l.level===t.level,p=i[g-1],y=i[g+1];if(v&amp;&amp;l.sn===t.sn)if(l.sn&lt;s.endSN){var m=t.deltaPTS;m&amp;&amp;m&gt;o.maxBufferHole&amp;&amp;t.dropped&amp;&amp;g?(l=p,k.logger.warn(&quot;SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this&quot;),t.loadCounter--):(l=y,k.logger.log(&quot;SN just loaded, load next one: &quot;+l.sn))</td>
      </tr>
      <tr>
        <td id="L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="LC3" class="blob-code blob-code-inner js-file-line">}else l=null;else l.dropped&amp;&amp;!v&amp;&amp;(y&amp;&amp;y.backtracked?(k.logger.warn(&quot;Already backtracked from fragment &quot;+(g+1)+&quot;, will not backtrack to fragment &quot;+g+&quot;. Loading fragment &quot;+(g+1)),l=y):(k.logger.warn(&quot;Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe&quot;),l.dropped=0,p?(p.loadCounter&amp;&amp;p.loadCounter--,l=p):l=null))}return l}},{key:&quot;_loadFragmentOrKey&quot;,value:function(e,t,r,i,a){var n=this.hls,s=n.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(k.logger.log(&quot;Loading &quot;+e.sn+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],level &quot;+t+&quot;, currentTime:&quot;+i.toFixed(3)+&quot;,bufferEnd:&quot;+a.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var o=s.fragLoadingLoopThreshold;if(e.loadCounter&gt;o&amp;&amp;Math.abs(this.fragLoadIdx-e.loadIdx)&lt;o)return n.trigger(v.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e}),!1}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=n.autoLevelEnabled,e.bitrateTest=this.bitrateTest,n.trigger(v.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new h.default(n,&quot;main&quot;)),this.state=R.FRAG_LOADING,!0}k.logger.log(&quot;Loading key for &quot;+e.sn+&quot; of [&quot;+r.startSN+&quot; ,&quot;+r.endSN+&quot;],level &quot;+t),this.state=R.KEY_LOADING,n.trigger(v.default.KEY_LOADING,{frag:e})}},{key:&quot;getBufferedFrag&quot;,value:function(e){return u.default.search(this._bufferedFrags,function(t){return e&lt;t.startPTS?-1:e&gt;t.endPTS?1:0})}},{key:&quot;followingBufferedFrag&quot;,value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:&quot;_checkFragmentChanged&quot;,value:function(){var e,t,r=this.media;if(r&amp;&amp;r.readyState&amp;&amp;r.seeking===!1&amp;&amp;(t=r.currentTime,t&gt;r.playbackRate*this.lastCurrentTime&amp;&amp;(this.lastCurrentTime=t),f.default.isBuffered(r,t)?e=this.getBufferedFrag(t):f.default.isBuffered(r,t+.1)&amp;&amp;(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(v.default.FRAG_CHANGED,{frag:i});var a=i.level;this.fragPlaying&amp;&amp;this.fragPlaying.level===a||this.hls.trigger(v.default.LEVEL_SWITCHED,{level:a}),this.fragPlaying=i}}}},{key:&quot;immediateLevelSwitch&quot;,value:function(){if(k.logger.log(&quot;immediateLevelSwitch&quot;),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&amp;&amp;r.loader&amp;&amp;r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:&quot;immediateLevelSwitchEnd&quot;,value:function(){var e=this.media;e&amp;&amp;e.buffered.length&amp;&amp;(this.immediateSwitch=!1,f.default.isBuffered(e,e.currentTime)&amp;&amp;(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:&quot;nextLevelSwitch&quot;,value:function(){var e=this.media;if(e&amp;&amp;e.readyState){var t=void 0,r=void 0,i=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,r=this.getBufferedFrag(e.currentTime),r&amp;&amp;r.startPTS&gt;1&amp;&amp;this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var a=this.hls.nextLoadLevel,n=this.levels[a],s=this.fragLastKbps;t=s&amp;&amp;this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(e.currentTime+t))&amp;&amp;(i=this.followingBufferedFrag(i))){var o=this.fragCurrent;o&amp;&amp;o.loader&amp;&amp;o.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.startPTS,Number.POSITIVE_INFINITY)}}}},{key:&quot;flushMainBuffer&quot;,value:function(e,t){this.state=R.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&amp;&amp;(r.type=&quot;video&quot;),this.hls.trigger(v.default.BUFFER_FLUSHING,r)}},{key:&quot;onMediaAttached&quot;,value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener(&quot;seeking&quot;,this.onvseeking),t.addEventListener(&quot;seeked&quot;,this.onvseeked),t.addEventListener(&quot;ended&quot;,this.onvended);var r=this.config;this.levels&amp;&amp;r.autoStartLoad&amp;&amp;this.hls.startLoad(r.startPosition)}},{key:&quot;onMediaDetaching&quot;,value:function(){var e=this.media;e&amp;&amp;e.ended&amp;&amp;(k.logger.log(&quot;MSE detaching and video ended, reset startPosition&quot;),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&amp;&amp;t.forEach(function(e){e.details&amp;&amp;e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&amp;&amp;(e.removeEventListener(&quot;seeking&quot;,this.onvseeking),e.removeEventListener(&quot;seeked&quot;,this.onvseeked),e.removeEventListener(&quot;ended&quot;,this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:&quot;onMediaSeeking&quot;,value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;if(k.logger.log(&quot;media seeking to &quot;+t.toFixed(3)),this.state===R.FRAG_LOADING){var i=this.mediaBuffer?this.mediaBuffer:e,a=f.default.bufferInfo(i,t,this.config.maxBufferHole),n=this.fragCurrent;if(0===a.len&amp;&amp;n){var s=r.maxFragLookUpTolerance,o=n.start-s,l=n.start+n.duration+s;t&lt;o||t&gt;l?(n.loader&amp;&amp;(k.logger.log(&quot;seeking outside of buffer while fragment load in progress, cancel fragment load&quot;),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=R.IDLE):k.logger.log(&quot;seeking outside of buffer but within currently loaded fragment range&quot;)}}else this.state===R.ENDED&amp;&amp;(this.state=R.IDLE);e&amp;&amp;(this.lastCurrentTime=t),this.state!==R.FRAG_LOADING&amp;&amp;void 0!==this.fragLoadIdx&amp;&amp;(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:&quot;onMediaSeeked&quot;,value:function(){k.logger.log(&quot;media seeked to &quot;+this.media.currentTime.toFixed(3)),this.tick()}},{key:&quot;onMediaEnded&quot;,value:function(){k.logger.log(&quot;media ended&quot;),this.startPosition=this.lastCurrentTime=0}},{key:&quot;onManifestLoading&quot;,value:function(){k.logger.log(&quot;trigger BUFFER_RESET&quot;),this.hls.trigger(v.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:&quot;onManifestParsed&quot;,value:function(e){var t,r=!1,i=!1;e.levels.forEach(function(e){(t=e.audioCodec)&amp;&amp;(t.indexOf(&quot;mp4a.40.2&quot;)!==-1&amp;&amp;(r=!0),t.indexOf(&quot;mp4a.40.5&quot;)!==-1&amp;&amp;(i=!0))}),this.audioCodecSwitch=r&amp;&amp;i,this.audioCodecSwitch&amp;&amp;k.logger.log(&quot;both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC&quot;),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&amp;&amp;this.hls.startLoad(a.startPosition)}},{key:&quot;onLevelLoaded&quot;,value:function(e){var t=e.details,r=e.level,i=this.levels[r],a=t.totalduration,n=0;if(k.logger.log(&quot;level &quot;+r+&quot; loaded [&quot;+t.startSN+&quot;,&quot;+t.endSN+&quot;],duration:&quot;+a),this.levelLastLoaded=r,t.live){var s=i.details;s&amp;&amp;t.fragments.length&gt;0?(E.default.mergeDetails(s,t),n=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(n,s),t.PTSKnown?k.logger.log(&quot;live playlist sliding:&quot;+n.toFixed(3)):k.logger.log(&quot;live playlist - outdated PTS, unknown sliding&quot;)):(t.PTSKnown=!1,k.logger.log(&quot;live playlist - first load, unknown sliding&quot;))}else t.PTSKnown=!1;if(i.details=t,this.hls.trigger(v.default.LEVEL_UPDATED,{details:t,level:r}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var o=t.startTimeOffset;isNaN(o)?t.live?(this.startPosition=this.computeLivePosition(n,t),k.logger.log(&quot;configure startPosition to &quot;+this.startPosition)):this.startPosition=0:(o&lt;0&amp;&amp;(k.logger.log(&quot;negative start time offset &quot;+o+&quot;, count from end of last fragment&quot;),o=n+a+o),k.logger.log(&quot;start time offset found in playlist, adjust startPosition to &quot;+o),this.startPosition=o),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===R.WAITING_LEVEL&amp;&amp;(this.state=R.IDLE),this.tick()}},{key:&quot;onKeyLoaded&quot;,value:function(){this.state===R.KEY_LOADING&amp;&amp;(this.state=R.IDLE,this.tick())}},{key:&quot;onFragLoaded&quot;,value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===R.FRAG_LOADING&amp;&amp;t&amp;&amp;&quot;main&quot;===r.type&amp;&amp;r.level===t.level&amp;&amp;r.sn===t.sn){var i=e.stats,a=this.levels[t.level],n=a.details;if(k.logger.log(&quot;Loaded  &quot;+t.sn+&quot; of [&quot;+n.startSN+&quot; ,&quot;+n.endSN+&quot;],level &quot;+t.level),this.bitrateTest=!1,this.stats=i,r.bitrateTest===!0&amp;&amp;this.hls.nextLoadLevel)this.state=R.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:i,frag:t,id:&quot;main&quot;}),this.tick();else if(&quot;initSegment&quot;===r.sn)this.state=R.IDLE,i.tparsed=i.tbuffered=performance.now(),n.initSegment.data=e.payload,this.hls.trigger(v.default.FRAG_BUFFERED,{stats:i,frag:t,id:&quot;main&quot;}),this.tick();else{this.state=R.PARSING;var s=n.totalduration,o=t.level,l=t.sn,u=this.config.defaultAudioCodec||a.audioCodec;this.audioCodecSwap&amp;&amp;(k.logger.log(&quot;swapping playlist audio codec&quot;),void 0===u&amp;&amp;(u=this.lastAudioCodec),u&amp;&amp;(u=u.indexOf(&quot;mp4a.40.5&quot;)!==-1?&quot;mp4a.40.2&quot;:&quot;mp4a.40.5&quot;)),this.pendingBuffering=!0,this.appended=!1,k.logger.log(&quot;Parsing &quot;+l+&quot; of [&quot;+n.startSN+&quot; ,&quot;+n.endSN+&quot;],level &quot;+o+&quot;, cc &quot;+t.cc);var d=this.demuxer;d||(d=this.demuxer=new h.default(this.hls,&quot;main&quot;));var f=this.media,c=f&amp;&amp;f.seeking,g=!c&amp;&amp;(n.PTSKnown||!n.live),p=n.initSegment?n.initSegment.data:[];d.push(e.payload,p,u,a.videoCodec,t,s,g,void 0)}}this.fragLoadError=0}},{key:&quot;onFragParsingInitSegment&quot;,value:function(e){var t=this.fragCurrent,r=e.frag;if(t&amp;&amp;&quot;main&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===R.PARSING){var i,a,n=e.tracks;if(n.audio&amp;&amp;this.altAudio&amp;&amp;delete n.audio,a=n.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&amp;&amp;this.audioCodecSwap&amp;&amp;(k.logger.log(&quot;swapping playlist audio codec&quot;),s=s.indexOf(&quot;mp4a.40.5&quot;)!==-1?&quot;mp4a.40.2&quot;:&quot;mp4a.40.5&quot;),this.audioCodecSwitch&amp;&amp;1!==a.metadata.channelCount&amp;&amp;o.indexOf(&quot;firefox&quot;)===-1&amp;&amp;(s=&quot;mp4a.40.5&quot;),o.indexOf(&quot;android&quot;)!==-1&amp;&amp;&quot;audio/mpeg&quot;!==a.container&amp;&amp;(s=&quot;mp4a.40.2&quot;,k.logger.log(&quot;Android: force audio codec to &quot;+s)),a.levelCodec=s,a.id=e.id}a=n.video,a&amp;&amp;(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(v.default.BUFFER_CODECS,n);for(i in n){a=n[i],k.logger.log(&quot;main track:&quot;+i+&quot;,container:&quot;+a.container+&quot;,codecs[level/parsed]=[&quot;+a.levelCodec+&quot;/&quot;+a.codec+&quot;]&quot;);var l=a.initSegment;l&amp;&amp;(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,{type:i,data:l,parent:&quot;main&quot;,content:&quot;initSegment&quot;}))}this.tick()}}},{key:&quot;onFragParsingData&quot;,value:function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&amp;&amp;&quot;main&quot;===e.id&amp;&amp;i.sn===r.sn&amp;&amp;i.level===r.level&amp;&amp;(&quot;audio&quot;!==e.type||!this.altAudio)&amp;&amp;this.state===R.PARSING){var a=this.levels[this.level],n=r;if(isNaN(e.endPTS)&amp;&amp;(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),k.logger.log(&quot;Parsed &quot;+e.type+&quot;,PTS:[&quot;+e.startPTS.toFixed(3)+&quot;,&quot;+e.endPTS.toFixed(3)+&quot;],DTS:[&quot;+e.startDTS.toFixed(3)+&quot;/&quot;+e.endDTS.toFixed(3)+&quot;],nb:&quot;+e.nb+&quot;,dropped:&quot;+(e.dropped||0)),&quot;video&quot;===e.type)if(n.dropped=e.dropped,n.dropped){if(!n.backtracked)return n.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=R.IDLE,void this.tick();k.logger.warn(&quot;Already backtracked on this fragment, appending with the gap&quot;)}else n.backtracked=!1;var s=E.default.updateFragPTSDTS(a.details,n.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),o=this.hls;o.trigger(v.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(r){r&amp;&amp;r.length&amp;&amp;t.state===R.PARSING&amp;&amp;(t.appended=!0,t.pendingBuffering=!0,o.trigger(v.default.BUFFER_APPENDING,{type:e.type,data:r,parent:&quot;main&quot;,content:&quot;data&quot;}))}),this.tick()}}},{key:&quot;onFragParsed&quot;,value:function(e){var t=this.fragCurrent,r=e.frag;t&amp;&amp;&quot;main&quot;===e.id&amp;&amp;r.sn===t.sn&amp;&amp;r.level===t.level&amp;&amp;this.state===R.PARSING&amp;&amp;(this.stats.tparsed=performance.now(),this.state=R.PARSED,this._checkAppendedParsed())}},{key:&quot;onAudioTrackSwitching&quot;,value:function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){k.logger.log(&quot;switching on main audio, use media.buffered to schedule main fragment loading&quot;),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&amp;&amp;(k.logger.log(&quot;switching to main audio track, cancel main fragment load&quot;),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&amp;&amp;(this.demuxer.destroy(),this.demuxer=null),this.state=R.IDLE}var a=this.hls;a.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:&quot;audio&quot;}),a.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}}},{key:&quot;onAudioTrackSwitched&quot;,value:function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var i=this.videoBuffer;i&amp;&amp;this.mediaBuffer!==i&amp;&amp;(k.logger.log(&quot;switching on alternate audio, use video.buffered to schedule main fragment loading&quot;),this.mediaBuffer=i)}this.altAudio=r,this.tick()}},{key:&quot;onBufferCreated&quot;,value:function(e){var t=e.tracks,r=void 0,i=void 0,a=!1;for(var n in t){var s=t[n];&quot;main&quot;===s.id?(i=n,r=s,&quot;video&quot;===n&amp;&amp;(this.videoBuffer=t[n].buffer)):a=!0}a&amp;&amp;r?(k.logger.log(&quot;alternate track found, use &quot;+i+&quot;.buffered to schedule main fragment loading&quot;),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:&quot;onBufferAppended&quot;,value:function(e){if(&quot;main&quot;===e.parent){var t=this.state;t!==R.PARSING&amp;&amp;t!==R.PARSED||(this.pendingBuffering=e.pending&gt;0,this._checkAppendedParsed())}}},{key:&quot;_checkAppendedParsed&quot;,value:function(){if(!(this.state!==R.PARSED||this.appended&amp;&amp;this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;k.logger.log(&quot;main buffered : &quot;+T.default.toString(t.buffered));var r=this._bufferedFrags.filter(function(e){return f.default.isBuffered(t,(e.startPTS+e.endPTS)/2)});r.push(e),this._bufferedFrags=r.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:i,frag:e,id:&quot;main&quot;}),this.state=R.IDLE}this.tick()}}},{key:&quot;onError&quot;,value:function(e){var t=e.frag||this.fragCurrent;if(!t||&quot;main&quot;===t.type){var r=this.media,i=r&amp;&amp;f.default.isBuffered(r,r.currentTime)&amp;&amp;f.default.isBuffered(r,r.currentTime+.5);switch(e.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var a=this.fragLoadError;a?a++:a=1;var n=this.config;if(a&lt;=n.fragLoadingMaxRetry||i||t.autoLevel&amp;&amp;t.level){this.fragLoadError=a,t.loadCounter=0;var s=Math.min(Math.pow(2,a-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);k.logger.warn(&quot;mediaController: frag loading failed, retry in &quot;+s+&quot; ms&quot;),this.retryDate=performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=R.FRAG_LOADING_WAITING_RETRY}else k.logger.error(&quot;mediaController: &quot;+e.details+&quot; reaches max retry, redispatch as fatal ...&quot;),e.fatal=!0,this.state=R.ERROR}break;case _.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(i?(this._reduceMaxBufferLength(t.duration),this.state=R.IDLE):t.autoLevel&amp;&amp;0!==t.level||(e.fatal=!0,this.state=R.ERROR));break;case _.ErrorDetails.LEVEL_LOAD_ERROR:case _.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==R.ERROR&amp;&amp;(e.fatal?(this.state=R.ERROR,k.logger.warn(&quot;streamController: &quot;+e.details+&quot;,switch to &quot;+this.state+&quot; state ...&quot;)):this.state===R.WAITING_LEVEL&amp;&amp;(this.state=R.IDLE));break;case _.ErrorDetails.BUFFER_FULL_ERROR:&quot;main&quot;!==e.parent||this.state!==R.PARSING&amp;&amp;this.state!==R.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=R.IDLE):(k.logger.warn(&quot;buffer full error also media.currentTime is not buffered, flush everything&quot;),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:&quot;_reduceMaxBufferLength&quot;,value:function(e){var t=this.config;t.maxMaxBufferLength&gt;=e&amp;&amp;(t.maxMaxBufferLength/=2,k.logger.warn(&quot;main:reduce max buffer length to &quot;+t.maxMaxBufferLength+&quot;s&quot;),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:&quot;_checkBuffer&quot;,value:function(){var e=this.media;if(e&amp;&amp;e.readyState){var t=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,i=r.buffered;if(!this.loadedmetadata&amp;&amp;i.length){this.loadedmetadata=!0;var a=e.seeking?t:this.startPosition,n=f.default.isBuffered(r,a);t===a&amp;&amp;n||(k.logger.log(&quot;target start position:&quot;+a),n||(a=i.start(0),k.logger.log(&quot;target start position not buffered, seek to buffered.start(0) &quot;+a)),k.logger.log(&quot;adjust currentTime from &quot;+t+&quot; to &quot;+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var s=f.default.bufferInfo(e,t,0),o=!(e.paused||e.ended||0===e.buffered.length),l=t!==this.lastCurrentTime,u=this.config;if(l)this.stallReported&amp;&amp;(k.logger.warn(&quot;playback not stuck anymore @&quot;+t+&quot;, after &quot;+Math.round(performance.now()-this.stalled)+&quot;ms&quot;),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(o){var d=performance.now(),c=this.hls;if(this.stalled){var h=d-this.stalled,g=s.len,p=this.nudgeRetry||0;if(g&lt;=.5&amp;&amp;h&gt;1e3*u.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,k.logger.warn(&quot;playback stalling in low buffer @&quot;+t),c.trigger(v.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g}));var y=s.nextStart,m=y-t;if(y&amp;&amp;m&lt;u.maxSeekHole&amp;&amp;m&gt;0){this.nudgeRetry=++p;var E=p*u.nudgeOffset;k.logger.log(&quot;adjust currentTime from &quot;+e.currentTime+&quot; to next buffered @ &quot;+y+&quot; + nudge &quot;+E),e.currentTime=y+E,this.stalled=void 0,c.trigger(v.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:y+E-t})}}else if(g&gt;.5&amp;&amp;h&gt;1e3*u.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,k.logger.warn(&quot;playback stalling in high buffer @&quot;+t),c.trigger(v.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g})),this.stalled=void 0,this.nudgeRetry=++p,p&lt;u.nudgeMaxRetry){var b=e.currentTime,T=b+p*u.nudgeOffset;k.logger.log(&quot;adjust currentTime from &quot;+b+&quot; to &quot;+T),e.currentTime=T,c.trigger(v.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else k.logger.error(&quot;still stuck in high buffer @&quot;+t+&quot; after &quot;+u.nudgeMaxRetry+&quot;, raise fatal error&quot;),c.trigger(v.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=d,this.stallReported=!1}}}}},{key:&quot;onFragLoadEmergencyAborted&quot;,value:function(){this.state=R.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:&quot;onBufferFlushed&quot;,value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return f.default.isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=R.IDLE,this.fragPrevious=null}},{key:&quot;swapAudioCodec&quot;,value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:&quot;computeLivePosition&quot;,value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:&quot;state&quot;,set:function(e){if(this.state!==e){var t=this.state;this._state=e,k.logger.log(&quot;main stream:&quot;+t+&quot;-&gt;&quot;+e),this.hls.trigger(v.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:&quot;currentLevel&quot;,get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:&quot;nextBufferedFrag&quot;,get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:&quot;nextLevel&quot;,get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:&quot;liveSyncPosition&quot;,get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(y.default);r.default=A},{24:24,30:30,31:31,32:32,34:34,35:35,45:45,50:50,51:51}],13:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(50),h=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.ERROR,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED));return r.config=e.config,r.vttFragSNsProcessed={},r.vttFragQueues=void 0,r.currentlyProcessing=null,r.currentTrackId=-1,r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){f.default.prototype.destroy.call(this)}},{key:&quot;clearVttFragQueues&quot;,value:function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})}},{key:&quot;nextFrag&quot;,value:function(){if(null===this.currentlyProcessing&amp;&amp;this.currentTrackId&gt;-1&amp;&amp;this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(u.default.FRAG_LOADING,{frag:e})}}},{key:&quot;onSubtitleFragProcessed&quot;,value:function(e){e.success&amp;&amp;this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:&quot;onError&quot;,value:function(e){var t=e.frag;t&amp;&amp;&quot;subtitle&quot;!==t.type||this.currentlyProcessing&amp;&amp;(this.currentlyProcessing=null,this.nextFrag())}},{key:&quot;onSubtitleTracksUpdated&quot;,value:function(e){var t=this;c.logger.log(&quot;subtitle tracks updated&quot;),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:&quot;onSubtitleTrackSwitch&quot;,value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:&quot;onSubtitleTrackLoaded&quot;,value:function(e){var t=this.vttFragSNsProcessed[e.id],r=this.vttFragQueues[e.id],i=this.currentlyProcessing?this.currentlyProcessing.sn:-1,a=function(e){return t.indexOf(e.sn)&gt;-1},n=function(e){return r.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){a(t)||t.sn===i||n(t)||(t.trackId=e.id,r.push(t))}),this.nextFrag()}}]),t}(f.default);r.default=h},{31:31,32:32,50:50}],14:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(50),h=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED));return r.tracks=[],r.trackId=-1,r.media=void 0,r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){f.default.prototype.destroy.call(this)}},{key:&quot;onMediaAttached&quot;,value:function(e){var t=this;this.media=e.media,this.media&amp;&amp;this.media.textTracks.addEventListener(&quot;change&quot;,function(){if(t.media){for(var e=-1,r=t.media.textTracks,i=0;i&lt;r.length;i++)&quot;showing&quot;===r[i].mode&amp;&amp;(e=i);t.subtitleTrack=e}})}},{key:&quot;onMediaDetaching&quot;,value:function(){this.media=void 0}},{key:&quot;onManifestLoading&quot;,value:function(){this.tracks=[],this.trackId=-1}},{key:&quot;onManifestLoaded&quot;,value:function(e){var t=this,r=e.subtitles||[],i=!1;this.tracks=r,this.trackId=-1,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&amp;&amp;(t.subtitleTrack=e.id,i=!0)})}},{key:&quot;onTick&quot;,value:function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;void 0!==r&amp;&amp;r.live!==!0||(c.logger.log(&quot;(re)loading playlist for subtitle track &quot;+e),this.hls.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:&quot;onSubtitleTrackLoaded&quot;,value:function(e){var t=this;e.id&lt;this.tracks.length&amp;&amp;(c.logger.log(&quot;subtitle track &quot;+e.id+&quot; loaded&quot;),this.tracks[e.id].details=e.details,e.details.live&amp;&amp;!this.timer&amp;&amp;(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&amp;&amp;this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null))}},{key:&quot;setSubtitleTrackInternal&quot;,value:function(e){if(e&gt;=0&amp;&amp;e&lt;this.tracks.length){this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null),this.trackId=e,c.logger.log(&quot;switching to subtitle track &quot;+e);var t=this.tracks[e];this.hls.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:e});var r=t.details;void 0!==r&amp;&amp;r.live!==!0||(c.logger.log(&quot;(re)loading playlist for subtitle track &quot;+e),this.hls.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:&quot;subtitleTracks&quot;,get:function(){return this.tracks}},{key:&quot;subtitleTrack&quot;,get:function(){return this.trackId},set:function(e){this.trackId!==e&amp;&amp;this.setSubtitleTrackInternal(e)}}]),t}(f.default);r.default=h},{31:31,32:32,50:50}],15:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){if(e&amp;&amp;e.cues)for(;e.cues.length&gt;0;)e.removeCue(e.cues[0])}function l(e,t){return e&amp;&amp;e.label===t.name&amp;&amp;!(e.textTrack1||e.textTrack2)}function u(e,t,r,i){return Math.min(t,i)-Math.max(e,r)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var d=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),f=e(32),c=i(f),h=e(31),g=i(h),v=e(46),p=i(v),y=e(54),m=i(y),E=e(50),b=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_USERDATA,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.FRAG_LOADED,c.default.LEVEL_SWITCHING,c.default.INIT_PTS_FOUND));if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=void 0,r.cueRanges=[],r.config.enableCEA708Captions){var i=r,s=function(e,t){var r=null;try{r=new window.Event(&quot;addtrack&quot;)}catch(e){r=document.createEvent(&quot;Event&quot;),r.initEvent(&quot;addtrack&quot;,!1,!1)}r.track=e,t.dispatchEvent(r)},l={newCue:function(e,t,r){if(!i.textTrack1){var a=i.getExistingTrack(&quot;1&quot;);if(a)i.textTrack1=a,o(i.textTrack1),s(i.textTrack1,i.media);else{var n=i.createTextTrack(&quot;captions&quot;,i.config.captionsTextTrack1Label,i.config.captionsTextTrack1LanguageCode);n&amp;&amp;(n.textTrack1=!0,i.textTrack1=n)}}i.addCues(&quot;textTrack1&quot;,e,t,r)}},u={newCue:function(e,t,r){if(!i.textTrack2){var a=i.getExistingTrack(&quot;2&quot;);if(a)i.textTrack2=a,o(i.textTrack2),s(i.textTrack2,i.media);else{var n=i.createTextTrack(&quot;captions&quot;,i.config.captionsTextTrack2Label,i.config.captionsTextTrack1LanguageCode);n&amp;&amp;(n.textTrack2=!0,i.textTrack2=n)}}i.addCues(&quot;textTrack2&quot;,e,t,r)}};r.cea608Parser=new p.default(0,l,u)}return r}return s(t,e),d(t,[{key:&quot;addCues&quot;,value:function(e,t,r,i){for(var a=this.cueRanges,n=!1,s=a.length;s--;){var o=a[s],l=u(o[0],o[1],t,r);if(l&gt;=0&amp;&amp;(o[0]=Math.min(o[0],t),o[1]=Math.max(o[1],r),n=!0,l/(r-t)&gt;.5))return}n||a.push([t,r]),this.Cues.newCue(this[e],t,r,i)}},{key:&quot;onInitPtsFound&quot;,value:function(e){var t=this;void 0===this.initPTS&amp;&amp;(this.initPTS=e.initPTS),this.unparsedVttFrags.length&amp;&amp;(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:&quot;getExistingTrack&quot;,value:function(e){var t=this.media;if(t)for(var r=0;r&lt;t.textTracks.length;r++){var i=t.textTracks[r],a=&quot;textTrack&quot;+e;if(i[a]===!0)return i}return null}},{key:&quot;createTextTrack&quot;,value:function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)}},{key:&quot;destroy&quot;,value:function(){g.default.prototype.destroy.call(this)}},{key:&quot;onMediaAttaching&quot;,value:function(e){this.media=e.media}},{key:&quot;onMediaDetaching&quot;,value:function(){o(this.textTrack1),o(this.textTrack2)}},{key:&quot;onManifestLoading&quot;,value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r&lt;t.length;r++)o(t[r])}}},{key:&quot;onManifestLoaded&quot;,value:function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var a=void 0;if(i&lt;r.length){var n=r[i];l(n,e)&amp;&amp;(a=n)}a||(a=t.createTextTrack(&quot;subtitles&quot;,e.name,e.lang)),a.mode=e.default?&quot;showing&quot;:&quot;hidden&quot;,t.textTracks.push(a)})}}},{key:&quot;onLevelSwitching&quot;,value:function(){this.enabled=&quot;NONE&quot;!==this.hls.currentLevel.closedCaptions}},{key:&quot;onFragLoaded&quot;,value:function(e){var t=e.frag,r=e.payload;if(&quot;main&quot;===t.type){var i=t.sn;i!==this.lastSn+1&amp;&amp;this.cea608Parser.reset(),this.lastSn=i}else if(&quot;subtitle&quot;===t.type)if(r.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=this.vttCCs;a[t.cc]||(a[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.textTracks,s=this.hls;m.default.parse(r,this.initPTS,a,t.cc,function(e){e.forEach(function(e){n[t.trackId].addCue(e)}),s.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){E.logger.log(&quot;Failed to parse VTT cue: &quot;+e),s.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:&quot;onFragParsingUserdata&quot;,value:function(e){if(this.enabled&amp;&amp;this.config.enableCEA708Captions)for(var t=0;t&lt;e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}}},{key:&quot;extractCea608Data&quot;,value:function(e){for(var t,r,i,a,n,s=31&amp;e[0],o=2,l=[],u=0;u&lt;s;u++)t=e[o++],r=127&amp;e[o++],i=127&amp;e[o++],a=0!=(4&amp;t),n=3&amp;t,0===r&amp;&amp;0===i||a&amp;&amp;0===n&amp;&amp;(l.push(r),l.push(i));return l}}]),t}(g.default);r.default=b},{31:31,32:32,46:46,50:50,54:54}],16:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),</td>
      </tr>
      <tr>
        <td id="L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="LC4" class="blob-code blob-code-inner js-file-line">Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=function(){function e(t,r){i(this,e),this.subtle=t,this.aesIV=r}return a(e,[{key:&quot;decrypt&quot;,value:function(e,t){return this.subtle.decrypt({name:&quot;AES-CBC&quot;,iv:this.aesIV},t,e)}}]),e}();r.default=n},{}],17:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=function(){function e(){i(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return a(e,[{key:&quot;uint8ArrayToUint32Array_&quot;,value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i&lt;4;i++)r[i]=t.getUint32(4*i);return r}},{key:&quot;initTable&quot;,value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],d=o[2],f=o[3],c=new Uint32Array(256),h=0,g=0,v=0;for(v=0;v&lt;256;v++)c[v]=v&lt;128?v&lt;&lt;1:v&lt;&lt;1^283;for(v=0;v&lt;256;v++){var p=g^g&lt;&lt;1^g&lt;&lt;2^g&lt;&lt;3^g&lt;&lt;4;p=p&gt;&gt;&gt;8^255&amp;p^99,e[h]=p,t[p]=h;var y=c[h],m=c[y],E=c[m],b=257*c[p]^16843008*p;i[h]=b&lt;&lt;24|b&gt;&gt;&gt;8,a[h]=b&lt;&lt;16|b&gt;&gt;&gt;16,n[h]=b&lt;&lt;8|b&gt;&gt;&gt;24,s[h]=b,b=16843009*E^65537*m^257*y^16843008*h,l[p]=b&lt;&lt;24|b&gt;&gt;&gt;8,u[p]=b&lt;&lt;16|b&gt;&gt;&gt;16,d[p]=b&lt;&lt;8|b&gt;&gt;&gt;24,f[p]=b,h?(h=y^c[c[c[E^y]]],g^=c[c[g]]):h=g=1}}},{key:&quot;expandKey&quot;,value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i&lt;t.length&amp;&amp;r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var a=this.keySize=t.length;if(4!==a&amp;&amp;6!==a&amp;&amp;8!==a)throw new Error(&quot;Invalid aes key size=&quot;+a);var n=this.ksRows=4*(a+6+1),s=void 0,o=void 0,l=this.keySchedule=new Uint32Array(n),u=this.invKeySchedule=new Uint32Array(n),d=this.sBox,f=this.rcon,c=this.invSubMix,h=c[0],g=c[1],v=c[2],p=c[3],y=void 0,m=void 0;for(s=0;s&lt;n;s++)s&lt;a?y=l[s]=t[s]:(m=y,s%a==0?(m=m&lt;&lt;8|m&gt;&gt;&gt;24,m=d[m&gt;&gt;&gt;24]&lt;&lt;24|d[m&gt;&gt;&gt;16&amp;255]&lt;&lt;16|d[m&gt;&gt;&gt;8&amp;255]&lt;&lt;8|d[255&amp;m],m^=f[s/a|0]&lt;&lt;24):a&gt;6&amp;&amp;s%a==4&amp;&amp;(m=d[m&gt;&gt;&gt;24]&lt;&lt;24|d[m&gt;&gt;&gt;16&amp;255]&lt;&lt;16|d[m&gt;&gt;&gt;8&amp;255]&lt;&lt;8|d[255&amp;m]),l[s]=y=(l[s-a]^m)&gt;&gt;&gt;0);for(o=0;o&lt;n;o++)s=n-o,m=3&amp;o?l[s]:l[s-4],u[o]=o&lt;4||s&lt;=4?m:h[d[m&gt;&gt;&gt;24]]^g[d[m&gt;&gt;&gt;16&amp;255]]^v[d[m&gt;&gt;&gt;8&amp;255]]^p[d[255&amp;m]],u[o]=u[o]&gt;&gt;&gt;0}}},{key:&quot;networkToHostOrderSwap&quot;,value:function(e){return e&lt;&lt;24|(65280&amp;e)&lt;&lt;8|(16711680&amp;e)&gt;&gt;8|e&gt;&gt;&gt;24}},{key:&quot;decrypt&quot;,value:function(e,t,r){for(var i,a,n=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,l=this.invSubMix,u=l[0],d=l[1],f=l[2],c=l[3],h=this.uint8ArrayToUint32Array_(r),g=h[0],v=h[1],p=h[2],y=h[3],m=new Int32Array(e),E=new Int32Array(m.length),b=void 0,T=void 0,_=void 0,k=void 0,R=void 0,A=void 0,S=void 0,L=void 0,w=void 0,D=void 0,O=void 0,I=void 0,P=this.networkToHostOrderSwap;t&lt;m.length;){for(w=P(m[t]),D=P(m[t+1]),O=P(m[t+2]),I=P(m[t+3]),R=w^s[0],A=I^s[1],S=O^s[2],L=D^s[3],i=4,a=1;a&lt;n;a++)b=u[R&gt;&gt;&gt;24]^d[A&gt;&gt;16&amp;255]^f[S&gt;&gt;8&amp;255]^c[255&amp;L]^s[i],T=u[A&gt;&gt;&gt;24]^d[S&gt;&gt;16&amp;255]^f[L&gt;&gt;8&amp;255]^c[255&amp;R]^s[i+1],_=u[S&gt;&gt;&gt;24]^d[L&gt;&gt;16&amp;255]^f[R&gt;&gt;8&amp;255]^c[255&amp;A]^s[i+2],k=u[L&gt;&gt;&gt;24]^d[R&gt;&gt;16&amp;255]^f[A&gt;&gt;8&amp;255]^c[255&amp;S]^s[i+3],R=b,A=T,S=_,L=k,i+=4;b=o[R&gt;&gt;&gt;24]&lt;&lt;24^o[A&gt;&gt;16&amp;255]&lt;&lt;16^o[S&gt;&gt;8&amp;255]&lt;&lt;8^o[255&amp;L]^s[i],T=o[A&gt;&gt;&gt;24]&lt;&lt;24^o[S&gt;&gt;16&amp;255]&lt;&lt;16^o[L&gt;&gt;8&amp;255]&lt;&lt;8^o[255&amp;R]^s[i+1],_=o[S&gt;&gt;&gt;24]&lt;&lt;24^o[L&gt;&gt;16&amp;255]&lt;&lt;16^o[R&gt;&gt;8&amp;255]&lt;&lt;8^o[255&amp;A]^s[i+2],k=o[L&gt;&gt;&gt;24]&lt;&lt;24^o[R&gt;&gt;16&amp;255]&lt;&lt;16^o[A&gt;&gt;8&amp;255]&lt;&lt;8^o[255&amp;S]^s[i+3],i+=3,E[t]=P(b^g),E[t+1]=P(k^v),E[t+2]=P(_^p),E[t+3]=P(T^y),g=w,v=D,p=O,y=I,t+=4}return E.buffer}},{key:&quot;destroy&quot;,value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();r.default=n},{}],18:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(16),o=i(s),l=e(19),u=i(l),d=e(17),f=i(d),c=e(30),h=e(50),g=function(){function e(t,r){a(this,e),this.observer=t,this.config=r,this.logEnabled=!0;try{var i=crypto?crypto:self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return n(e,[{key:&quot;isSync&quot;,value:function(){return this.disableWebCrypto&amp;&amp;this.config.enableSoftwareAES}},{key:&quot;decrypt&quot;,value:function(e,t,r,i){var a=this;if(this.disableWebCrypto&amp;&amp;this.config.enableSoftwareAES){this.logEnabled&amp;&amp;(h.logger.log(&quot;JS AES decrypt&quot;),this.logEnabled=!1);var n=this.decryptor;n||(this.decryptor=n=new f.default),n.expandKey(t),i(n.decrypt(e,0,r))}else{this.logEnabled&amp;&amp;(h.logger.log(&quot;WebCrypto AES decrypt&quot;),this.logEnabled=!1);var s=this.subtle;this.key!==t&amp;&amp;(this.key=t,this.fastAesKey=new u.default(s,t)),this.fastAesKey.expandKey().then(function(n){new o.default(s,r).decrypt(e,n).catch(function(n){a.onWebCryptoError(n,e,t,r,i)}).then(function(e){i(e)})}).catch(function(n){a.onWebCryptoError(n,e,t,r,i)})}}},{key:&quot;onWebCryptoError&quot;,value:function(e,t,r,i,a){this.config.enableSoftwareAES?(h.logger.log(&quot;WebCrypto Error, disable WebCrypto API&quot;),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,i,a)):(h.logger.error(&quot;decrypting error : &quot;+e.message),this.observer.trigger(Event.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:&quot;destroy&quot;,value:function(){var e=this.decryptor;e&amp;&amp;(e.destroy(),this.decryptor=void 0)}}]),e}();r.default=g},{16:16,17:17,19:19,30:30,50:50}],19:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=function(){function e(t,r){i(this,e),this.subtle=t,this.key=r}return a(e,[{key:&quot;expandKey&quot;,value:function(){return this.subtle.importKey(&quot;raw&quot;,this.key,{name:&quot;AES-CBC&quot;},!1,[&quot;encrypt&quot;,&quot;decrypt&quot;])}}]),e}();r.default=n},{}],20:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(21),o=i(s),l=e(50),u=e(26),d=i(u),f=function(){function e(t,r,i){a(this,e),this.observer=t,this.config=i,this.remuxer=r}return n(e,[{key:&quot;resetInitSegment&quot;,value:function(e,t,r,i){this._aacTrack={container:&quot;audio/adts&quot;,type:&quot;audio&quot;,id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}}},{key:&quot;resetTimeStamp&quot;,value:function(){}},{key:&quot;append&quot;,value:function(e,t,r,i){var a,n,s,u,f,c,h,g,v,p,y=new d.default(e),m=90*y.timeStamp;for(a=this._aacTrack,c=y.length,v=e.length;c&lt;v-1&amp;&amp;(255!==e[c]||240!=(240&amp;e[c+1]));c++);for(a.samplerate||(n=o.default.getAudioConfig(this.observer,e,c,a.manifestCodec),a.config=n.config,a.samplerate=n.samplerate,a.channelCount=n.channelCount,a.codec=n.codec,l.logger.log(&quot;parsed codec:&quot;+a.codec+&quot;,rate:&quot;+n.samplerate+&quot;,nb channel:&quot;+n.channelCount)),f=0,u=9216e4/a.samplerate;c+5&lt;v&amp;&amp;(h=1&amp;e[c+1]?7:9,s=(3&amp;e[c+3])&lt;&lt;11|e[c+4]&lt;&lt;3|(224&amp;e[c+5])&gt;&gt;&gt;5,(s-=h)&gt;0&amp;&amp;c+h+s&lt;=v);)for(g=m+f*u,p={unit:e.subarray(c+h,c+h+s),pts:g,dts:g},a.samples.push(p),a.len+=s,c+=s+h,f++;c&lt;v-1&amp;&amp;(255!==e[c]||240!=(240&amp;e[c+1]));c++);this.remuxer.remux(a,{samples:[]},{samples:[{pts:m,dts:m,unit:y.payload}]},{samples:[]},t,r,i)}},{key:&quot;destroy&quot;,value:function(){}}],[{key:&quot;probe&quot;,value:function(e){var t,r,i=new d.default(e);if(i.hasTimeStamp)for(t=i.length,r=e.length;t&lt;r-1;t++)if(255===e[t]&amp;&amp;240==(240&amp;e[t+1]))return!0;return!1}}]),e}();r.default=f},{21:21,26:26,50:50}],21:[function(e,t,r){&quot;use strict&quot;;var i=e(50),a=e(30),n={getAudioConfig:function(e,t,r,n){var s,o,l,u,d,f=navigator.userAgent.toLowerCase(),c=n,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return s=1+((192&amp;t[r+2])&gt;&gt;&gt;6),(o=(60&amp;t[r+2])&gt;&gt;&gt;2)&gt;h.length-1?void e.trigger(Event.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:&quot;invalid ADTS sampling index:&quot;+o}):(u=(1&amp;t[r+2])&lt;&lt;2,u|=(192&amp;t[r+3])&gt;&gt;&gt;6,i.logger.log(&quot;manifest codec:&quot;+n+&quot;,ADTS data:type:&quot;+s+&quot;,sampleingIndex:&quot;+o+&quot;[&quot;+h[o]+&quot;Hz],channelConfig:&quot;+u),/firefox/i.test(f)?o&gt;=6?(s=5,d=new Array(4),l=o-3):(s=2,d=new Array(2),l=o):f.indexOf(&quot;android&quot;)!==-1?(s=2,d=new Array(2),l=o):(s=5,d=new Array(4),n&amp;&amp;(n.indexOf(&quot;mp4a.40.29&quot;)!==-1||n.indexOf(&quot;mp4a.40.5&quot;)!==-1)||!n&amp;&amp;o&gt;=6?l=o-3:((n&amp;&amp;n.indexOf(&quot;mp4a.40.2&quot;)!==-1&amp;&amp;o&gt;=6&amp;&amp;1===u||!n&amp;&amp;1===u)&amp;&amp;(s=2,d=new Array(2)),l=o)),d[0]=s&lt;&lt;3,d[0]|=(14&amp;o)&gt;&gt;1,d[1]|=(1&amp;o)&lt;&lt;7,d[1]|=u&lt;&lt;3,5===s&amp;&amp;(d[1]|=(14&amp;l)&gt;&gt;1,d[2]=(1&amp;l)&lt;&lt;7,d[2]|=8,d[3]=0),{config:d,samplerate:h[o],channelCount:u,codec:&quot;mp4a.40.&quot;+s,manifestCodec:c})}};t.exports=n},{30:30,50:50}],22:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(32),o=i(s),l=e(30),u=e(18),d=i(u),f=e(20),c=i(f),h=e(27),g=i(h),v=e(29),p=i(v),y=e(42),m=i(y),E=e(43),b=i(E),T=function(){function e(t,r,i,n){a(this,e),this.observer=t,this.typeSupported=r,this.config=i,this.vendor=n}return n(e,[{key:&quot;destroy&quot;,value:function(){var e=this.demuxer;e&amp;&amp;e.destroy()}},{key:&quot;push&quot;,value:function(e,t,r,i,a,n,s,l,u,f,c,h){if(e.byteLength&gt;0&amp;&amp;null!=t&amp;&amp;null!=t.key&amp;&amp;&quot;AES-128&quot;===t.method){var g=this.decrypter;null==g&amp;&amp;(g=this.decrypter=new d.default(this.observer,this.config));var v,p=this;try{v=performance.now()}catch(e){v=Date.now()}g.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var d;try{d=performance.now()}catch(e){d=Date.now()}p.observer.trigger(o.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:d}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,a,n,s,l,u,f,c,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,a,n,s,l,u,f,c,h)}},{key:&quot;pushDecrypted&quot;,value:function(e,t,r,i,a,n,s,u,d,f,h,v){var y=this.demuxer;if(!y||s&amp;&amp;!this.probe(e)){var E=this.observer,T=this.typeSupported,_=this.config,k=[{demux:p.default,remux:m.default},{demux:c.default,remux:m.default},{demux:g.default,remux:b.default}];for(var R in k){var A=k[R],S=A.demux.probe;if(S(e)){var L=this.remuxer=new A.remux(E,_,T,this.vendor);y=new A.demux(E,L,_,T),this.probe=S;break}}if(!y)return void E.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:&quot;no demux matching with content found&quot;});this.demuxer=y}var w=this.remuxer;(s||u)&amp;&amp;(y.resetInitSegment(r,i,a,f),w.resetInitSegment()),s&amp;&amp;(y.resetTimeStamp(),w.resetTimeStamp(v)),&quot;function&quot;==typeof y.setDecryptData&amp;&amp;y.setDecryptData(t),y.append(e,n,d,h)}}]),e}();r.default=T},{18:18,20:20,27:27,29:29,30:30,32:32,42:42,43:43}],23:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=e(22),n=i(a),s=e(32),o=i(s),l=e(50),u=e(1),d=i(u),f=function(e){var t=new d.default;t.trigger=function(e){for(var r=arguments.length,i=Array(r&gt;1?r-1:0),a=1;a&lt;r;a++)i[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var r=arguments.length,i=Array(r&gt;1?r-1:0),a=1;a&lt;r;a++)i[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(i))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener(&quot;message&quot;,function(i){var a=i.data;switch(a.cmd){case&quot;init&quot;:var s=JSON.parse(a.config);e.demuxer=new n.default(t,a.typeSupported,s,a.vendor);try{(0,l.enableLogs)(s.debug===!0)}catch(e){}r(&quot;init&quot;,null);break;case&quot;demux&quot;:e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),t.on(o.default.FRAG_DECRYPTED,r),t.on(o.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(o.default.FRAG_PARSED,r),t.on(o.default.ERROR,r),t.on(o.default.FRAG_PARSING_METADATA,r),t.on(o.default.FRAG_PARSING_USERDATA,r),t.on(o.default.INIT_PTS_FOUND,r),t.on(o.default.FRAG_PARSING_DATA,function(t,r){var i=[],a={event:t,data:r};r.data1&amp;&amp;(a.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&amp;&amp;(a.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),e.postMessage(a,i)})};r.default=f},{1:1,22:22,32:32,50:50}],24:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(32),o=i(s),l=e(22),u=i(l),d=e(23),f=i(d),c=e(50),h=e(30),g=e(1),v=i(g),p=function(){function t(r,i){a(this,t),this.hls=r,this.id=i;var n=this.observer=new v.default,s=r.config;n.trigger=function(e){for(var t=arguments.length,r=Array(t&gt;1?t-1:0),i=1;i&lt;t;i++)r[i-1]=arguments[i];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=Array(t&gt;1?t-1:0),i=1;i&lt;t;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[e].concat(r))};var l=function(e,t){t=t||{},t.frag=this.frag,t.id=this.id,r.trigger(e,t)}.bind(this);n.on(o.default.FRAG_DECRYPTED,l),n.on(o.default.FRAG_PARSING_INIT_SEGMENT,l),n.on(o.default.FRAG_PARSING_DATA,l),n.on(o.default.FRAG_PARSED,l),n.on(o.default.ERROR,l),n.on(o.default.FRAG_PARSING_METADATA,l),n.on(o.default.FRAG_PARSING_USERDATA,l),n.on(o.default.INIT_PTS_FOUND,l);var d={mp4:MediaSource.isTypeSupported(&quot;video/mp4&quot;),mpeg:MediaSource.isTypeSupported(&quot;audio/mpeg&quot;),mp3:MediaSource.isTypeSupported(&#39;audio/mp4; codecs=&quot;mp3&quot;&#39;)},g=navigator.vendor;if(s.enableWorker&amp;&amp;&quot;undefined&quot;!=typeof Worker){c.logger.log(&quot;demuxing in webworker&quot;);var p=void 0;try{var y=e(3);p=this.w=y(f.default),this.onwmsg=this.onWorkerMessage.bind(this),p.addEventListener(&quot;message&quot;,this.onwmsg),p.onerror=function(e){r.trigger(o.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:&quot;demuxerWorker&quot;,err:{message:e.message+&quot; (&quot;+e.filename+&quot;:&quot;+e.lineno+&quot;)&quot;}})},p.postMessage({cmd:&quot;init&quot;,typeSupported:d,vendor:g,id:i,config:JSON.stringify(s)})}catch(e){c.logger.error(&quot;error while initializing DemuxerWorker, fallback on DemuxerInline&quot;),p&amp;&amp;URL.revokeObjectURL(p.objectURL),this.demuxer=new u.default(n,d,s,g),this.w=void 0}}else this.demuxer=new u.default(n,d,s,g)}return n(t,[{key:&quot;destroy&quot;,value:function(){var e=this.w;if(e)e.removeEventListener(&quot;message&quot;,this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&amp;&amp;(t.destroy(),this.demuxer=null)}var r=this.observer;r&amp;&amp;(r.removeAllListeners(),this.observer=null)}},{key:&quot;push&quot;,value:function(e,t,r,i,a,n,s,o){var l=this.w,u=isNaN(a.startDTS)?a.start:a.startDTS,d=a.decryptdata,f=this.frag,h=!(f&amp;&amp;a.cc===f.cc),g=!(f&amp;&amp;a.level===f.level),v=f&amp;&amp;a.sn===f.sn+1,p=!g&amp;&amp;v;if(h&amp;&amp;c.logger.log(this.id+&quot;:discontinuity detected&quot;),g&amp;&amp;c.logger.log(this.id+&quot;:switch detected&quot;),this.frag=a,l)l.postMessage({cmd:&quot;demux&quot;,data:e,decryptdata:d,initSegment:t,audioCodec:r,videoCodec:i,timeOffset:u,discontinuity:h,trackSwitch:g,contiguous:p,duration:n,accurateTimeOffset:s,defaultInitPTS:o},[e]);else{var y=this.demuxer;y&amp;&amp;y.push(e,d,t,r,i,u,h,g,p,n,s,o)}}},{key:&quot;onWorkerMessage&quot;,value:function(e){var t=e.data,r=this.hls;switch(t.event){case&quot;init&quot;:URL.revokeObjectURL(this.w.objectURL);break;case o.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&amp;&amp;(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),t}();r.default=p},{1:1,22:22,23:23,3:3,30:30,32:32,50:50}],25:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=e(50),s=function(){function e(t){i(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return a(e,[{key:&quot;loadWord&quot;,value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error(&quot;no bytes available&quot;);i.set(e.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a}},{key:&quot;skipBits&quot;,value:function(e){var t;this.bitsAvailable&gt;e?(this.word&lt;&lt;=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e&gt;&gt;3,e-=t&gt;&gt;3,this.bytesAvailable-=t,this.loadWord(),this.word&lt;&lt;=e,this.bitsAvailable-=e)}},{key:&quot;readBits&quot;,value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word&gt;&gt;&gt;32-t;return e&gt;32&amp;&amp;n.logger.error(&quot;Cannot read more than 32 bits at a time&quot;),this.bitsAvailable-=t,this.bitsAvailable&gt;0?this.word&lt;&lt;=t:this.bytesAvailable&gt;0&amp;&amp;this.loadWord(),t=e-t,t&gt;0&amp;&amp;this.bitsAvailable?r&lt;&lt;t|this.readBits(t):r}},{key:&quot;skipLZ&quot;,value:function(){var e;for(e=0;e&lt;this.bitsAvailable;++e)if(0!=(this.word&amp;2147483648&gt;&gt;&gt;e))return this.word&lt;&lt;=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:&quot;skipUEG&quot;,value:function(){this.skipBits(1+this.skipLZ())}},{key:&quot;skipEG&quot;,value:function(){this.skipBits(1+this.skipLZ())}},{key:&quot;readUEG&quot;,value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:&quot;readEG&quot;,value:function(){var e=this.readUEG();return 1&amp;e?1+e&gt;&gt;&gt;1:-1*(e&gt;&gt;&gt;1)}},{key:&quot;readBoolean&quot;,value:function(){return 1===this.readBits(1)}},{key:&quot;readUByte&quot;,value:function(){return this.readBits(8)}},{key:&quot;readUShort&quot;,value:function(){return this.readBits(16)}},{key:&quot;readUInt&quot;,value:function(){return this.readBits(32)}},{key:&quot;skipScalingList&quot;,value:function(e){var t,r,i=8,a=8;for(t=0;t&lt;e;t++)0!==a&amp;&amp;(r=this.readEG(),a=(i+r+256)%256),i=0===a?i:a}},{key:&quot;readSPS&quot;,value:function(){var e,t,r,i,a,n,s,o=0,l=0,u=0,d=0,f=this.readUByte.bind(this),c=this.readBits.bind(this),h=this.readUEG.bind(this),g=this.readBoolean.bind(this),v=this.skipBits.bind(this),p=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(f(),e=f(),c(5),v(3),f(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var E=h();if(3===E&amp;&amp;v(1),y(),y(),v(1),g())for(n=3!==E?8:12,s=0;s&lt;n;s++)g()&amp;&amp;m(s&lt;6?16:64)}y();var b=h();if(0===b)h();else if(1===b)for(v(1),p(),p(),t=h(),s=0;s&lt;t;s++)p();y(),v(1),r=h(),i=h(),a=c(1),0===a&amp;&amp;v(1),v(1),g()&amp;&amp;(o=h(),l=h(),u=h(),d=h());var T=[1,1];if(g()&amp;&amp;g()){switch(f()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[f()&lt;&lt;8|f(),f()&lt;&lt;8|f()]}}return{width:Math.ceil(16*(r+1)-2*o-2*l),height:(2-a)*(i+1)*16-(a?2:4)*(u+d),pixelRatio:T}}},{key:&quot;readSliceType&quot;,value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();r.default=s},{50:50}],26:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=e(50),s=function(){function e(t){i(this,e),this._hasTimeStamp=!1;for(var r,a,s,o,l,u,d,f,c=0;;)if(d=this.readUTF(t,c,3),c+=3,&quot;ID3&quot;===d)c+=3,r=127&amp;t[c++],a=127&amp;t[c++],s=127&amp;t[c++],o=127&amp;t[c++],l=(r&lt;&lt;21)+(a&lt;&lt;14)+(s&lt;&lt;7)+o,u=c+l,this._parseID3Frames(t,c,u),c=u;else{if(&quot;3DI&quot;!==d)return c-=3,void((f=c)&amp;&amp;(this.hasTimeStamp||n.logger.warn(&quot;ID3 tag found, but no timestamp&quot;),this._length=f,this._payload=t.subarray(0,f)));c+=7,n.logger.log(&quot;3DI footer found, end: &quot;+c)}}return a(e,[{key:&quot;readUTF&quot;,value:function(e,t,r){var i=&quot;&quot;,a=t,n=t+r;do{i+=String.fromCharCode(e[a++])}while(a&lt;n);return i}},{key:&quot;_parseID3Frames&quot;,value:function(e,t,r){for(var i,a;t+8&lt;=r;)switch(i=this.readUTF(e,t,4),t+=4,e[t++]&lt;&lt;24+e[t++]&lt;&lt;16+e[t++]&lt;&lt;8+e[t++],e[t++]&lt;&lt;8+e[t++],t,i){case&quot;PRIV&quot;:if(&quot;com.apple.streaming.transportStreamTimestamp&quot;===this.readUTF(e,t,44)){t+=44,t+=4;var s=1&amp;e[t++];this._hasTimeStamp=!0,a=((e[t++]&lt;&lt;23)+(e[t++]&lt;&lt;15)+(e[t++]&lt;&lt;7)+e[t++])/45,s&amp;&amp;(a+=47721858.84),a=Math.round(a),n.logger.trace(&quot;ID3 timestamp found: &quot;+a),this._timeStamp=a}}}},{key:&quot;hasTimeStamp&quot;,get:function(){return this._hasTimeStamp}},{key:&quot;timeStamp&quot;,get:function(){return this._timeStamp}},{key:&quot;length&quot;,get:function(){return this._length}},{key:&quot;payload&quot;,get:function(){return this._payload}}]),e}();r.default=s},{50:50}],27:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=e(32),s=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(n),o=function(){function e(t,r){i(this,e),this.observer=t,this.remuxer=r}return a(e,[{key:&quot;resetTimeStamp&quot;,value:function(){}},{key:&quot;resetInitSegment&quot;,value:function(t,r,i,a){var n=this.initData=e.parseInitSegment(t),o={};n.audio&amp;&amp;(o.audio={container:&quot;audio/mp4&quot;,codec:r,initSegment:t}),n.video&amp;&amp;(o.video={container:&quot;video/mp4&quot;,codec:i,initSegment:t}),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}},{key:&quot;append&quot;,value:function(t,r,i,a){var n=this.initData,s=e.startDTS(n,t);this.remuxer.remux(n.audio,n.video,null,null,s,i,a,t)}},{key:&quot;destroy&quot;,value:function(){}}],[{key:&quot;probe&quot;,value:function(t){if(t.length&gt;=8){var r=e.bin2str(t.subarray(4,8));return[&quot;moof&quot;,&quot;ftyp&quot;,&quot;styp&quot;].indexOf(r)&gt;=0}return!1}},{key:&quot;bin2str&quot;,value:function(e){return String.fromCharCode.apply(null,e)}},{key:&quot;findBox&quot;,value:function(t,r){var i,a,n,s,o,l=[];if(!r.length)return null;for(i=0;i&lt;t.byteLength;)a=t[i]&lt;&lt;24,a|=t[i+1]&lt;&lt;16,a|=t[i+2]&lt;&lt;8,a|=t[i+3],n=e.bin2str(t.subarray(i+4,i+8)),s=a&gt;1?i+a:t.byteLength,n===r[0]&amp;&amp;(1===r.length?l.push(t.subarray(i+8,s)):(o=e.findBox(t.subarray(i+8,s),r.slice(1)),o.length&amp;&amp;(l=l.concat(o)))),i=s;return l}},{key:&quot;parseInitSegment&quot;,value:function(t){var r=[];return e.findBox(t,[&quot;moov&quot;,&quot;trak&quot;]).forEach(function(t){var i=e.findBox(t,[&quot;tkhd&quot;])[0];if(i){var a=i[0],n=0===a?12:20,s=i[n]&lt;&lt;24|i[n+1]&lt;&lt;16|i[n+2]&lt;&lt;8|i[n+3];s=s&lt;0?4294967296+s:s;var o=e.findBox(t,[&quot;mdia&quot;,&quot;mdhd&quot;])[0];if(o){a=o[0],n=0===a?12:20;var l=o[n]&lt;&lt;24|o[n+1]&lt;&lt;16|o[n+2]&lt;&lt;8|o[n+3],u=e.findBox(t,[&quot;mdia&quot;,&quot;hdlr&quot;])[0];if(u){var d=e.bin2str(u.subarray(8,12)),f={soun:&quot;audio&quot;,vide:&quot;video&quot;}[d];f&amp;&amp;(r[s]={timescale:l,type:f},r[f]={timescale:l,id:s})}}}}),r}},{key:&quot;startDTS&quot;,value:function(t,r){var i,a,n;return i=e.findBox(r,[&quot;moof&quot;,&quot;traf&quot;]),a=[].concat.apply([],i.map(function(r){return e.findBox(r,[&quot;tfhd&quot;]).map(function(i){var a,n,s;return a=i[4]&lt;&lt;24|i[5]&lt;&lt;16|i[6]&lt;&lt;8|i[7],n=t[a].timescale||9e4,s=e.findBox(r,[&quot;tfdt&quot;]).map(function(e){var t,r;return t=e[0],r=e[4]&lt;&lt;24|e[5]&lt;&lt;16|e[6]&lt;&lt;8|e[7],1===t&amp;&amp;(r*=Math.pow(2,32),r+=e[8]&lt;&lt;24|e[9]&lt;&lt;16|e[10]&lt;&lt;8|e[11]),r})[0],(s=s||1/0)/n})})),n=Math.min.apply(null,a),isFinite(n)?n:0}}]),e}();r.default=o},{32:32}],28:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=e(18),s=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(n),o=function(){function e(t,r,a,n){i(this,e),this.decryptdata=a,this.discardEPB=n,this.decrypter=new s.default(t,r)}return a(e,[{key:&quot;decryptBuffer&quot;,value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:&quot;decryptAacSample&quot;,value:function(e,t,r,i){var a=e[t].unit,n=a.subarray(16,a.length-a.length%16),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),o=this;this.decryptBuffer(s,function(n){n=new Uint8Array(n),a.set(n,16),i||o.decryptAacSamples(e,t+1,r)})}},{key:&quot;decryptAacSamples&quot;,value:function(e,t,r){for(;;t++){if(t&gt;=e.length)return void r();if(!(e[t].unit.length&lt;32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,i),!i)return}}}},{key:&quot;getAvcEncryptedData&quot;,value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,a=32;a&lt;=e.length-16;a+=160,i+=16)r.set(e.subarray(a,a+16),i);return r}},{key:&quot;getAvcDecryptedUnit&quot;,value:function(e,t){t=new Uint8Array(t);for(var r=0,i=32;i&lt;=e.length-16;i+=160,r+=16)e.set(t.subarray(r,r+16),i);return e}},{key:&quot;decryptAvcSample&quot;,value:function(e,t,r,i,a,n){var s=this.discardEPB(a.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,function(o){a.data=l.getAvcDecryptedUnit(s,o),n||l.decryptAvcSamples(e,t,r+1,i)})}},{key:&quot;decryptAvcSamples&quot;,value:function(e,t,r,i){for(;;t++,r=0){if(t&gt;=e.length)return void i();for(var a=e[t].units;!(r&gt;=a.length);r++){var n=a[r];if(!(n.length&lt;=48||1!==n.type&amp;&amp;5!==n.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,i,n,s),!s)return}}}}}]),e}();r.default=o},{18:18}],29:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(21),o=i(s),l=e(32),u=i(l),d=e(25),f=i(d),c=e(28),h=i(c),g=e(50),v=e(30),p=function(){function e(t,r,i,n){a(this,e),this.observer=t,this.config=i,this.typeSupported=n,this.remuxer=r,this.sampleAes=null}return n(e,[{key:&quot;setDecryptData&quot;,value:function(e){null!=e&amp;&amp;null!=e.key&amp;&amp;&quot;SAMPLE-AES&quot;===e.method?this.sampleAes=new h.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:&quot;resetInitSegment&quot;,value:function(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:&quot;video/mp2t&quot;,type:&quot;video&quot;,id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:&quot;video/mp2t&quot;,type:&quot;audio&quot;,id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:&quot;id3&quot;,id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:&quot;text&quot;,id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=i}},{key:&quot;resetTimeStamp&quot;,value:function(){}},{key:&quot;append&quot;,value:function(e,t,r,i){var a,n,s,o,l,d=e.length,f=!1;this.contiguous=r;var c=this.pmtParsed,h=this._avcTrack,p=this._audioTrack,y=this._id3Track,m=h.id,E=p.id,b=y.id,T=this._pmtId,_=h.pesData,k=p.pesData,R=y.pesData,A=this._parsePAT,S=this._parsePMT,L=this._parsePES,w=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),O=this._parseMPEGPES.bind(this),I=this._parseID3PES.bind(this);for(d-=d%188,a=0;a&lt;d;a+=188)if(71===e[a]){if(n=!!(64&amp;e[a+1]),s=((31&amp;e[a+1])&lt;&lt;8)+e[a+2],(48&amp;e[a+3])&gt;&gt;4&gt;1){if((o=a+5+e[a+4])===a+188)continue}else o=a+4;switch(s){case m:n&amp;&amp;(_&amp;&amp;(l=L(_))&amp;&amp;w(l,!1),_={data:[],size:0}),_&amp;&amp;(_.data.push(e.subarray(o,a+188)),_.size+=a+188-o);break;case E:n&amp;&amp;(k&amp;&amp;(l=L(k))&amp;&amp;(p.isAAC?D(l):O(l)),k={data:[],size:0}),k&amp;&amp;(k.data.push(e.subarray(o,a+188)),k.size+=a+188-o);break;case b:n&amp;&amp;(R&amp;&amp;(l=L(R))&amp;&amp;I(l),R={data:[],size:0}),R&amp;&amp;(R.data.push(e.subarray(o,a+188)),R.size+=a+188-o);break;case 0:n&amp;&amp;(o+=e[o]+1),T=this._pmtId=A(e,o);break;case T:n&amp;&amp;(o+=e[o]+1);var P=S(e,o,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);m=P.avc,m&gt;0&amp;&amp;(h.id=m),E=P.audio,E&gt;0&amp;&amp;(p.id=E,p.isAAC=P.isAAC),b=P.id3,b&gt;0&amp;&amp;(y.id=b),f&amp;&amp;!c&amp;&amp;(g.logger.log(&quot;reparse from beginning&quot;),f=!1,a=-188),c=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(u.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:&quot;TS packet did not start with 0x47&quot;});_&amp;&amp;(l=L(_))?(w(l,!0),h.pesData=null):h.pesData=_,k&amp;&amp;(l=L(k))?(p.isAAC?D(l):O(l),p.pesData=null):(k&amp;&amp;k.size&amp;&amp;g.logger.log(&quot;last AAC PES packet truncated,might overlap between fragments&quot;),p.pesData=k),R&amp;&amp;(l=L(R))?(I(l),y.pesData=null):y.pesData=R,null==this.sampleAes?this.remuxer.remux(p,h,y,this._txtTrack,t,r,i):this.decryptAndRemux(p,h,y,this._txtTrack,t,r,i)}},{key:&quot;decryptAndRemux&quot;,value:function(e,t,r,i,a,n,s){if(e.samples&amp;&amp;e.isAAC){var o=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){o.decryptAndRemuxAvc(e,t,r,i,a,n,s)})}else this.decryptAndRemuxAvc(e,t,r,i,a,n,s)}},{key:&quot;decryptAndRemuxAvc&quot;,value:function(e,t,r,i,a,n,s){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(e,t,r,i,a,n,s)})}else this.remuxer.remux(e,t,r,i,a,n,s)}},{key:&quot;destroy&quot;,value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:&quot;_parsePAT&quot;,value:function(e,t){return(31&amp;e[t+10])&lt;&lt;8|e[t+11]}},{key:&quot;_parsePMT&quot;,value:function(e,t,r,i){var a,n,s,o,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=(15&amp;e[t+1])&lt;&lt;8|e[t+2],n=t+3+a-4,s=(15&amp;e[t+10])&lt;&lt;8|e[t+11],t+=12+s;t&lt;n;){switch(o=(31&amp;e[t+1])&lt;&lt;8|e[t+2],e[t]){case 207:if(!i){g.logger.log(&quot;unkown stream type:&quot;+e[t]);break}case 15:l.audio===-1&amp;&amp;(l.audio=o);break;case 21:l.id3===-1&amp;&amp;(l.id3=o);break;case 219:if(!i){g.logger.log(&quot;unkown stream type:&quot;+e[t]);break}case 27:l.avc===-1&amp;&amp;(l.avc=o);break;case 3:case 4:r?l.audio===-1&amp;&amp;(l.audio=o,l.isAAC=!1):g.logger.log(&quot;MPEG audio found, not supported in this browser for now&quot;);break;case 36:g.logger.warn(&quot;HEVC stream type found, not supported for now&quot;);break;default:g.logger.log(&quot;unkown stream type:&quot;+e[t])}t+=5+((15&amp;e[t+3])&lt;&lt;8|e[t+4])}return l}},{key:&quot;_parsePES&quot;,value:function(e){var t,r,i,a,n,s,o,l,u=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length&lt;19&amp;&amp;d.length&gt;1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(t=d[0],1===(t[0]&lt;&lt;16)+(t[1]&lt;&lt;8)+t[2]){if((i=(t[4]&lt;&lt;8)+t[5])&amp;&amp;i&gt;e.size-6)return null;r=t[7],192&amp;r&amp;&amp;(s=536870912*(14&amp;t[9])+4194304*(255&amp;t[10])+16384*(254&amp;t[11])+128*(255&amp;t[12])+(254&amp;t[13])/2,</td>
      </tr>
      <tr>
        <td id="L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="LC5" class="blob-code blob-code-inner js-file-line">s&gt;4294967295&amp;&amp;(s-=8589934592),64&amp;r?(o=536870912*(14&amp;t[14])+4194304*(255&amp;t[15])+16384*(254&amp;t[16])+128*(255&amp;t[17])+(254&amp;t[18])/2,o&gt;4294967295&amp;&amp;(o-=8589934592),s-o&gt;54e5&amp;&amp;(g.logger.warn(Math.round((s-o)/9e4)+&quot;s delta between PTS and DTS, align them&quot;),s=o)):o=s),a=t[8],l=a+9,e.size-=l,n=new Uint8Array(e.size);for(var c=0,h=d.length;c&lt;h;c++){t=d[c];var v=t.byteLength;if(l){if(l&gt;v){l-=v;continue}t=t.subarray(l),v-=l,l=0}n.set(t,u),u+=v}return i&amp;&amp;(i-=a+3),{data:n,pts:s,dts:o,len:i}}return null}},{key:&quot;pushAccesUnit&quot;,value:function(e,t){if(e.units.length&amp;&amp;e.frame){var r=t.samples,i=r.length;!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&amp;&amp;(i||this.contiguous)?(e.id=i,r.push(e)):t.dropped++}e.debug.length&amp;&amp;g.logger.log(e.pts+&quot;/&quot;+e.dts+&quot;:&quot;+e.debug)}},{key:&quot;_parseAVCPES&quot;,value:function(e,t){var r,i,a,n=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),l=this.avcSample;e.data=null,o.forEach(function(t){switch(t.type){case 1:i=!0,l.frame=!0;var o=t.data;if(o.length&gt;4){var u=new f.default(o).readSliceType();2!==u&amp;&amp;4!==u&amp;&amp;7!==u&amp;&amp;9!==u||(l.key=!0)}break;case 5:i=!0,l||(l=n.avcSample=n._createAVCSample(!0,e.pts,e.dts,&quot;&quot;)),l.key=!0,l.frame=!0;break;case 6:i=!0,r=new f.default(n.discardEPB(t.data)),r.readUByte();for(var d=0,c=0,h=!1,g=0;!h&amp;&amp;r.bytesAvailable&gt;1;){d=0;do{g=r.readUByte(),d+=g}while(255===g);c=0;do{g=r.readUByte(),c+=g}while(255===g);if(4===d&amp;&amp;0!==r.bytesAvailable){h=!0;if(181===r.readUByte()){if(49===r.readUShort()){if(1195456820===r.readUInt()){if(3===r.readUByte()){var v=r.readUByte(),p=r.readUByte(),y=31&amp;v,m=[v,p];for(a=0;a&lt;y;a++)m.push(r.readUByte()),m.push(r.readUByte()),m.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:e.pts,bytes:m})}}}}}else if(c&lt;r.bytesAvailable)for(a=0;a&lt;c;a++)r.readUByte()}break;case 7:if(i=!0,!s.sps){r=new f.default(t.data);var E=r.readSPS();s.width=E.width,s.height=E.height,s.pixelRatio=E.pixelRatio,s.sps=[t.data],s.duration=n._duration;var b=t.data.subarray(1,4),T=&quot;avc1.&quot;;for(a=0;a&lt;3;a++){var _=b[a].toString(16);_.length&lt;2&amp;&amp;(_=&quot;0&quot;+_),T+=_}s.codec=T}break;case 8:i=!0,s.pps||(s.pps=[t.data]);break;case 9:i=!1,l&amp;&amp;n.pushAccesUnit(l,s),l=n.avcSample=n._createAVCSample(!1,e.pts,e.dts,&quot;&quot;);break;case 12:i=!1;break;default:i=!1,l&amp;&amp;(l.debug+=&quot;unknown NAL &quot;+t.type+&quot; &quot;)}if(l&amp;&amp;i){l.units.push(t)}}),t&amp;&amp;l&amp;&amp;(this.pushAccesUnit(l,s),this.avcSample=null)}},{key:&quot;_createAVCSample&quot;,value:function(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i}}},{key:&quot;_insertSampleInOrder&quot;,value:function(e,t){var r=e.length;if(r&gt;0){if(t.pts&gt;=e[r-1].pts)e.push(t);else for(var i=r-1;i&gt;=0;i--)if(t.pts&lt;e[i].pts){e.splice(i,0,t);break}}else e.push(t)}},{key:&quot;_getLastNalUnit&quot;,value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var r=this._avcTrack,i=r.samples;e=i[i.length-1]}if(e){var a=e.units;t=a[a.length-1]}return t}},{key:&quot;_parseAVCNALu&quot;,value:function(e){var t,r,i,a,n,s=0,o=e.byteLength,l=this._avcTrack,u=l.naluState||0,d=u,f=[],c=-1;for(u===-1&amp;&amp;(c=0,n=31&amp;e[0],u=0,s=1);s&lt;o;)if(t=e[s++],u)if(1!==u)if(t)if(1===t){if(c&gt;=0)i={data:e.subarray(c,s-u-1),type:n},f.push(i);else{var h=this._getLastNalUnit();if(h&amp;&amp;(d&amp;&amp;s&lt;=4-d&amp;&amp;h.state&amp;&amp;(h.data=h.data.subarray(0,h.data.byteLength-d)),(r=s-u-1)&gt;0)){var g=new Uint8Array(h.data.byteLength+r);g.set(h.data,0),g.set(e.subarray(0,r),h.data.byteLength),h.data=g}}s&lt;o?(a=31&amp;e[s],c=s,n=a,u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(c&gt;=0&amp;&amp;u&gt;=0&amp;&amp;(i={data:e.subarray(c,o),type:n,state:u},f.push(i)),0===f.length){var v=this._getLastNalUnit();if(v){var p=new Uint8Array(v.data.byteLength+e.byteLength);p.set(v.data,0),p.set(e,v.data.byteLength),v.data=p}}return l.naluState=u,f}},{key:&quot;discardEPB&quot;,value:function(e){for(var t,r,i=e.byteLength,a=[],n=1;n&lt;i-2;)0===e[n]&amp;&amp;0===e[n+1]&amp;&amp;3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;t=i-a.length,r=new Uint8Array(t);var s=0;for(n=0;n&lt;t;s++,n++)s===a[0]&amp;&amp;(s++,a.shift()),r[n]=e[s];return r}},{key:&quot;_parseAACPES&quot;,value:function(e){var t,r,i,a,n,s,l,d,f,c=this._audioTrack,h=e.data,p=e.pts,y=this.aacOverFlow,m=this.aacLastPTS;if(y){var E=new Uint8Array(y.byteLength+h.byteLength);E.set(y,0),E.set(h,y.byteLength),h=E}for(n=0,d=h.length;n&lt;d-1&amp;&amp;(255!==h[n]||240!=(240&amp;h[n+1]));n++);if(n){var b,T;if(n&lt;d-1?(b=&quot;AAC PES did not start with ADTS header,offset:&quot;+n,T=!1):(b=&quot;no ADTS header found in AAC PES&quot;,T=!0),g.logger.warn(&quot;parsing error:&quot;+b),this.observer.trigger(u.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:T,reason:b}),T)return}if(!c.samplerate){var _=this.audioCodec;t=o.default.getAudioConfig(this.observer,h,n,_),c.config=t.config,c.samplerate=t.samplerate,c.channelCount=t.channelCount,c.codec=t.codec,c.manifestCodec=t.manifestCodec,c.duration=this._duration,g.logger.log(&quot;parsed codec:&quot;+c.codec+&quot;,rate:&quot;+t.samplerate+&quot;,nb channel:&quot;+t.channelCount)}if(a=0,i=9216e4/c.samplerate,y&amp;&amp;m){var k=m+i;Math.abs(k-p)&gt;1&amp;&amp;(g.logger.log(&quot;AAC: align PTS for overlapping frames by &quot;+Math.round((k-p)/90)),p=k)}for(;n+5&lt;d&amp;&amp;(s=1&amp;h[n+1]?7:9,r=(3&amp;h[n+3])&lt;&lt;11|h[n+4]&lt;&lt;3|(224&amp;h[n+5])&gt;&gt;&gt;5,(r-=s)&gt;0&amp;&amp;n+s+r&lt;=d);)for(l=p+a*i,f={unit:h.subarray(n+s,n+s+r),pts:l,dts:l},c.samples.push(f),c.len+=r,n+=r+s,a++;n&lt;d-1&amp;&amp;(255!==h[n]||240!=(240&amp;h[n+1]));n++);y=n&lt;d?h.subarray(n,d):null,this.aacOverFlow=y,this.aacLastPTS=l}},{key:&quot;_parseMPEGPES&quot;,value:function(e){for(var t,r=e.data,i=e.pts,a=r.length,n=0,s=0;s&lt;a&amp;&amp;(t=this._parseMpeg(r,s,a,n++,i))&gt;0;)s+=t}},{key:&quot;_onMpegFrame&quot;,value:function(e,t,r,i,a,n){var s=1152/r*1e3,o=n+a*s,l=this._audioTrack;l.config=[],l.channelCount=i,l.samplerate=r,l.duration=this._duration,l.samples.push({unit:e,pts:o,dts:o}),l.len+=e.length}},{key:&quot;_onMpegNoise&quot;,value:function(e){g.logger.warn(&quot;mpeg audio has noise: &quot;+e.length+&quot; bytes&quot;)}},{key:&quot;_parseMpeg&quot;,value:function(e,t,r,i,a){var n=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(t+2&gt;r)return-1;if(255===e[t]||224==(224&amp;e[t+1])){if(t+24&gt;r)return-1;var o=e[t+1]&gt;&gt;3&amp;3,l=e[t+1]&gt;&gt;1&amp;3,u=e[t+2]&gt;&gt;4&amp;15,d=e[t+2]&gt;&gt;2&amp;3,f=!!(2&amp;e[t+2]);if(1!==o&amp;&amp;0!==u&amp;&amp;15!==u&amp;&amp;3!==d){var c=3===o?3-l:3===l?3:4,h=1e3*n[14*c+u-1],g=3===o?0:2===o?1:2,v=s[3*g+d],p=f?1:0,y=e[t+3]&gt;&gt;6==3?1:2,m=3===l?(3===o?12:6)*h/v+p&lt;&lt;2:(3===o?144:72)*h/v+p|0;return t+m&gt;r?-1:(this._onMpegFrame&amp;&amp;this._onMpegFrame(e.subarray(t,t+m),h,v,y,i,a),m)}}for(var E=t+2;E&lt;r;){if(255===e[E-1]&amp;&amp;224==(224&amp;e[E]))return this._onMpegNoise&amp;&amp;this._onMpegNoise(e.subarray(t,E-1)),E-t-1;E++}return-1}},{key:&quot;_parseID3PES&quot;,value:function(e){this._id3Track.samples.push(e)}}],[{key:&quot;probe&quot;,value:function(e){return e.length&gt;=564&amp;&amp;71===e[0]&amp;&amp;71===e[188]&amp;&amp;71===e[376]}}]),e}();r.default=p},{21:21,25:25,28:28,30:30,32:32,50:50}],30:[function(e,t,r){&quot;use strict&quot;;Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});r.ErrorTypes={NETWORK_ERROR:&quot;networkError&quot;,MEDIA_ERROR:&quot;mediaError&quot;,MUX_ERROR:&quot;muxError&quot;,OTHER_ERROR:&quot;otherError&quot;},r.ErrorDetails={MANIFEST_LOAD_ERROR:&quot;manifestLoadError&quot;,MANIFEST_LOAD_TIMEOUT:&quot;manifestLoadTimeOut&quot;,MANIFEST_PARSING_ERROR:&quot;manifestParsingError&quot;,MANIFEST_INCOMPATIBLE_CODECS_ERROR:&quot;manifestIncompatibleCodecsError&quot;,LEVEL_LOAD_ERROR:&quot;levelLoadError&quot;,LEVEL_LOAD_TIMEOUT:&quot;levelLoadTimeOut&quot;,LEVEL_SWITCH_ERROR:&quot;levelSwitchError&quot;,AUDIO_TRACK_LOAD_ERROR:&quot;audioTrackLoadError&quot;,AUDIO_TRACK_LOAD_TIMEOUT:&quot;audioTrackLoadTimeOut&quot;,FRAG_LOAD_ERROR:&quot;fragLoadError&quot;,FRAG_LOOP_LOADING_ERROR:&quot;fragLoopLoadingError&quot;,FRAG_LOAD_TIMEOUT:&quot;fragLoadTimeOut&quot;,FRAG_DECRYPT_ERROR:&quot;fragDecryptError&quot;,FRAG_PARSING_ERROR:&quot;fragParsingError&quot;,REMUX_ALLOC_ERROR:&quot;remuxAllocError&quot;,KEY_LOAD_ERROR:&quot;keyLoadError&quot;,KEY_LOAD_TIMEOUT:&quot;keyLoadTimeOut&quot;,BUFFER_ADD_CODEC_ERROR:&quot;bufferAddCodecError&quot;,BUFFER_APPEND_ERROR:&quot;bufferAppendError&quot;,BUFFER_APPENDING_ERROR:&quot;bufferAppendingError&quot;,BUFFER_STALLED_ERROR:&quot;bufferStalledError&quot;,BUFFER_FULL_ERROR:&quot;bufferFullError&quot;,BUFFER_SEEK_OVER_HOLE:&quot;bufferSeekOverHole&quot;,BUFFER_NUDGE_ON_STALL:&quot;bufferNudgeOnStall&quot;,INTERNAL_EXCEPTION:&quot;internalException&quot;,WEBVTT_EXCEPTION:&quot;webVTTException&quot;}},{}],31:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:typeof e},n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(50),o=e(30),l=e(32),u=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(l),d=function(){function e(t){i(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,a=Array(r&gt;1?r-1:0),n=1;n&lt;r;n++)a[n-1]=arguments[n];this.handledEvents=a,this.useGenericHandler=!0,this.registerListeners()}return n(e,[{key:&quot;destroy&quot;,value:function(){this.unregisterListeners()}},{key:&quot;isEventHandler&quot;,value:function(){return&quot;object&quot;===a(this.handledEvents)&amp;&amp;this.handledEvents.length&amp;&amp;&quot;function&quot;==typeof this.onEvent}},{key:&quot;registerListeners&quot;,value:function(){this.isEventHandler()&amp;&amp;this.handledEvents.forEach(function(e){if(&quot;hlsEventGeneric&quot;===e)throw new Error(&quot;Forbidden event name: &quot;+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:&quot;unregisterListeners&quot;,value:function(){this.isEventHandler()&amp;&amp;this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:&quot;onEvent&quot;,value:function(e,t){this.onEventGeneric(e,t)}},{key:&quot;onEventGeneric&quot;,value:function(e,t){var r=function(e,t){var r=&quot;on&quot;+e.replace(&quot;hls&quot;,&quot;&quot;);if(&quot;function&quot;!=typeof this[r])throw new Error(&quot;Event &quot;+e+&quot; has no generic handler in this &quot;+this.constructor.name+&quot; class (tried &quot;+r+&quot;)&quot;);return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){s.logger.error(&quot;internal error happened while processing &quot;+e+&quot;:&quot;+t.message),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();r.default=d},{30:30,32:32,50:50}],32:[function(e,t,r){&quot;use strict&quot;;t.exports={MEDIA_ATTACHING:&quot;hlsMediaAttaching&quot;,MEDIA_ATTACHED:&quot;hlsMediaAttached&quot;,MEDIA_DETACHING:&quot;hlsMediaDetaching&quot;,MEDIA_DETACHED:&quot;hlsMediaDetached&quot;,BUFFER_RESET:&quot;hlsBufferReset&quot;,BUFFER_CODECS:&quot;hlsBufferCodecs&quot;,BUFFER_CREATED:&quot;hlsBufferCreated&quot;,BUFFER_APPENDING:&quot;hlsBufferAppending&quot;,BUFFER_APPENDED:&quot;hlsBufferAppended&quot;,BUFFER_EOS:&quot;hlsBufferEos&quot;,BUFFER_FLUSHING:&quot;hlsBufferFlushing&quot;,BUFFER_FLUSHED:&quot;hlsBufferFlushed&quot;,MANIFEST_LOADING:&quot;hlsManifestLoading&quot;,MANIFEST_LOADED:&quot;hlsManifestLoaded&quot;,MANIFEST_PARSED:&quot;hlsManifestParsed&quot;,LEVEL_SWITCH:&quot;hlsLevelSwitch&quot;,LEVEL_SWITCHING:&quot;hlsLevelSwitching&quot;,LEVEL_SWITCHED:&quot;hlsLevelSwitched&quot;,LEVEL_LOADING:&quot;hlsLevelLoading&quot;,LEVEL_LOADED:&quot;hlsLevelLoaded&quot;,LEVEL_UPDATED:&quot;hlsLevelUpdated&quot;,LEVEL_PTS_UPDATED:&quot;hlsLevelPtsUpdated&quot;,AUDIO_TRACKS_UPDATED:&quot;hlsAudioTracksUpdated&quot;,AUDIO_TRACK_SWITCH:&quot;hlsAudioTrackSwitch&quot;,AUDIO_TRACK_SWITCHING:&quot;hlsAudioTrackSwitching&quot;,AUDIO_TRACK_SWITCHED:&quot;hlsAudioTrackSwitched&quot;,AUDIO_TRACK_LOADING:&quot;hlsAudioTrackLoading&quot;,AUDIO_TRACK_LOADED:&quot;hlsAudioTrackLoaded&quot;,SUBTITLE_TRACKS_UPDATED:&quot;hlsSubtitleTracksUpdated&quot;,SUBTITLE_TRACK_SWITCH:&quot;hlsSubtitleTrackSwitch&quot;,SUBTITLE_TRACK_LOADING:&quot;hlsSubtitleTrackLoading&quot;,SUBTITLE_TRACK_LOADED:&quot;hlsSubtitleTrackLoaded&quot;,SUBTITLE_FRAG_PROCESSED:&quot;hlsSubtitleFragProcessed&quot;,INIT_PTS_FOUND:&quot;hlsInitPtsFound&quot;,FRAG_LOADING:&quot;hlsFragLoading&quot;,FRAG_LOAD_PROGRESS:&quot;hlsFragLoadProgress&quot;,FRAG_LOAD_EMERGENCY_ABORTED:&quot;hlsFragLoadEmergencyAborted&quot;,FRAG_LOADED:&quot;hlsFragLoaded&quot;,FRAG_DECRYPTED:&quot;hlsFragDecrypted&quot;,FRAG_PARSING_INIT_SEGMENT:&quot;hlsFragParsingInitSegment&quot;,FRAG_PARSING_USERDATA:&quot;hlsFragParsingUserdata&quot;,FRAG_PARSING_METADATA:&quot;hlsFragParsingMetadata&quot;,FRAG_PARSING_DATA:&quot;hlsFragParsingData&quot;,FRAG_PARSED:&quot;hlsFragParsed&quot;,FRAG_BUFFERED:&quot;hlsFragBuffered&quot;,FRAG_CHANGED:&quot;hlsFragChanged&quot;,FPS_DROP:&quot;hlsFpsDrop&quot;,FPS_DROP_LEVEL_CAPPING:&quot;hlsFpsDropLevelCapping&quot;,ERROR:&quot;hlsError&quot;,DESTROYING:&quot;hlsDestroying&quot;,KEY_LOADING:&quot;hlsKeyLoading&quot;,KEY_LOADED:&quot;hlsKeyLoaded&quot;,STREAM_STATE_TRANSITION:&quot;hlsStreamStateTransition&quot;}},{}],33:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=function(){function e(){i(this,e)}return a(e,null,[{key:&quot;getSilentFrame&quot;,value:function(e,t){switch(e){case&quot;mp4a.40.2&quot;:if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();r.default=n},{}],34:[function(e,t,r){&quot;use strict&quot;;var i={isBuffered:function(e,t){if(e)for(var r=e.buffered,i=0;i&lt;r.length;i++)if(t&gt;=r.start(i)&amp;&amp;t&lt;=r.end(i))return!0;return!1},bufferInfo:function(e,t,r){if(e){var i,a=e.buffered,n=[];for(i=0;i&lt;a.length;i++)n.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(n,t,r)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,r){var i,a,n,s,o,l=[];for(e.sort(function(e,t){var r=e.start-t.start;return r?r:t.end-e.end}),o=0;o&lt;e.length;o++){var u=l.length;if(u){var d=l[u-1].end;e[o].start-d&lt;r?e[o].end&gt;d&amp;&amp;(l[u-1].end=e[o].end):l.push(e[o])}else l.push(e[o])}for(o=0,i=0,a=n=t;o&lt;l.length;o++){var f=l[o].start,c=l[o].end;if(t+r&gt;=f&amp;&amp;t&lt;c)a=f,n=c,i=n-t;else if(t+r&lt;f){s=f;break}}return{len:i,start:a,end:n,nextStart:s}}};t.exports=i},{}],35:[function(e,t,r){&quot;use strict&quot;;var i=e(50),a={mergeDetails:function(e,t){var r,n=Math.max(e.startSN,t.startSN)-t.startSN,s=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,l=e.fragments,u=t.fragments,d=0;if(s&lt;n)return void(t.PTSKnown=!1);for(var f=n;f&lt;=s;f++){var c=l[o+f],h=u[f];h&amp;&amp;c&amp;&amp;(d=c.cc-h.cc,isNaN(c.startPTS)||(h.start=h.startPTS=c.startPTS,h.endPTS=c.endPTS,h.duration=c.duration,r=h))}if(d)for(i.logger.log(&quot;discontinuity sliding from playlist, take drift into account&quot;),f=0;f&lt;u.length;f++)u[f].cc+=d;if(r)a.updateFragPTSDTS(t,r.sn,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(o&gt;=0&amp;&amp;o&lt;l.length){var g=l[o].start;for(f=0;f&lt;u.length;f++)u[f].start+=g}t.PTSKnown=e.PTSKnown},updateFragPTSDTS:function(e,t,r,i,n,s){var o,l,u,d;if(!e||t&lt;e.startSN||t&gt;e.endSN)return 0;if(o=t-e.startSN,l=e.fragments,u=l[o],!isNaN(u.startPTS)){var f=Math.abs(u.startPTS-r);isNaN(u.deltaPTS)?u.deltaPTS=f:u.deltaPTS=Math.max(f,u.deltaPTS),r=Math.min(r,u.startPTS),i=Math.max(i,u.endPTS),n=Math.min(n,u.startDTS),s=Math.max(s,u.endDTS)}var c=r-u.start;for(u.start=u.startPTS=r,u.endPTS=i,u.startDTS=n,u.endDTS=s,u.duration=i-r,d=o;d&gt;0;d--)a.updatePTS(l,d,d-1);for(d=o;d&lt;l.length-1;d++)a.updatePTS(l,d,d+1);return e.PTSKnown=!0,c},updatePTS:function(e,t,r){var a=e[t],n=e[r],s=n.startPTS;isNaN(s)?n.start=r&gt;t?a.start+a.duration:a.start-n.duration:r&gt;t?(a.duration=s-a.start,a.duration&lt;0&amp;&amp;i.logger.warn(&quot;negative duration computed for frag &quot;+a.sn+&quot;,level &quot;+a.level+&quot;, there should be some duration drift between playlist and fragment!&quot;)):(n.duration=a.start-s,n.duration&lt;0&amp;&amp;i.logger.warn(&quot;negative duration computed for frag &quot;+n.sn+&quot;,level &quot;+n.level+&quot;, there should be some duration drift between playlist and fragment!&quot;))}};t.exports=a},{50:50}],36:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(2),o=i(s),l=e(32),u=i(l),d=e(30),f=e(40),c=i(f),h=e(38),g=i(h),v=e(39),p=i(v),y=e(12),m=i(y),E=e(11),b=i(E),T=e(50),_=e(1),k=i(_),R=e(4),A=function(){function e(){var t=this,r=arguments.length&gt;0&amp;&amp;void 0!==arguments[0]?arguments[0]:{};a(this,e);var i=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&amp;&amp;(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error(&quot;Illegal hls.js config: don&#39;t mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration&quot;);for(var n in i)n in r||(r[n]=i[n]);if(void 0!==r.liveMaxLatencyDurationCount&amp;&amp;r.liveMaxLatencyDurationCount&lt;=r.liveSyncDurationCount)throw new Error(&#39;Illegal hls.js config: &quot;liveMaxLatencyDurationCount&quot; must be gt &quot;liveSyncDurationCount&quot;&#39;);if(void 0!==r.liveMaxLatencyDuration&amp;&amp;(r.liveMaxLatencyDuration&lt;=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error(&#39;Illegal hls.js config: &quot;liveMaxLatencyDuration&quot; must be gt &quot;liveSyncDuration&quot;&#39;);(0,T.enableLogs)(r.debug),this.config=r,this._autoLevelCapping=-1;var s=this.observer=new k.default;s.trigger=function(e){for(var t=arguments.length,r=Array(t&gt;1?t-1:0),i=1;i&lt;t;i++)r[i-1]=arguments[i];s.emit.apply(s,[e,e].concat(r))},s.off=function(e){for(var t=arguments.length,r=Array(t&gt;1?t-1:0),i=1;i&lt;t;i++)r[i-1]=arguments[i];s.removeListener.apply(s,[e].concat(r))},this.on=s.on.bind(s),this.off=s.off.bind(s),this.trigger=s.trigger.bind(s);var o=this.abrController=new r.abrController(this),l=new r.bufferController(this),u=new r.capLevelController(this),d=new r.fpsController(this),f=new c.default(this),h=new g.default(this),v=new p.default(this),y=this.levelController=new b.default(this),E=this.streamController=new m.default(this),_=[y,E],R=r.audioStreamController;R&amp;&amp;_.push(new R(this)),this.networkControllers=_;var A=[f,h,v,o,l,u,d];if(R=r.audioTrackController){var S=new R(this);this.audioTrackController=S,A.push(S)}if(R=r.subtitleTrackController){var L=new R(this);this.subtitleTrackController=L,A.push(L)}[r.subtitleStreamController,r.timelineController].forEach(function(e){e&amp;&amp;A.push(new e(t))}),this.coreComponents=A}return n(e,null,[{key:&quot;isSupported&quot;,value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&amp;&amp;&quot;function&quot;==typeof window.MediaSource.isTypeSupported&amp;&amp;window.MediaSource.isTypeSupported(&#39;video/mp4; codecs=&quot;avc1.42E01E,mp4a.40.2&quot;&#39;)}},{key:&quot;version&quot;,get:function(){return&quot;0.7.5&quot;}},{key:&quot;Events&quot;,get:function(){return u.default}},{key:&quot;ErrorTypes&quot;,get:function(){return d.ErrorTypes}},{key:&quot;ErrorDetails&quot;,get:function(){return d.ErrorDetails}},{key:&quot;DefaultConfig&quot;,get:function(){return e.defaultConfig?e.defaultConfig:R.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),n(e,[{key:&quot;destroy&quot;,value:function(){T.logger.log(&quot;destroy&quot;),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:&quot;attachMedia&quot;,value:function(e){T.logger.log(&quot;attachMedia&quot;),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})}},{key:&quot;detachMedia&quot;,value:function(){T.logger.log(&quot;detachMedia&quot;),this.trigger(u.default.MEDIA_DETACHING),this.media=null}},{key:&quot;loadSource&quot;,value:function(e){e=o.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),T.logger.log(&quot;loadSource:&quot;+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})}},{key:&quot;startLoad&quot;,value:function(){var e=arguments.length&gt;0&amp;&amp;void 0!==arguments[0]?arguments[0]:-1;T.logger.log(&quot;startLoad(&quot;+e+&quot;)&quot;),this.networkControllers.forEach(function(t){t.startLoad(e)})}},{key:&quot;stopLoad&quot;,value:function(){T.logger.log(&quot;stopLoad&quot;),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:&quot;swapAudioCodec&quot;,value:function(){T.logger.log(&quot;swapAudioCodec&quot;),this.streamController.swapAudioCodec()}},{key:&quot;recoverMediaError&quot;,value:function(){T.logger.log(&quot;recoverMediaError&quot;);var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:&quot;levels&quot;,get:function(){return this.levelController.levels}},{key:&quot;currentLevel&quot;,get:function(){return this.streamController.currentLevel},set:function(e){T.logger.log(&quot;set currentLevel:&quot;+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:&quot;nextLevel&quot;,get:function(){return this.streamController.nextLevel},set:function(e){T.logger.log(&quot;set nextLevel:&quot;+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:&quot;loadLevel&quot;,get:function(){return this.levelController.level},set:function(e){T.logger.log(&quot;set loadLevel:&quot;+e),this.levelController.manualLevel=e}},{key:&quot;nextLoadLevel&quot;,get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:&quot;firstLevel&quot;,get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){T.logger.log(&quot;set firstLevel:&quot;+e),this.levelController.firstLevel=e}},{key:&quot;startLevel&quot;,get:function(){return this.levelController.startLevel},set:function(e){T.logger.log(&quot;set startLevel:&quot;+e);var t=this;e!==-1&amp;&amp;(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:&quot;autoLevelCapping&quot;,get:function(){return this._autoLevelCapping},set:function(e){T.logger.log(&quot;set autoLevelCapping:&quot;+e),this._autoLevelCapping=e}},{key:&quot;autoLevelEnabled&quot;,get:function(){return this.levelController.manualLevel===-1}},{key:&quot;manualLevel&quot;,get:function(){return this.levelController.manualLevel}},{key:&quot;minAutoLevel&quot;,get:function(){for(var e=this,t=e.levels,r=e.config.minAutoBitrate,i=t?t.length:0,a=0;a&lt;i;a++){if((t[a].realBitrate?Math.max(t[a].realBitrate,t[a].bitrate):t[a].bitrate)&gt;r)return a}return 0}},{key:&quot;maxAutoLevel&quot;,get:function(){var e=this,t=e.levels,r=e.autoLevelCapping;return r===-1&amp;&amp;t&amp;&amp;t.length?t.length-1:r}},{key:&quot;nextAutoLevel&quot;,get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:&quot;audioTracks&quot;,get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:&quot;audioTrack&quot;,get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&amp;&amp;(t.audioTrack=e)}},{key:&quot;liveSyncPosition&quot;,get:function(){return this.streamController.liveSyncPosition}},{key:&quot;subtitleTracks&quot;,get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:&quot;subtitleTrack&quot;,get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&amp;&amp;(t.subtitleTrack=e)}}]),e}();r.default=A},{1:1,11:11,12:12,2:2,30:30,32:32,38:38,39:39,4:4,40:40,50:50}],37:[function(e,t,r){&quot;use strict&quot;;t.exports=e(36).default},{36:36}],38:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(30),h=e(50),g=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.FRAG_LOADING));return r.loaders={},r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&amp;&amp;r.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:&quot;onFragLoading&quot;,value:function(e){var t=e.frag,r=t.type,i=this.loaders[r],a=this.hls.config;t.loaded=0,i&amp;&amp;(h.logger.warn(&quot;abort previous fragment loader for type:&quot;+r),i.abort()),i=this.loaders[r]=t.loader=void 0!==a.fLoader?new a.fLoader(a):new a.loader(a);var n=void 0,s=void 0,o=void 0;n={url:t.url,frag:t,responseType:&quot;arraybuffer&quot;,progressData:!1};var l=t.byteRangeStartOffset,u=t.byteRangeEndOffset;isNaN(l)||isNaN(u)||(n.rangeStart=l,n.rangeEnd=u),s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(n,s,o)}},{key:&quot;loadsuccess&quot;,value:function(e,t,r){var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:i,frag:a,stats:t})}},{key:&quot;loaderror&quot;,value:function(e,t){var r=t.loader;r&amp;&amp;r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:&quot;loadtimeout&quot;,value:function(e,t){var r=t.loader;r&amp;&amp;r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:&quot;loadprogress&quot;,value:function(e,t,r){var i=t.frag;i.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e})}}]),t}(f.default);r.default=g},{30:30,31:31,32:32,50:50}],39:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function n(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function s(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(32),u=i(l),d=e(31),f=i(d),c=e(30),h=e(50),g=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return s(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){for(var e in this.loaders){var t=this.loaders[e];t&amp;&amp;t.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:&quot;onKeyLoading&quot;,value:function(e){var t=e.frag,r=t.type,i=this.loaders[r],a=t.decryptdata,n=a.uri;if(n!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;i&amp;&amp;(h.logger.warn(&quot;abort previous key loader for type:&quot;+r),i.abort()),t.loader=this.loaders[r]=new s.loader(s),this.decrypturl=n,this.decryptkey=null;var o=void 0,l=void 0,d=void 0;o={url:n,frag:t,responseType:&quot;arraybuffer&quot;},l={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(o,l,d)}else this.decryptkey&amp;&amp;(a.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}},{key:&quot;loadsuccess&quot;,value:function(e,t,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(u.default.KEY_LOADED,{frag:i})}},{key:&quot;loaderror&quot;,value:function(e,t){var r=t.frag,i=r.loader;i&amp;&amp;i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:&quot;loadtimeout&quot;,value:function(e,t){var r=t.frag,i=r.loader;i&amp;&amp;i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),t}(f.default);r.default=g},{30:30,31:31,32:32,50:50}],40:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError(&quot;this hasn&#39;t been initialised - super() hasn&#39;t been called&quot;);return!t||&quot;object&quot;!=typeof t&amp;&amp;&quot;function&quot;!=typeof t?e:t}function n(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function, not &quot;+typeof t);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&amp;&amp;(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),l=e(2),u=i(l),d=e(32),f=i(d),c=e(31),h=i(c),g=e(30),v=e(44),p=i(v),y=e(50),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,E=/#EXT-X-MEDIA:(.*)/g,b=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,T=function(){function e(){s(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return o(e,[{key:&quot;uri&quot;,get:function(){return!this._uri&amp;&amp;this.reluri&amp;&amp;(this._uri=u.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),_=function(){function e(){s(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return o(e,[{key:&quot;createInitializationVector&quot;,value:function(e){for(var t=new Uint8Array(16),r=12;r&lt;16;r++)t[r]=e&gt;&gt;8*(15-r)&amp;255;return t}},{key:&quot;fragmentDecryptdataFromLevelkey&quot;,value:function(e,t){var r=e;return e&amp;&amp;e.method&amp;&amp;e.uri&amp;&amp;!e.iv&amp;&amp;(r=new T,r.method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:&quot;cloneObj&quot;,value:function(e){return JSON.parse(JSON.stringify(e))}},{key:&quot;url&quot;,get:function(){return!this._url&amp;&amp;this.relurl&amp;&amp;(this._url=u.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:&quot;programDateTime&quot;,get:function(){return!this._programDateTime&amp;&amp;this.rawProgramDateTime&amp;&amp;(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:&quot;byteRange&quot;,get:function(){if(!this._byteRange){var e=this._byteRange=[]</td>
      </tr>
      <tr>
        <td id="L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="LC6" class="blob-code blob-code-inner js-file-line">;if(this.rawByteRange){var t=this.rawByteRange.split(&quot;@&quot;,2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r?r:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:&quot;byteRangeStartOffset&quot;,get:function(){return this.byteRange[0]}},{key:&quot;byteRangeEndOffset&quot;,get:function(){return this.byteRange[1]}},{key:&quot;decryptdata&quot;,get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),k=function(e){function t(e){s(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f.default.MANIFEST_LOADING,f.default.LEVEL_LOADING,f.default.AUDIO_TRACK_LOADING,f.default.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return n(t,e),o(t,[{key:&quot;destroy&quot;,value:function(){for(var e in this.loaders){var t=this.loaders[e];t&amp;&amp;t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:&quot;onManifestLoading&quot;,value:function(e){this.load(e.url,{type:&quot;manifest&quot;})}},{key:&quot;onLevelLoading&quot;,value:function(e){this.load(e.url,{type:&quot;level&quot;,level:e.level,id:e.id})}},{key:&quot;onAudioTrackLoading&quot;,value:function(e){this.load(e.url,{type:&quot;audioTrack&quot;,id:e.id})}},{key:&quot;onSubtitleTrackLoading&quot;,value:function(e){this.load(e.url,{type:&quot;subtitleTrack&quot;,id:e.id})}},{key:&quot;load&quot;,value:function(e,t){var r=this.loaders[t.type];if(r){var i=r.context;if(i&amp;&amp;i.url===e)return void y.logger.trace(&quot;playlist request ongoing&quot;);y.logger.warn(&quot;abort previous loader for type:&quot;+t.type),r.abort()}var a=this.hls.config,n=void 0,s=void 0,o=void 0,l=void 0;&quot;manifest&quot;===t.type?(n=a.manifestLoadingMaxRetry,s=a.manifestLoadingTimeOut,o=a.manifestLoadingRetryDelay,l=a.manifestLoadingMaxRetryTimeout):(n=a.levelLoadingMaxRetry,s=a.levelLoadingTimeOut,o=a.levelLoadingRetryDelay,l=a.levelLoadingMaxRetryTimeout,y.logger.log(&quot;loading playlist for &quot;+t.type+&quot; &quot;+(t.level||t.id))),r=this.loaders[t.type]=t.loader=void 0!==a.pLoader?new a.pLoader(a):new a.loader(a),t.url=e,t.responseType=&quot;&quot;;var u=void 0,d=void 0;u={timeout:s,maxRetry:n,retryDelay:o,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,u,d)}},{key:&quot;resolve&quot;,value:function(e,t){return u.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:&quot;parseMasterPlaylist&quot;,value:function(e,t){var r=[],i=void 0;for(m.lastIndex=0;null!=(i=m.exec(e));){var a={},n=a.attrs=new p.default(i[1]);a.url=this.resolve(i[2],t);var s=n.decimalResolution(&quot;RESOLUTION&quot;);s&amp;&amp;(a.width=s.width,a.height=s.height),a.bitrate=n.decimalInteger(&quot;AVERAGE-BANDWIDTH&quot;)||n.decimalInteger(&quot;BANDWIDTH&quot;),a.name=n.NAME;var o=n.CODECS;if(o){o=o.split(/[ ,]+/);for(var l=0;l&lt;o.length;l++){var u=o[l];u.indexOf(&quot;avc1&quot;)!==-1?a.videoCodec=this.avc1toavcoti(u):a.audioCodec=u}}r.push(a)}return r}},{key:&quot;parseMasterPlaylistMedia&quot;,value:function(e,t,r){var i=void 0,a=[],n=0;for(E.lastIndex=0;null!=(i=E.exec(e));){var s={},o=new p.default(i[1]);o.TYPE===r&amp;&amp;(s.groupId=o[&quot;GROUP-ID&quot;],s.name=o.NAME,s.type=r,s.default=&quot;YES&quot;===o.DEFAULT,s.autoselect=&quot;YES&quot;===o.AUTOSELECT,s.forced=&quot;YES&quot;===o.FORCED,o.URI&amp;&amp;(s.url=this.resolve(o.URI,t)),s.lang=o.LANGUAGE,s.name||(s.name=s.lang),s.id=n++,a.push(s))}return a}},{key:&quot;avc1toavcoti&quot;,value:function(e){var t,r=e.split(&quot;.&quot;);return r.length&gt;2?(t=r.shift()+&quot;.&quot;,t+=parseInt(r.shift()).toString(16),t+=(&quot;000&quot;+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:&quot;parseLevelPlaylist&quot;,value:function(e,t,r,i){var a,n,s=0,o=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},u=new T,d=0,f=null,c=new _;for(b.lastIndex=0;null!==(a=b.exec(e));){var h=a[1];if(h){c.duration=parseFloat(h);var g=(&quot; &quot;+a[2]).slice(1);c.title=g?g:null,c.tagList.push(g?[&quot;INF&quot;,h,g]:[&quot;INF&quot;,h])}else if(a[3]){if(!isNaN(c.duration)){var v=s++;c.type=i,c.start=o,c.levelkey=u,c.sn=v,c.level=r,c.cc=d,c.baseurl=t,c.relurl=(&quot; &quot;+a[3]).slice(1),l.fragments.push(c),f=c,o+=c.duration,c=new _}}else if(a[4]){if(c.rawByteRange=(&quot; &quot;+a[4]).slice(1),f){var m=f.byteRangeEndOffset;m&amp;&amp;(c.lastByteRangeEndOffset=m)}}else if(a[5])c.rawProgramDateTime=(&quot; &quot;+a[5]).slice(1),c.tagList.push([&quot;PROGRAM-DATE-TIME&quot;,c.rawProgramDateTime]);else{for(a=a[0].match(/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/),n=1;n&lt;a.length&amp;&amp;void 0===a[n];n++);var E=(&quot; &quot;+a[n+1]).slice(1),k=(&quot; &quot;+a[n+2]).slice(1);switch(a[n]){case&quot;#&quot;:c.tagList.push(k?[E,k]:[E]);break;case&quot;PLAYLIST-TYPE&quot;:l.type=E.toUpperCase();break;case&quot;MEDIA-SEQUENCE&quot;:s=l.startSN=parseInt(E);break;case&quot;TARGETDURATION&quot;:l.targetduration=parseFloat(E);break;case&quot;VERSION&quot;:l.version=parseInt(E);break;case&quot;EXTM3U&quot;:break;case&quot;ENDLIST&quot;:l.live=!1;break;case&quot;DIS&quot;:d++,c.tagList.push([&quot;DIS&quot;]);break;case&quot;DISCONTINUITY-SEQ&quot;:d=parseInt(E);break;case&quot;KEY&quot;:var R=E,A=new p.default(R),S=A.enumeratedString(&quot;METHOD&quot;),L=A.URI,w=A.hexadecimalInteger(&quot;IV&quot;);S&amp;&amp;(u=new T,L&amp;&amp;[&quot;AES-128&quot;,&quot;SAMPLE-AES&quot;].indexOf(S)&gt;=0&amp;&amp;(u.method=S,u.baseuri=t,u.reluri=L,u.key=null,u.iv=w));break;case&quot;START&quot;:var D=E,O=new p.default(D),I=O.decimalFloatingPoint(&quot;TIME-OFFSET&quot;);isNaN(I)||(l.startTimeOffset=I);break;case&quot;MAP&quot;:var P=new p.default(E);c.relurl=P.URI,c.rawByteRange=P.BYTERANGE,c.baseurl=t,c.level=r,c.type=i,c.sn=&quot;initSegment&quot;,l.initSegment=c,c=new _;break;default:y.logger.warn(&quot;line parsed but not handled: &quot;+a)}}}return c=f,c&amp;&amp;!c.relurl&amp;&amp;(l.fragments.pop(),o-=c.duration),l.totalduration=o,l.averagetargetduration=o/l.fragments.length,l.endSN=s-1,l}},{key:&quot;loadsuccess&quot;,value:function(e,t,r){var i=e.data,a=e.url,n=r.type,s=r.id,o=r.level,l=this.hls;if(this.loaders[n]=void 0,void 0!==a&amp;&amp;0!==a.indexOf(&quot;data:&quot;)||(a=r.url),t.tload=performance.now(),0===i.indexOf(&quot;#EXTM3U&quot;))if(i.indexOf(&quot;#EXTINF:&quot;)&gt;0){var u=&quot;audioTrack&quot;!==n&amp;&amp;&quot;subtitleTrack&quot;!==n,d=isNaN(o)?isNaN(s)?0:s:o,c=this.parseLevelPlaylist(i,a,d,&quot;audioTrack&quot;===n?&quot;audio&quot;:&quot;subtitleTrack&quot;===n?&quot;subtitle&quot;:&quot;main&quot;);c.tload=t.tload,&quot;manifest&quot;===n&amp;&amp;l.trigger(f.default.MANIFEST_LOADED,{levels:[{url:a,details:c}],audioTracks:[],url:a,stats:t}),t.tparsed=performance.now(),c.targetduration?u?l.trigger(f.default.LEVEL_LOADED,{details:c,level:o||0,id:s||0,stats:t}):&quot;audioTrack&quot;===n?l.trigger(f.default.AUDIO_TRACK_LOADED,{details:c,id:s,stats:t}):&quot;subtitleTrack&quot;===n&amp;&amp;l.trigger(f.default.SUBTITLE_TRACK_LOADED,{details:c,id:s,stats:t}):l.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:&quot;invalid targetduration&quot;})}else{var h=this.parseMasterPlaylist(i,a);if(h.length){var v=this.parseMasterPlaylistMedia(i,a,&quot;AUDIO&quot;),p=this.parseMasterPlaylistMedia(i,a,&quot;SUBTITLES&quot;);if(v.length){var m=!1;v.forEach(function(e){e.url||(m=!0)}),m===!1&amp;&amp;h[0].audioCodec&amp;&amp;!h[0].attrs.AUDIO&amp;&amp;(y.logger.log(&quot;audio codec signaled in quality level, but no embedded audio track signaled, create one&quot;),v.unshift({type:&quot;main&quot;,name:&quot;main&quot;}))}l.trigger(f.default.MANIFEST_LOADED,{levels:h,audioTracks:v,subtitles:p,url:a,stats:t})}else l.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:&quot;no level found in manifest&quot;})}else l.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:&quot;no EXTM3U delimiter&quot;})}},{key:&quot;loaderror&quot;,value:function(e,t){var r,i,a=t.loader;switch(t.type){case&quot;manifest&quot;:r=g.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case&quot;level&quot;:r=g.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case&quot;audioTrack&quot;:r=g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1}a&amp;&amp;(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:r,fatal:i,url:a.url,loader:a,response:e,context:t})}},{key:&quot;loadtimeout&quot;,value:function(e,t){var r,i,a=t.loader;switch(t.type){case&quot;manifest&quot;:r=g.ErrorDetails.MANIFEST_LOAD_TIMEOUT,i=!0;break;case&quot;level&quot;:r=g.ErrorDetails.LEVEL_LOAD_TIMEOUT,i=!1;break;case&quot;audioTrack&quot;:r=g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}a&amp;&amp;(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:r,fatal:i,url:a.url,loader:a,context:t})}}]),t}(h.default);r.default=k},{2:2,30:30,31:31,32:32,44:44,50:50}],41:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=Math.pow(2,32)-1,s=function(){function e(){i(this,e)}return a(e,null,[{key:&quot;init&quot;,value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],&quot;.mp3&quot;:[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&amp;&amp;(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))}},{key:&quot;box&quot;,value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),i=8,a=r.length,n=a;a--;)i+=r[a].byteLength;for(t=new Uint8Array(i),t[0]=i&gt;&gt;24&amp;255,t[1]=i&gt;&gt;16&amp;255,t[2]=i&gt;&gt;8&amp;255,t[3]=255&amp;i,t.set(e,4),a=0,i=8;a&lt;n;a++)t.set(r[a],i),i+=r[a].byteLength;return t}},{key:&quot;hdlr&quot;,value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:&quot;mdat&quot;,value:function(t){return e.box(e.types.mdat,t)}},{key:&quot;mdhd&quot;,value:function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t&gt;&gt;24&amp;255,t&gt;&gt;16&amp;255,t&gt;&gt;8&amp;255,255&amp;t,i&gt;&gt;24,i&gt;&gt;16&amp;255,i&gt;&gt;8&amp;255,255&amp;i,a&gt;&gt;24,a&gt;&gt;16&amp;255,a&gt;&gt;8&amp;255,255&amp;a,85,196,0,0]))}},{key:&quot;mdia&quot;,value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:&quot;mfhd&quot;,value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t&gt;&gt;24,t&gt;&gt;16&amp;255,t&gt;&gt;8&amp;255,255&amp;t]))}},{key:&quot;minf&quot;,value:function(t){return&quot;audio&quot;===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:&quot;moof&quot;,value:function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))}},{key:&quot;moov&quot;,value:function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))}},{key:&quot;mvex&quot;,value:function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))}},{key:&quot;mvhd&quot;,value:function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t&gt;&gt;24&amp;255,t&gt;&gt;16&amp;255,t&gt;&gt;8&amp;255,255&amp;t,i&gt;&gt;24,i&gt;&gt;16&amp;255,i&gt;&gt;8&amp;255,255&amp;i,a&gt;&gt;24,a&gt;&gt;16&amp;255,a&gt;&gt;8&amp;255,255&amp;a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,s)}},{key:&quot;sdtp&quot;,value:function(t){var r,i,a=t.samples||[],n=new Uint8Array(4+a.length);for(i=0;i&lt;a.length;i++)r=a[i].flags,n[i+4]=r.dependsOn&lt;&lt;4|r.isDependedOn&lt;&lt;2|r.hasRedundancy;return e.box(e.types.sdtp,n)}},{key:&quot;stbl&quot;,value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:&quot;avc1&quot;,value:function(t){var r,i,a,n=[],s=[];for(r=0;r&lt;t.sps.length;r++)i=t.sps[r],a=i.byteLength,n.push(a&gt;&gt;&gt;8&amp;255),n.push(255&amp;a),n=n.concat(Array.prototype.slice.call(i));for(r=0;r&lt;t.pps.length;r++)i=t.pps[r],a=i.byteLength,s.push(a&gt;&gt;&gt;8&amp;255),s.push(255&amp;a),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,d=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l&gt;&gt;8&amp;255,255&amp;l,u&gt;&gt;8&amp;255,255&amp;u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d&gt;&gt;24,d&gt;&gt;16&amp;255,d&gt;&gt;8&amp;255,255&amp;d,f&gt;&gt;24,f&gt;&gt;16&amp;255,f&gt;&gt;8&amp;255,255&amp;f])))}},{key:&quot;esds&quot;,value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:&quot;mp4a&quot;,value:function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r&gt;&gt;8&amp;255,255&amp;r,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:&quot;mp3&quot;,value:function(t){var r=t.samplerate;return e.box(e.types[&quot;.mp3&quot;],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r&gt;&gt;8&amp;255,255&amp;r,0,0]))}},{key:&quot;stsd&quot;,value:function(t){return&quot;audio&quot;===t.type?t.isAAC||&quot;mp3&quot;!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:&quot;tkhd&quot;,value:function(t){var r=t.id,i=t.duration*t.timescale,a=t.width,s=t.height,o=Math.floor(i/(n+1)),l=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r&gt;&gt;24&amp;255,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,255&amp;r,0,0,0,0,o&gt;&gt;24,o&gt;&gt;16&amp;255,o&gt;&gt;8&amp;255,255&amp;o,l&gt;&gt;24,l&gt;&gt;16&amp;255,l&gt;&gt;8&amp;255,255&amp;l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a&gt;&gt;8&amp;255,255&amp;a,0,0,s&gt;&gt;8&amp;255,255&amp;s,0,0]))}},{key:&quot;traf&quot;,value:function(t,r){var i=e.sdtp(t),a=t.id,s=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a&gt;&gt;24,a&gt;&gt;16&amp;255,a&gt;&gt;8&amp;255,255&amp;a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,s&gt;&gt;24,s&gt;&gt;16&amp;255,s&gt;&gt;8&amp;255,255&amp;s,o&gt;&gt;24,o&gt;&gt;16&amp;255,o&gt;&gt;8&amp;255,255&amp;o])),e.trun(t,i.length+16+20+8+16+8+8),i)}},{key:&quot;trak&quot;,value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:&quot;trex&quot;,value:function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r&gt;&gt;24,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,255&amp;r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:&quot;trun&quot;,value:function(t,r){var i,a,n,s,o,l,u=t.samples||[],d=u.length,f=12+16*d,c=new Uint8Array(f);for(r+=8+f,c.set([0,0,15,1,d&gt;&gt;&gt;24&amp;255,d&gt;&gt;&gt;16&amp;255,d&gt;&gt;&gt;8&amp;255,255&amp;d,r&gt;&gt;&gt;24&amp;255,r&gt;&gt;&gt;16&amp;255,r&gt;&gt;&gt;8&amp;255,255&amp;r],0),i=0;i&lt;d;i++)a=u[i],n=a.duration,s=a.size,o=a.flags,l=a.cts,c.set([n&gt;&gt;&gt;24&amp;255,n&gt;&gt;&gt;16&amp;255,n&gt;&gt;&gt;8&amp;255,255&amp;n,s&gt;&gt;&gt;24&amp;255,s&gt;&gt;&gt;16&amp;255,s&gt;&gt;&gt;8&amp;255,255&amp;s,o.isLeading&lt;&lt;2|o.dependsOn,o.isDependedOn&lt;&lt;6|o.hasRedundancy&lt;&lt;4|o.paddingValue&lt;&lt;1|o.isNonSync,61440&amp;o.degradPrio,15&amp;o.degradPrio,l&gt;&gt;&gt;24&amp;255,l&gt;&gt;&gt;16&amp;255,l&gt;&gt;&gt;8&amp;255,255&amp;l],12+16*i);return e.box(e.types.trun,c)}},{key:&quot;initSegment&quot;,value:function(t){e.types||e.init();var r,i=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+i.byteLength),r.set(e.FTYP),r.set(i,e.FTYP.byteLength),r}}]),e}();r.default=s},{}],42:[function(e,t,r){&quot;use strict&quot;;function i(e){return e&amp;&amp;e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var n=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),s=e(33),o=i(s),l=e(32),u=i(l),d=e(50),f=e(41),c=i(f),h=e(30),g=function(){function e(t,r,i,n){a(this,e),this.observer=t,this.config=r,this.typeSupported=i;var s=navigator.userAgent;this.isSafari=n&amp;&amp;n.indexOf(&quot;Apple&quot;)&gt;-1&amp;&amp;s&amp;&amp;!s.match(&quot;CriOS&quot;),this.ISGenerated=!1}return n(e,[{key:&quot;destroy&quot;,value:function(){}},{key:&quot;resetTimeStamp&quot;,value:function(e){this._initPTS=this._initDTS=e}},{key:&quot;resetInitSegment&quot;,value:function(){this.ISGenerated=!1}},{key:&quot;remux&quot;,value:function(e,t,r,i,a,n,s){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated)if(e.samples.length){var o=this.remuxAudio(e,a,n,s);if(t.samples.length){var l=void 0;o&amp;&amp;(l=o.endPTS-o.startPTS),this.remuxVideo(t,a,n,l)}}else{var d=void 0;t.samples.length&amp;&amp;(d=this.remuxVideo(t,a,n)),d&amp;&amp;e.codec&amp;&amp;this.remuxEmptyAudio(e,a,n,d)}r.samples.length&amp;&amp;this.remuxID3(r,a),i.samples.length&amp;&amp;this.remuxText(i,a),this.observer.trigger(u.default.FRAG_PARSED)}},{key:&quot;generateIS&quot;,value:function(e,t,r){var i,a,n=this.observer,s=e.samples,o=t.samples,l=this.typeSupported,f=&quot;audio/mp4&quot;,g={},v={tracks:g},p=void 0===this._initPTS;if(p&amp;&amp;(i=a=1/0),e.config&amp;&amp;s.length&amp;&amp;(e.timescale=e.samplerate,d.logger.log(&quot;audio sampling rate : &quot;+e.samplerate),e.isAAC||(l.mpeg?(f=&quot;audio/mpeg&quot;,e.codec=&quot;&quot;):l.mp3&amp;&amp;(e.codec=&quot;mp3&quot;)),g.audio={container:f,codec:e.codec,initSegment:!e.isAAC&amp;&amp;l.mpeg?new Uint8Array:c.default.initSegment([e]),metadata:{channelCount:e.channelCount}},p&amp;&amp;(i=a=s[0].pts-e.inputTimeScale*r)),t.sps&amp;&amp;t.pps&amp;&amp;o.length){var y=t.inputTimeScale;t.timescale=y,g.video={container:&quot;video/mp4&quot;,codec:t.codec,initSegment:c.default.initSegment([t]),metadata:{width:t.width,height:t.height}},p&amp;&amp;(i=Math.min(i,o[0].pts-y*r),a=Math.min(a,o[0].dts-y*r),this.observer.trigger(u.default.INIT_PTS_FOUND,{initPTS:i}))}Object.keys(g).length?(n.trigger(u.default.FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,p&amp;&amp;(this._initPTS=i,this._initDTS=a)):n.trigger(u.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:&quot;no audio/video samples found&quot;})}},{key:&quot;remuxVideo&quot;,value:function(e,t,r,i){var a,n,s,o,l,f,g,v=8,p=e.timescale,y=e.samples,m=[],E=y.length,b=this._PTSNormalize,T=this._initDTS;y.sort(function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r?r:i?i:e.id-t.id});var _=y.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(_&lt;0){d.logger.warn(&quot;PTS &lt; DTS detected in video samples, shifting DTS by &quot;+Math.round(_/90)+&quot; ms to overcome this issue&quot;);for(var k=0;k&lt;y.length;k++)y[k].dts+=_}var R=void 0;R=r?this.nextAvcDts:t*p;var A=y[0];l=Math.max(b(A.dts-T,R),0),o=Math.max(b(A.pts-T,R),0);var S=Math.round((l-R)/90);r&amp;&amp;S&amp;&amp;(S&gt;1?d.logger.log(&quot;AVC:&quot;+S+&quot; ms hole between fragments detected,filling it&quot;):S&lt;-1&amp;&amp;d.logger.log(&quot;AVC:&quot;+-S+&quot; ms overlapping between fragments detected&quot;),l=R,y[0].dts=l+T,o=Math.max(o-S,R),y[0].pts=o+T,d.logger.log(&quot;Video/PTS/DTS adjusted: &quot;+Math.round(o/90)+&quot;/&quot;+Math.round(l/90)+&quot;,delta:&quot;+S+&quot; ms&quot;)),A=y[y.length-1],g=Math.max(b(A.dts-T,R),0),f=Math.max(b(A.pts-T,R),0),f=Math.max(f,g);var L=this.isSafari;L&amp;&amp;(a=Math.round((g-l)/(y.length-1)));for(var w=0,D=0,O=0;O&lt;E;O++){for(var I=y[O],P=I.units,C=P.length,x=0,F=0;F&lt;C;F++)x+=P[F].data.length;D+=x,w+=C,I.length=x,I.dts=L?l+O*a:Math.max(b(I.dts-T,R),l),I.pts=Math.max(b(I.pts-T,R),I.dts)}var M=D+4*w+8;try{n=new Uint8Array(M)}catch(e){return void this.observer.trigger(u.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:&quot;fail allocating video mdat &quot;+M})}var N=new DataView(n.buffer);N.setUint32(0,M),n.set(c.default.types.mdat,4);for(var U=0;U&lt;E;U++){for(var B=y[U],G=B.units,j=0,K=void 0,W=0,H=G.length;W&lt;H;W++){var V=G[W],Y=V.data,X=V.data.byteLength;N.setUint32(v,X),v+=4,n.set(Y,v),v+=X,j+=4+X}if(L)K=Math.max(0,a*Math.round((B.pts-B.dts)/a));else{if(U&lt;E-1)a=y[U+1].dts-B.dts;else{var q=this.config,z=B.dts-y[U&gt;0?U-1:U].dts;if(q.stretchShortVideoTrack){var Q=q.maxBufferHole,J=q.maxSeekHole,Z=Math.floor(Math.min(Q,J)*p),$=(i?o+i*p:this.nextAudioPts)-B.pts;$&gt;Z?(a=$-z,a&lt;0&amp;&amp;(a=z),d.logger.log(&quot;It is approximately &quot;+$/90+&quot; ms to the next segment; using duration &quot;+a/90+&quot; ms for the last video frame.&quot;)):a=z}else a=z}K=Math.round(B.pts-B.dts)}m.push({size:j,duration:a,cts:K,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=g+a;var ee=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,m.length&amp;&amp;navigator.userAgent.toLowerCase().indexOf(&quot;chrome&quot;)&gt;-1){var te=m[0].flags;te.dependsOn=2,te.isNonSync=0}e.samples=m,s=c.default.moof(e.sequenceNumber++,l,e),e.samples=[];var re={data1:s,data2:n,startPTS:o/p,endPTS:(f+a)/p,startDTS:l/p,endDTS:this.nextAvcDts/p,type:&quot;video&quot;,nb:m.length,dropped:ee};return this.observer.trigger(u.default.FRAG_PARSING_DATA,re),re}},{key:&quot;remuxAudio&quot;,value:function(e,t,r,i){var a,n,s,l,f,g,v,p,y,m,E,b,T,_,k,R,A=e.inputTimeScale,S=e.timescale,L=A/S,w=e.isAAC?1024:1152,D=w*L,O=this._PTSNormalize,I=this._initDTS,P=!e.isAAC&amp;&amp;this.typeSupported.mpeg,C=P?0:8,x=[],F=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),F=e.samples,R=this.nextAudioPts,r|=F.length&amp;&amp;R&amp;&amp;(Math.abs(t-R/A)&lt;.1||Math.abs(F[0].pts-R-I)&lt;20*D),r||(R=t*A),i&amp;&amp;e.isAAC)for(var M=0,N=R;M&lt;F.length;){var U=F[M],B=O(U.pts-I,R),G=B-N;if(G&lt;=-D)d.logger.warn(&quot;Dropping 1 audio frame @ &quot;+(N/A).toFixed(3)+&quot;s due to &quot;+Math.abs(1e3*G/A)+&quot; ms overlap.&quot;),F.splice(M,1),e.len-=U.unit.length;else if(G&gt;=D&amp;&amp;N){var j=Math.round(G/D);d.logger.warn(&quot;Injecting &quot;+j+&quot; audio frame @ &quot;+(N/A).toFixed(3)+&quot;s due to &quot;+1e3*G/A+&quot; ms gap.&quot;);for(var K=0;K&lt;j;K++)k=N+I,k=Math.max(k,I),_=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),_||(d.logger.log(&quot;Unable to get silent frame for given audio codec; duplicating last frame instead.&quot;),_=U.unit.subarray()),F.splice(M,0,{unit:_,pts:k,dts:k}),e.len+=_.length,N+=D,M+=1;U.pts=U.dts=N+I,N+=D,M+=1}else Math.abs(G),N+=D,U.pts=U.dts=0===M?I+R:F[M-1].pts+D,M+=1}for(var W=0,H=F.length;W&lt;H;W++){if(n=F[W],l=n.unit,m=n.pts-I,E=n.dts-I,void 0!==y)b=O(m,y),T=O(E,y),s.duration=Math.round((T-y)/L);else{b=O(m,R),T=O(E,R);var V=Math.round(1e3*(b-R)/A),Y=0;if(r&amp;&amp;e.isAAC&amp;&amp;V){if(V&gt;0)Y=Math.round((b-R)/D),d.logger.log(V+&quot; ms hole between AAC samples detected,filling it&quot;),Y&gt;0&amp;&amp;(_=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),_||(_=l.subarray()),e.len+=Y*_.length);else if(V&lt;-12){d.logger.log(-V+&quot; ms overlapping between AAC samples detected, drop frame&quot;),e.len-=l.byteLength;continue}b=T=R}if(v=Math.max(0,b),p=Math.max(0,T),!(e.len&gt;0))return;var X=P?e.len:e.len+8;try{f=new Uint8Array(X)}catch(e){return void this.observer.trigger(u.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:X,reason:&quot;fail allocating audio mdat &quot;+X})}P||(a=new DataView(f.buffer),a.setUint32(0,X),f.set(c.default.types.mdat,4));for(var q=0;q&lt;Y;q++)k=b-(Y-q)*D,_=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),_||(d.logger.log(&quot;Unable to get silent frame for given audio codec; duplicating this frame instead.&quot;),_=l.subarray()),f.set(_,C),C+=_.byteLength,s={size:_.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},x.push(s)}f.set(l,C);var z=l.byteLength;C+=z,s={size:z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},x.push(s),y=T}var Q=0,J=x.length;if(J&gt;=2&amp;&amp;(Q=x[J-2].duration,s.duration=Q),J){this.nextAudioPts=b+L*Q,e.len=0,e.samples=x,g=P?new Uint8Array:c.default.moof(e.sequenceNumber++,p/L,e),e.samples=[];var Z={data1:g,data2:f,startPTS:v/A,endPTS:this.nextAudioPts/A,startDTS:p/A,endDTS:(T+L*Q)/A,type:&quot;audio&quot;,nb:J};return this.observer.trigger(u.default.FRAG_PARSING_DATA,Z),Z}return null}},{key:&quot;remuxEmptyAudio&quot;,value:function(e,t,r,i){var a=e.inputTimeScale,n=e.samplerate?e.samplerate:a,s=a/n,l=this.nextAudioPts,u=(void 0!==l?l:i.startDTS*a)+this._initDTS,f=i.endDTS*a+this._initDTS,c=1024*s,h=Math.ceil((f-u)/c),g=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(d.logger.warn(&quot;remux empty Audio&quot;),!g)return void d.logger.trace(&quot;Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!&quot;);for(var v=[],p=0;p&lt;h;p++){var y=u+p*c;v.push({unit:g,pts:y,dts:y}),e.len+=g.length}e.samples=v,this.remuxAudio(e,t,r)}},{key:&quot;remuxID3&quot;,value:function(e,t){var r,i=e.samples.length,a=e.inputTimeScale,n=this._initPTS,s=this._initDTS;if(i){for(var o=0;o&lt;i;o++)r=e.samples[o],r.pts=(r.pts-n)/a,r.dts=(r.dts-s)/a;this.observer.trigger(u.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:&quot;remuxText&quot;,value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var r,i=e.samples.length,a=e.inputTimeScale,n=this._initPTS;if(i){for(var s=0;s&lt;i;s++)r=e.samples[s],r.pts=(r.pts-n)/a;this.observer.trigger(u.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:&quot;_PTSNormalize&quot;,value:function(e,t){var r;if(void 0===t)return e;for(r=t&lt;e?-8589934592:8589934592;Math.abs(e-t)&gt;4294967296;)e+=r;return e}}]),e}();r.default=g},{30:30,32:32,33:33,41:41,50:50}],43:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=e(32),s=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(n),o=function(){function e(t){i(this,e),this.observer=t}return a(e,[{key:&quot;destroy&quot;,value:function(){}},{key:&quot;resetTimeStamp&quot;,value:function(){}},{key:&quot;resetInitSegment&quot;,value:function(){}},{key:&quot;remux&quot;,value:function(e,t,r,i,a,n,o,l){var u=this.observer,d=&quot;&quot;;e&amp;&amp;(d+=&quot;audio&quot;),t&amp;&amp;(d+=&quot;video&quot;),u.trigger(s.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:d,nb:1,dropped:0}),u.trigger(s.default.FRAG_PARSED)}}]),e}();r.default=o},{32:32}],44:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=/^(\d+)x(\d+)$/,s=/\s*(.+?)\s*=((?:\&quot;.*?\&quot;)|.*?)(?:,|$)/g,o=function(){function e(t){i(this,e),&quot;string&quot;==typeof t&amp;&amp;(t=e.parseAttrList(t));for(var r in t)t.hasOwnProperty(r)&amp;&amp;(this[r]=t[r])}return a(e,[{key:&quot;decimalInteger&quot;,value:function(e){var t=parseInt(this[e],10);return t&gt;Number.MAX_SAFE_INTEGER?1/0:t}},{key:&quot;hexadecimalInteger&quot;,value:function(e){if(this[e]){var t=(this[e]||&quot;0x&quot;).slice(2);t=(1&amp;t.length?&quot;0&quot;:&quot;&quot;)+t;for(var r=new Uint8Array(t.length/2),i=0;i&lt;t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null}},{key:&quot;hexadecimalIntegerAsNumber&quot;,value:function(e){var t=parseInt(this[e],16);return t&gt;Number.MAX_SAFE_INTEGER?1/0:t}},{key:&quot;decimalFloatingPoint&quot;,value:function(e){return parseFloat(this[e])}},{key:&quot;enumeratedString&quot;,value:function(e){return this[e]}},{key:&quot;decimalResolution&quot;,value:function(e){var t=n.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:&quot;parseAttrList&quot;,value:function(e){var t,r={};for(s.lastIndex=0;null!==(t=s.exec(e));){var i=t[2];0===i.indexOf(&#39;&quot;&#39;)&amp;&amp;i.lastIndexOf(&#39;&quot;&#39;)===i.length-1&amp;&amp;(i=i.slice(1,-1)),r[t[1]]=i}return r}}]),e}();r.default=o},{}],45:[function(e,t,r){&quot;use strict&quot;;var i={search:function(e,t){for(var r=0,i=e.length-1,a=null,n=null;r&lt;=i;){a=(r+i)/2|0,n=e[a];var s=t(n);if(s&gt;0)r=a+1;else{if(!(s&lt;0))return n;i=a-1}}return null}};t.exports=i},{}],46:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=function(e){var t=e;return n.hasOwnProperty(e)&amp;&amp;(t=n[e]),String.fromCharCode(t)},o=15,l=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=[&quot;white&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;cyan&quot;,&quot;red&quot;,&quot;yellow&quot;,&quot;magenta&quot;,&quot;black&quot;,&quot;transparent&quot;],g={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},v=function(e){for(var t=[],r=0;r&lt;e.length;r++)t.push(e[r].toString(16));return t},p=function(){function e(t,r,a,n,s){i(this,e),this.foreground=t||&quot;white&quot;,this.underline=r||!1,this.italics=a||!1,this.background=n||&quot;black&quot;,this.flash=s||!1}return a(e,[{key:&quot;reset&quot;,value:function(){this.foreground=&quot;white&quot;,this.underline=!1,this.italics=!1,this.background=&quot;black&quot;,this.flash=!1}},{key:&quot;setStyles&quot;,value:function(e){for(var t=[&quot;foreground&quot;,&quot;underline&quot;,&quot;italics&quot;,&quot;background&quot;,&quot;flash&quot;],r=0;r&lt;t.length;r++){var i=t[r];e.hasOwnProperty(i)&amp;&amp;(this[i]=e[i])}}},{key:&quot;isDefault&quot;,value:function(){return&quot;white&quot;===this.foreground&amp;&amp;!this.underline&amp;&amp;!this.italics&amp;&amp;&quot;black&quot;===this.background&amp;&amp;!this.flash}},{key:&quot;equals&quot;,value:function(e){return this.foreground===e.foreground&amp;&amp;this.underline===e.underline&amp;&amp;this.italics===e.italics&amp;&amp;this.background===e.background&amp;&amp;this.flash===e.flash}},{key:&quot;copy&quot;,value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:&quot;toString&quot;,value:function(){return&quot;color=&quot;+this.foreground+&quot;, underline=&quot;+this.underline+&quot;, italics=&quot;+this.italics+&quot;, background=&quot;+this.background+&quot;, flash=&quot;+this.flash}}]),e}(),y=function(){function e(t,r,a,n,s,o){i(this,e),this.uchar=t||&quot; &quot;,this.penState=new p(r,a,n,s,o)}return a(e,[{key:&quot;reset&quot;,value:function(){this.uchar=&quot; &quot;,this.penState.reset()}},{key:&quot;setChar&quot;,value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:&quot;setPenState&quot;,value:function(e){this.penState.copy(e)}},{key:&quot;equals&quot;,value:function(e){return this.uchar===e.uchar&amp;&amp;this.penState.equals(e.penState)}},{key:&quot;copy&quot;,value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:&quot;isEmpty&quot;,value:function(){return&quot; &quot;===this.uchar&amp;&amp;this.penState.isDefault()}}]),e}(),m=function(){function e(){i(this,e),this.chars=[];for(var t=0;t&lt;l;t++)this.chars.push(new y);this.pos=0,this.currPenState=new p}return a(e,[{key:&quot;equals&quot;,value:function(e){for(var t=!0,r=0;r&lt;l;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{</td>
      </tr>
      <tr>
        <td id="L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="LC7" class="blob-code blob-code-inner js-file-line">key:&quot;copy&quot;,value:function(e){for(var t=0;t&lt;l;t++)this.chars[t].copy(e.chars[t])}},{key:&quot;isEmpty&quot;,value:function(){for(var e=!0,t=0;t&lt;l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:&quot;setCursor&quot;,value:function(e){this.pos!==e&amp;&amp;(this.pos=e),this.pos&lt;0?(g.log(&quot;ERROR&quot;,&quot;Negative cursor position &quot;+this.pos),this.pos=0):this.pos&gt;l&amp;&amp;(g.log(&quot;ERROR&quot;,&quot;Too large cursor position &quot;+this.pos),this.pos=l)}},{key:&quot;moveCursor&quot;,value:function(e){var t=this.pos+e;if(e&gt;1)for(var r=this.pos+1;r&lt;t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}},{key:&quot;backSpace&quot;,value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(&quot; &quot;,this.currPenState)}},{key:&quot;insertChar&quot;,value:function(e){e&gt;=144&amp;&amp;this.backSpace();var t=s(e);if(this.pos&gt;=l)return void g.log(&quot;ERROR&quot;,&quot;Cannot insert &quot;+e.toString(16)+&quot; (&quot;+t+&quot;) at position &quot;+this.pos+&quot;. Skipping it!&quot;);this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}},{key:&quot;clearFromPos&quot;,value:function(e){var t;for(t=e;t&lt;l;t++)this.chars[t].reset()}},{key:&quot;clear&quot;,value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:&quot;clearToEndOfRow&quot;,value:function(){this.clearFromPos(this.pos)}},{key:&quot;getTextString&quot;,value:function(){for(var e=[],t=!0,r=0;r&lt;l;r++){var i=this.chars[r].uchar;&quot; &quot;!==i&amp;&amp;(t=!1),e.push(i)}return t?&quot;&quot;:e.join(&quot;&quot;)}},{key:&quot;setPenStyles&quot;,value:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}]),e}(),E=function(){function e(){i(this,e),this.rows=[];for(var t=0;t&lt;o;t++)this.rows.push(new m);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return a(e,[{key:&quot;reset&quot;,value:function(){for(var e=0;e&lt;o;e++)this.rows[e].clear();this.currRow=o-1}},{key:&quot;equals&quot;,value:function(e){for(var t=!0,r=0;r&lt;o;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}},{key:&quot;copy&quot;,value:function(e){for(var t=0;t&lt;o;t++)this.rows[t].copy(e.rows[t])}},{key:&quot;isEmpty&quot;,value:function(){for(var e=!0,t=0;t&lt;o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:&quot;backSpace&quot;,value:function(){this.rows[this.currRow].backSpace()}},{key:&quot;clearToEndOfRow&quot;,value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:&quot;insertChar&quot;,value:function(e){this.rows[this.currRow].insertChar(e)}},{key:&quot;setPen&quot;,value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:&quot;moveCursor&quot;,value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:&quot;setCursor&quot;,value:function(e){g.log(&quot;INFO&quot;,&quot;setCursor: &quot;+e),this.rows[this.currRow].setCursor(e)}},{key:&quot;setPAC&quot;,value:function(e){g.log(&quot;INFO&quot;,&quot;pacData = &quot;+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&amp;&amp;t&lt;this.nrRollUpRows-1&amp;&amp;(t=this.nrRollUpRows-1),this.nrRollUpRows&amp;&amp;this.currRow!==t){for(var r=0;r&lt;o;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var n=a.rows[i].cueStartTime;if(n&amp;&amp;n&lt;g.time)for(var s=0;s&lt;this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(a.rows[i+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,d=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[d].penState.foreground}var f={foreground:e.color,underline:e.underline,italics:e.italics,background:&quot;black&quot;,flash:!1};this.setPen(f)}},{key:&quot;setBkgData&quot;,value:function(e){g.log(&quot;INFO&quot;,&quot;bkgData = &quot;+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:&quot;setRollUpRows&quot;,value:function(e){this.nrRollUpRows=e}},{key:&quot;rollUp&quot;,value:function(){if(null===this.nrRollUpRows)return void g.log(&quot;DEBUG&quot;,&quot;roll_up but nrRollUpRows not set yet&quot;);g.log(&quot;TEXT&quot;,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),g.log(&quot;INFO&quot;,&quot;Rolling up&quot;)}},{key:&quot;getDisplayText&quot;,value:function(e){e=e||!1;for(var t=[],r=&quot;&quot;,i=-1,a=0;a&lt;o;a++){var n=this.rows[a].getTextString();n&amp;&amp;(i=a+1,e?t.push(&quot;Row &quot;+i+&quot;: &#39;&quot;+n+&quot;&#39;&quot;):t.push(n.trim()))}return t.length&gt;0&amp;&amp;(r=e?&quot;[&quot;+t.join(&quot; | &quot;)+&quot;]&quot;:t.join(&quot;\n&quot;)),r}},{key:&quot;getTextAndFormat&quot;,value:function(){return this.rows}}]),e}(),b=function(){function e(t,r){i(this,e),this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new E,this.nonDisplayedMemory=new E,this.lastOutputScreen=new E,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return a(e,[{key:&quot;reset&quot;,value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:&quot;getHandler&quot;,value:function(){return this.outputFilter}},{key:&quot;setHandler&quot;,value:function(e){this.outputFilter=e}},{key:&quot;setPAC&quot;,value:function(e){this.writeScreen.setPAC(e)}},{key:&quot;setBkgData&quot;,value:function(e){this.writeScreen.setBkgData(e)}},{key:&quot;setMode&quot;,value:function(e){e!==this.mode&amp;&amp;(this.mode=e,g.log(&quot;INFO&quot;,&quot;MODE=&quot;+e),&quot;MODE_POP-ON&quot;===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),&quot;MODE_ROLL-UP&quot;!==this.mode&amp;&amp;(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:&quot;insertChars&quot;,value:function(e){for(var t=0;t&lt;e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?&quot;DISP&quot;:&quot;NON_DISP&quot;;g.log(&quot;INFO&quot;,r+&quot;: &quot;+this.writeScreen.getDisplayText(!0)),&quot;MODE_PAINT-ON&quot;!==this.mode&amp;&amp;&quot;MODE_ROLL-UP&quot;!==this.mode||(g.log(&quot;TEXT&quot;,&quot;DISPLAYED: &quot;+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:&quot;ccRCL&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;RCL - Resume Caption Loading&quot;),this.setMode(&quot;MODE_POP-ON&quot;)}},{key:&quot;ccBS&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;BS - BackSpace&quot;),&quot;MODE_TEXT&quot;!==this.mode&amp;&amp;(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&amp;&amp;this.outputDataUpdate())}},{key:&quot;ccAOF&quot;,value:function(){}},{key:&quot;ccAON&quot;,value:function(){}},{key:&quot;ccDER&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;DER- Delete to End of Row&quot;),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:&quot;ccRU&quot;,value:function(e){g.log(&quot;INFO&quot;,&quot;RU(&quot;+e+&quot;) - Roll Up&quot;),this.writeScreen=this.displayedMemory,this.setMode(&quot;MODE_ROLL-UP&quot;),this.writeScreen.setRollUpRows(e)}},{key:&quot;ccFON&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;FON - Flash On&quot;),this.writeScreen.setPen({flash:!0})}},{key:&quot;ccRDC&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;RDC - Resume Direct Captioning&quot;),this.setMode(&quot;MODE_PAINT-ON&quot;)}},{key:&quot;ccTR&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;TR&quot;),this.setMode(&quot;MODE_TEXT&quot;)}},{key:&quot;ccRTD&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;RTD&quot;),this.setMode(&quot;MODE_TEXT&quot;)}},{key:&quot;ccEDM&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;EDM - Erase Displayed Memory&quot;),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:&quot;ccCR&quot;,value:function(){g.log(&quot;CR - Carriage Return&quot;),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:&quot;ccENM&quot;,value:function(){g.log(&quot;INFO&quot;,&quot;ENM - Erase Non-displayed Memory&quot;),this.nonDisplayedMemory.reset()}},{key:&quot;ccEOC&quot;,value:function(){if(g.log(&quot;INFO&quot;,&quot;EOC - End Of Caption&quot;),&quot;MODE_POP-ON&quot;===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,g.log(&quot;TEXT&quot;,&quot;DISP: &quot;+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:&quot;ccTO&quot;,value:function(e){g.log(&quot;INFO&quot;,&quot;TO(&quot;+e+&quot;) - Tab Offset&quot;),this.writeScreen.moveCursor(e)}},{key:&quot;ccMIDROW&quot;,value:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e&gt;=46,t.italics)t.foreground=&quot;white&quot;;else{var r=Math.floor(e/2)-16,i=[&quot;white&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;cyan&quot;,&quot;red&quot;,&quot;yellow&quot;,&quot;magenta&quot;];t.foreground=i[r]}g.log(&quot;INFO&quot;,&quot;MIDROW: &quot;+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:&quot;outputDataUpdate&quot;,value:function(){var e=g.time;null!==e&amp;&amp;this.outputFilter&amp;&amp;(this.outputFilter.updateData&amp;&amp;this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&amp;&amp;this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:&quot;cueSplitAtTime&quot;,value:function(e){this.outputFilter&amp;&amp;(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&amp;&amp;this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),T=function(){function e(t,r,a){i(this,e),this.field=t||1,this.outputs=[r,a],this.channels=[new b(1,r),new b(2,a)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return a(e,[{key:&quot;getHandler&quot;,value:function(e){return this.channels[e].getHandler()}},{key:&quot;setHandler&quot;,value:function(e,t){this.channels[e].setHandler(t)}},{key:&quot;addData&quot;,value:function(e,t){var r,i,a,n=!1;this.lastTime=e,g.setTime(e);for(var s=0;s&lt;t.length;s+=2)if(i=127&amp;t[s],a=127&amp;t[s+1],0!==i||0!==a){if(g.log(&quot;DATA&quot;,&quot;[&quot;+v([t[s],t[s+1]])+&quot;] -&gt; (&quot;+v([i,a])+&quot;)&quot;),r=this.parseCmd(i,a),r||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&amp;&amp;(n=this.parseChars(i,a)))if(this.currChNr&amp;&amp;this.currChNr&gt;=0){var o=this.channels[this.currChNr-1];o.insertChars(n)}else g.log(&quot;WARNING&quot;,&quot;No channel found yet. TEXT-MODE?&quot;);r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,g.log(&quot;WARNING&quot;,&quot;Couldn&#39;t parse cleaned data &quot;+v([i,a])+&quot; orig: &quot;+v([t[s],t[s+1]])))}else this.dataCounters.padding+=2}},{key:&quot;parseCmd&quot;,value:function(e,t){var r=null,i=(20===e||28===e)&amp;&amp;32&lt;=t&amp;&amp;t&lt;=47,a=(23===e||31===e)&amp;&amp;33&lt;=t&amp;&amp;t&lt;=35;if(!i&amp;&amp;!a)return!1;if(e===this.lastCmdA&amp;&amp;t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,g.log(&quot;DEBUG&quot;,&quot;Repeated command (&quot;+v([e,t])+&quot;) is dropped&quot;),!0;r=20===e||23===e?1:2;var n=this.channels[r-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&amp;&amp;n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:&quot;parseMidrow&quot;,value:function(e,t){var r=null;if((17===e||25===e)&amp;&amp;32&lt;=t&amp;&amp;t&lt;=47){if((r=17===e?1:2)!==this.currChNr)return g.log(&quot;ERROR&quot;,&quot;Mismatch channel in midrow parsing&quot;),!1;return this.channels[r-1].ccMIDROW(t),g.log(&quot;DEBUG&quot;,&quot;MIDROW (&quot;+v([e,t])+&quot;)&quot;),!0}return!1}},{key:&quot;parsePAC&quot;,value:function(e,t){var r=null,i=null,a=(17&lt;=e&amp;&amp;e&lt;=23||25&lt;=e&amp;&amp;e&lt;=31)&amp;&amp;64&lt;=t&amp;&amp;t&lt;=127,n=(16===e||24===e)&amp;&amp;64&lt;=t&amp;&amp;t&lt;=95;if(!a&amp;&amp;!n)return!1;if(e===this.lastCmdA&amp;&amp;t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e&lt;=23?1:2,i=64&lt;=t&amp;&amp;t&lt;=95?1===r?u[e]:f[e]:1===r?d[e]:c[e];var s=this.interpretPAC(i,t);return this.channels[r-1].setPAC(s),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:&quot;interpretPAC&quot;,value:function(e,t){var r=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t&gt;95?t-96:t-64,i.underline=1==(1&amp;r),r&lt;=13?i.color=[&quot;white&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;cyan&quot;,&quot;red&quot;,&quot;yellow&quot;,&quot;magenta&quot;,&quot;white&quot;][Math.floor(r/2)]:r&lt;=15?(i.italics=!0,i.color=&quot;white&quot;):i.indent=4*Math.floor((r-16)/2),i}},{key:&quot;parseChars&quot;,value:function(e,t){var r=null,i=null,a=null;if(e&gt;=25?(r=2,a=e-8):(r=1,a=e),17&lt;=a&amp;&amp;a&lt;=19){var n=t;n=17===a?t+80:18===a?t+112:t+144,g.log(&quot;INFO&quot;,&quot;Special char &#39;&quot;+s(n)+&quot;&#39; in channel &quot;+r),i=[n]}else 32&lt;=e&amp;&amp;e&lt;=127&amp;&amp;(i=0===t?[e]:[e,t]);if(i){var o=v(i);g.log(&quot;DEBUG&quot;,&quot;Char codes =  &quot;+o.join(&quot;,&quot;)),this.lastCmdA=null,this.lastCmdB=null}return i}},{key:&quot;parseBackgroundAttributes&quot;,value:function(e,t){var r,i,a,n,s=(16===e||24===e)&amp;&amp;32&lt;=t&amp;&amp;t&lt;=47,o=(23===e||31===e)&amp;&amp;45&lt;=t&amp;&amp;t&lt;=47;return!(!s&amp;&amp;!o)&amp;&amp;(r={},16===e||24===e?(i=Math.floor((t-32)/2),r.background=h[i],t%2==1&amp;&amp;(r.background=r.background+&quot;_semi&quot;)):45===t?r.background=&quot;transparent&quot;:(r.foreground=&quot;black&quot;,47===t&amp;&amp;(r.underline=!0)),a=e&lt;24?1:2,n=this.channels[a-1],n.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:&quot;reset&quot;,value:function(){for(var e=0;e&lt;this.channels.length;e++)this.channels[e]&amp;&amp;this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:&quot;cueSplitAtTime&quot;,value:function(e){for(var t=0;t&lt;this.channels.length;t++)this.channels[t]&amp;&amp;this.channels[t].cueSplitAtTime(e)}}]),e}();r.default=T},{}],47:[function(e,t,r){&quot;use strict&quot;;var i=e(53),a={newCue:function(e,t,r,a){for(var n,s,o,l,u,d=window.VTTCue||window.TextTrackCue,f=0;f&lt;a.rows.length;f++)if(n=a.rows[f],o=!0,l=0,u=&quot;&quot;,!n.isEmpty()){for(var c=0;c&lt;n.chars.length;c++)n.chars[c].uchar.match(/\s/)&amp;&amp;o?l++:(u+=n.chars[c].uchar,o=!1);n.cueStartTime=t,t===r&amp;&amp;(r+=1e-4),s=new d(t,r,(0,i.fixLineBreaks)(u.trim())),l&gt;=16?l--:l++,navigator.userAgent.match(/Firefox\//)?s.line=f+1:s.line=f&gt;7?f-2:f+1,s.align=&quot;left&quot;,s.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(s)}}};t.exports=a},{53:53}],48:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=e(49),s=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(n),o=function(){function e(t,r,a,n){i(this,e),this.hls=t,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s.default(r),this.fast_=new s.default(a)}return a(e,[{key:&quot;sample&quot;,value:function(e,t){e=Math.max(e,this.minDelayMs_);var r=8e3*t/e,i=e/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)}},{key:&quot;canEstimate&quot;,value:function(){var e=this.fast_;return e&amp;&amp;e.getTotalWeight()&gt;=this.minWeight_}},{key:&quot;getEstimate&quot;,value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:&quot;destroy&quot;,value:function(){}}]),e}();r.default=o},{49:49}],49:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=function(){function e(t){i(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return a(e,[{key:&quot;sample&quot;,value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:&quot;getTotalWeight&quot;,value:function(){return this.totalWeight_}},{key:&quot;getEstimate&quot;,value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();r.default=n},{}],50:[function(e,t,r){&quot;use strict&quot;;function i(){}function a(e,t){return t=&quot;[&quot;+e+&quot;] &gt; &quot;+t}function n(e){var t=self.console[e];return t?function(){for(var r=arguments.length,i=Array(r),n=0;n&lt;r;n++)i[n]=arguments[n];i[0]&amp;&amp;(i[0]=a(e,i[0])),t.apply(self.console,i)}:i}function s(e){for(var t=arguments.length,r=Array(t&gt;1?t-1:0),i=1;i&lt;t;i++)r[i-1]=arguments[i];r.forEach(function(t){u[t]=e[t]?e[t].bind(e):n(t)})}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var o=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:typeof e},l={trace:i,debug:i,log:i,warn:i,info:i,error:i},u=l;r.enableLogs=function(e){if(e===!0||&quot;object&quot;===(void 0===e?&quot;undefined&quot;:o(e))){s(e,&quot;debug&quot;,&quot;log&quot;,&quot;info&quot;,&quot;warn&quot;,&quot;error&quot;);try{u.log()}catch(e){u=l}}else u=l},r.logger=u},{}],51:[function(e,t,r){&quot;use strict&quot;;var i={toString:function(e){for(var t=&quot;&quot;,r=e.length,i=0;i&lt;r;i++)t+=&quot;[&quot;+e.start(i).toFixed(3)+&quot;,&quot;+e.end(i).toFixed(3)+&quot;]&quot;;return t}};t.exports=i},{}],52:[function(e,t,r){&quot;use strict&quot;;Object.defineProperty(r,&quot;__esModule&quot;,{value:!0}),r.default=function(){function e(e){return&quot;string&quot;==typeof e&amp;&amp;(!!n[e.toLowerCase()]&amp;&amp;e.toLowerCase())}function t(e){return&quot;string&quot;==typeof e&amp;&amp;(!!s[e.toLowerCase()]&amp;&amp;e.toLowerCase())}function r(e){for(var t=1;t&lt;arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}function i(i,n,s){var o=this,l=function(){if(&quot;undefined&quot;!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?o=document.createElement(&quot;custom&quot;):u.enumerable=!0,o.hasBeenReset=!1;var d=&quot;&quot;,f=!1,c=i,h=n,g=s,v=null,p=&quot;&quot;,y=!0,m=&quot;auto&quot;,E=&quot;start&quot;,b=50,T=&quot;middle&quot;,_=50,k=&quot;middle&quot;;if(Object.defineProperty(o,&quot;id&quot;,r({},u,{get:function(){return d},set:function(e){d=&quot;&quot;+e}})),Object.defineProperty(o,&quot;pauseOnExit&quot;,r({},u,{get:function(){return f},set:function(e){f=!!e}})),Object.defineProperty(o,&quot;startTime&quot;,r({},u,{get:function(){return c},set:function(e){if(&quot;number&quot;!=typeof e)throw new TypeError(&quot;Start time must be set to a number.&quot;);c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;endTime&quot;,r({},u,{get:function(){return h},set:function(e){if(&quot;number&quot;!=typeof e)throw new TypeError(&quot;End time must be set to a number.&quot;);h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;text&quot;,r({},u,{get:function(){return g},set:function(e){g=&quot;&quot;+e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;region&quot;,r({},u,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;vertical&quot;,r({},u,{get:function(){return p},set:function(t){var r=e(t);if(r===!1)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;snapToLines&quot;,r({},u,{get:function(){return y},set:function(e){y=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;line&quot;,r({},u,{get:function(){return m},set:function(e){if(&quot;number&quot;!=typeof e&amp;&amp;e!==a)throw new SyntaxError(&quot;An invalid number or illegal string was specified.&quot;);m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;lineAlign&quot;,r({},u,{get:function(){return E},set:function(e){var r=t(e);if(!r)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);E=r,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;position&quot;,r({},u,{get:function(){return b},set:function(e){if(e&lt;0||e&gt;100)throw new Error(&quot;Position must be between 0 and 100.&quot;);b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;positionAlign&quot;,r({},u,{get:function(){return T},set:function(e){var r=t(e);if(!r)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);T=r,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;size&quot;,r({},u,{get:function(){return _},set:function(e){if(e&lt;0||e&gt;100)throw new Error(&quot;Size must be between 0 and 100.&quot;);_=e,this.hasBeenReset=!0}})),Object.defineProperty(o,&quot;align&quot;,r({},u,{get:function(){return k},set:function(e){var r=t(e);if(!r)throw new SyntaxError(&quot;An invalid or illegal string was specified.&quot;);k=r,this.hasBeenReset=!0}})),o.displayState=void 0,l)return o}if(&quot;undefined&quot;!=typeof window&amp;&amp;window.VTTCue)return window.VTTCue;var a=&quot;auto&quot;,n={&quot;&quot;:!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}()},{}],53:[function(e,t,r){&quot;use strict&quot;;function i(){this.window=window,this.state=&quot;INITIAL&quot;,this.buffer=&quot;&quot;,this.decoder=new f,this.regionList=[]}function a(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(&quot;:&quot;,&quot;&quot;),r[4]):r[1]&gt;59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function n(){this.values=Object.create(null)}function s(e,t,r,i){var a=i?e.split(i):[e];for(var n in a)if(&quot;string&quot;==typeof a[n]){var s=a[n].split(r);if(2===s.length){var o=s[0],l=s[1];t(o,l)}}}function o(e,t,r){function i(){var t=a(e);if(null===t)throw new Error(&quot;Malformed timestamp: &quot;+l);return e=e.replace(/^[^\sa-zA-Z-]+/,&quot;&quot;),t}function o(){e=e.replace(/^\s+/,&quot;&quot;)}var l=e;if(o(),t.startTime=i(),o(),&quot;--&gt;&quot;!==e.substr(0,3))throw new Error(&quot;Malformed time stamp (time stamps must be separated by &#39;--&gt;&#39;): &quot;+l);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var i=new n;s(e,function(e,t){switch(e){case&quot;region&quot;:for(var a=r.length-1;a&gt;=0;a--)if(r[a].id===t){i.set(e,r[a].region);break}break;case&quot;vertical&quot;:i.alt(e,t,[&quot;rl&quot;,&quot;lr&quot;]);break;case&quot;line&quot;:var n=t.split(&quot;,&quot;),s=n[0];i.integer(e,s),i.percent(e,s)&amp;&amp;i.set(&quot;snapToLines&quot;,!1),i.alt(e,s,[&quot;auto&quot;]),2===n.length&amp;&amp;i.alt(&quot;lineAlign&quot;,n[1],[&quot;start&quot;,h,&quot;end&quot;]);break;case&quot;position&quot;:n=t.split(&quot;,&quot;),i.percent(e,n[0]),2===n.length&amp;&amp;i.alt(&quot;positionAlign&quot;,n[1],[&quot;start&quot;,h,&quot;end&quot;,&quot;line-left&quot;,&quot;line-right&quot;,&quot;auto&quot;]);break;case&quot;size&quot;:i.percent(e,t);break;case&quot;align&quot;:i.alt(e,t,[&quot;start&quot;,h,&quot;end&quot;,&quot;left&quot;,&quot;right&quot;])}},/:/,/\s/),t.region=i.get(&quot;region&quot;,null),t.vertical=i.get(&quot;vertical&quot;,&quot;&quot;);var a=i.get(&quot;line&quot;,&quot;auto&quot;);&quot;auto&quot;===a&amp;&amp;c.line===-1&amp;&amp;(a=-1),t.line=a,t.lineAlign=i.get(&quot;lineAlign&quot;,&quot;start&quot;),t.snapToLines=i.get(&quot;snapToLines&quot;,!0),t.size=i.get(&quot;size&quot;,100),t.align=i.get(&quot;align&quot;,h);var o=i.get(&quot;position&quot;,&quot;auto&quot;);&quot;auto&quot;===o&amp;&amp;50===c.position&amp;&amp;(o=&quot;start&quot;===t.align||&quot;left&quot;===t.align?0:&quot;end&quot;===t.align||&quot;right&quot;===t.align?100:50),t.position=o}(e,t)}function l(e){return e.replace(/&lt;br(?: \/)?&gt;/gi,&quot;\n&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0}),r.fixLineBreaks=void 0;var u=e(52),d=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(u),f=function(){return{decode:function(e){if(!e)return&quot;&quot;;if(&quot;string&quot;!=typeof e)throw new Error(&quot;Error - expected string data.&quot;);return decodeURIComponent(encodeURIComponent(e))}}};n.prototype={set:function(e,t){this.get(e)||&quot;&quot;===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i&lt;r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&amp;&amp;this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&amp;&amp;(t=parseFloat(t))&gt;=0&amp;&amp;t&lt;=100)&amp;&amp;(this.set(e,t),!0)}};var c=new d.default(0,0,0),h=&quot;middle&quot;===c.align?&quot;middle&quot;:&quot;center&quot;;i.prototype={parse:function(e){function t(){var e=r.buffer,t=0;for(e=l(e);t&lt;e.length&amp;&amp;&quot;\r&quot;!==e[t]&amp;&amp;&quot;\n&quot;!==e[t];)++t;var i=e.substr(0,t);return&quot;\r&quot;===e[t]&amp;&amp;++t,&quot;\n&quot;===e[t]&amp;&amp;++t,r.buffer=e.substr(t),i}var r=this;e&amp;&amp;(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var i;if(&quot;INITIAL&quot;===r.state){if(!/\r\n|\n/.test(r.buffer))return this;i=t();var a=i.match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error(&quot;Malformed WebVTT signature.&quot;);r.state=&quot;HEADER&quot;}for(var n=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(n?n=!1:i=t(),r.state){case&quot;HEADER&quot;:/:/.test(i)?function(e){s(e,function(e,t){switch(e){case&quot;Region&quot;:}},/:/)}(i):i||(r.state=&quot;ID&quot;);continue;case&quot;NOTE&quot;:i||(r.state=&quot;ID&quot;);continue;case&quot;ID&quot;:if(/^NOTE($|[ \t])/.test(i)){r.state=&quot;NOTE&quot;;break}if(!i)continue;if(r.cue=new d.default(0,0,&quot;&quot;),r.state=&quot;CUE&quot;,i.indexOf(&quot;--&gt;&quot;)===-1){r.cue.id=i;continue}case&quot;CUE&quot;:try{o(i,r.cue,r.regionList)}catch(e){r.cue=null,r.state=&quot;BADCUE&quot;;continue}r.state=&quot;CUETEXT&quot;;continue;case&quot;CUETEXT&quot;:var u=i.indexOf(&quot;--&gt;&quot;)!==-1;if(!i||u&amp;&amp;(n=!0)){r.oncue&amp;&amp;r.oncue(r.cue),r.cue=null,r.state=&quot;ID&quot;;continue}r.cue.text&amp;&amp;(r.cue.text+=&quot;\n&quot;),r.cue.text+=i;continue;case&quot;BADCUE&quot;:i||(r.state=&quot;ID&quot;);continue}}}catch(e){&quot;CUETEXT&quot;===r.state&amp;&amp;r.cue&amp;&amp;r.oncue&amp;&amp;r.oncue(r.cue),r.cue=null,r.state=&quot;INITIAL&quot;===r.state?&quot;BADWEBVTT&quot;:&quot;BADCUE&quot;}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||&quot;HEADER&quot;===e.state)&amp;&amp;(e.buffer+=&quot;\n\n&quot;,e.parse()),&quot;INITIAL&quot;===e.state)throw new Error(&quot;Malformed WebVTT signature.&quot;)}catch(e){throw e}return e.onflush&amp;&amp;e.onflush(),this}},r.fixLineBreaks=l,r.default=i},{52:52}],54:[function(e,t,r){&quot;use strict&quot;;var i=e(53),a=function(e){return e&amp;&amp;e.__esModule?e:{default:e}}(i),n=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=e.length&gt;9?parseInt(e.substr(0,e.indexOf(&quot;:&quot;))):0;return isNaN(t)||isNaN(r)||isNaN(i)||isNaN(a)?-1:(t+=1e3*r,t+=6e4*i,t+=36e5*a)},s=function(e,t,r){var i=e[t],a=e[i.prevCC];if(!a||!a.new&amp;&amp;i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;a&amp;&amp;a.new;)e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC];e.presentationOffset=r},o={parse:function(e,t,r,i,o,l){var u=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,&quot;\n&quot;).split(&quot;\n&quot;),d=&quot;00:00.000&quot;,f=0,c=0,h=0,g=[],v=void 0,p=!0,y=new a.default;y.oncue=function(e){var t=r[i],a=r.ccOffset;t&amp;&amp;t.new&amp;&amp;(c?a=r.ccOffset=t.start:s(r,i,h)),h&amp;&amp;!c&amp;&amp;(a=h+r.ccOffset-r.presentationOffset),e.startTime+=a-c,e.endTime+=a-c,e.text=decodeURIComponent(escape(e.text)),e.endTime&gt;0&amp;&amp;g.push(e)},y.onparsingerror=function(e){v=e},y.onflush=function(){if(v&amp;&amp;l)return void l(v);o(g)},u.forEach(function(e){if(p){if(e.startsWith(&quot;X-TIMESTAMP-MAP=&quot;)){p=!1,e.substr(16).split(&quot;,&quot;).forEach(function(e){e.startsWith(&quot;LOCAL:&quot;)?d=e.substr(6):e.startsWith(&quot;MPEGTS:&quot;)&amp;&amp;(f=parseInt(e.substr(7)))});try{t=t&lt;0?t+8589934592:t,f-=t,c=n(d)/1e3,h=f/9e4,c===-1&amp;&amp;(v=new Error(&quot;Malformed X-TIMESTAMP-MAP: &quot;+e))}catch(t){v=new Error(&quot;Malformed X-TIMESTAMP-MAP: &quot;+e)}return}&quot;&quot;===e&amp;&amp;(p=!1)}y.parse(e+&quot;\n&quot;)}),y.flush()}};t.exports=o},{53:53}],55:[function(e,t,r){&quot;use strict&quot;;function i(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}Object.defineProperty(r,&quot;__esModule&quot;,{value:!0});var a=function(){function e(e,t){for(var r=0;r&lt;t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&amp;&amp;e(t.prototype,r),i&amp;&amp;e(t,i),t}}(),n=e(50),s=function(){function e(t){i(this,e),t&amp;&amp;t.xhrSetup&amp;&amp;(this.xhrSetup=t.xhrSetup)}return a(e,[{key:&quot;destroy&quot;,value:function(){this.abort(),this.loader=null}},{key:&quot;abort&quot;,value:function(){var e=this.loader;e&amp;&amp;4!==e.readyState&amp;&amp;(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:&quot;load&quot;,value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:&quot;loadInternal&quot;,value:function(){var e,t=this.context;e=&quot;undefined&quot;!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;if(i)try{i(e,t.url)}catch(r){e.open(&quot;GET&quot;,t.url,!0),i(e,t.url)}e.readyState||e.open(&quot;GET&quot;,t.url,!0),t.rangeEnd&amp;&amp;e.setRequestHeader(&quot;Range&quot;,&quot;bytes=&quot;+t.rangeStart+&quot;-&quot;+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:&quot;readystatechange&quot;,value:function(e){var t=e.currentTarget,r=t.readyState,i=this.stats,a=this.context,s=this.config;if(!i.aborted&amp;&amp;r&gt;=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&amp;&amp;(i.tfirst=Math.max(performance.now(),i.trequest)),4===r){var o=t.status;if(o&gt;=200&amp;&amp;o&lt;300){i.tload=Math.max(i.tfirst,performance.now());var l=void 0,u=void 0;&quot;arraybuffer&quot;===a.responseType?(l=t.response,u=l.byteLength):(l=t.responseText,u=l.length),i.loaded=i.total=u;var d={url:t.responseURL,data:l};this.callbacks.onSuccess(d,i,a)}else i.retry&gt;=s.maxRetry||o&gt;=400&amp;&amp;o&lt;499?(n.logger.error(o+&quot; while loading &quot;+a.url),this.callbacks.onError({code:o,text:t.statusText},a)):(n.logger.warn(o+&quot; while loading &quot;+a.url+&quot;, retrying in &quot;+this.retryDelay+&quot;...&quot;),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)}},{key:&quot;loadtimeout&quot;,value:function(){n.logger.warn(&quot;timeout while loading &quot;+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:&quot;loadprogress&quot;,value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&amp;&amp;(t.total=e.total);var r=this.callbacks.onProgress;r&amp;&amp;r(t,this.context,null)}}]),e}();r.default=s},{50:50}]},{},[37])(37)});</td>
      </tr>
</table>

  <details class="details-reset details-overlay BlobToolbar position-absolute js-file-line-actions dropdown d-none" aria-hidden="true">
    <summary class="btn-octicon ml-0 px-2 p-0 bg-white border border-gray-dark rounded-1" aria-label="Inline file action toolbar">
      <svg class="octicon octicon-kebab-horizontal" viewBox="0 0 13 16" version="1.1" width="13" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM13 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>
    </summary>
    <details-menu>
      <ul class="BlobToolbar-dropdown dropdown-menu dropdown-menu-se mt-2" style="width:185px">
        <li><clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-lines" style="cursor:pointer;" data-original-text="Copy lines">Copy lines</clipboard-copy></li>
        <li><clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-permalink" style="cursor:pointer;" data-original-text="Copy permalink">Copy permalink</clipboard-copy></li>
        <li><a class="dropdown-item js-update-url-with-hash" id="js-view-git-blame" role="menuitem" href="/niandeng-ckplayer/chplayer/blame/10314236607da7247d44904635d7f916098c4e12/chplayer/hls/hls.min.js">View git blame</a></li>
          <li><a class="dropdown-item" id="js-new-issue" role="menuitem" href="/niandeng-ckplayer/chplayer/issues/new">Reference in new issue</a></li>
      </ul>
    </details-menu>
  </details>

  </div>

    </div>

  

  <details class="details-reset details-overlay details-overlay-dark">
    <summary data-hotkey="l" aria-label="Jump to line"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-jump-to-line-form Box-body d-flex" action="" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
        <button type="submit" class="btn" data-close-dialog>Go</button>
</form>    </details-dialog>
  </details>



  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>
  

  </div>

        
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2019 <span title="0.27951s from unicorn-8cc6fdc95-2d26n">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to security, text:security" href="https://github.com/security">Security</a></li>
        <li class="mr-3"><a href="https://githubstatus.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon mr-lg-4" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
        <li class="mr-3"><a href="https://github.com/pricing" data-ga-click="Footer, go to Pricing, text:Pricing">Pricing</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
        <li class="mr-3"><a href="https://github.blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    <script crossorigin="anonymous" integrity="sha512-47ZXWJASen/yLysPiEpAb7/WvHBIHIRKo+7W5g0YYFiInTWqpjYBHTpeHut0QWEf51gExNhSEy55XQmxrZ+0xA==" type="application/javascript" src="https://github.githubassets.com/assets/compat-742699bf681282d2e3cf809d2b9de73a.js"></script>
    <script crossorigin="anonymous" integrity="sha512-wGR6eNtxDxWfqfl2Qkc6PJi53UcuimD2jIlCQ9JVbhdV7fXMj7VlfzHSjjsBpFWnM5YNKz2LY2SSNvKgStXdow==" type="application/javascript" src="https://github.githubassets.com/assets/frameworks-60e34f08371384b8f7942cee70fec187.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-g8ZzfpPpkenoVijxnhXEN7ttcrzERUlAXXAf0Kt8CkSff1b579NnbpMdN6jpLcLYgxpYaGtqq3IuOqvf3ksPDA==" type="application/javascript" src="https://github.githubassets.com/assets/github-d8da0555770640be9560c0923e2c5f97.js"></script>
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default text-gray-dark" open>
    <summary aria-haspopup="dialog" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>

  <div aria-live="polite" class="js-global-screen-reader-notice sr-only"></div>

  </body>
</html>

